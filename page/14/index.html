<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="心有希冀，目有繁星，追光而遇，沐光而行">
<meta property="og:type" content="website">
<meta property="og:title" content="鹿鹿祁">
<meta property="og:url" content="http://example.com/page/14/index.html">
<meta property="og:site_name" content="鹿鹿祁">
<meta property="og:description" content="心有希冀，目有繁星，追光而遇，沐光而行">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="鹿祁">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/page/14/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>鹿鹿祁</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">鹿鹿祁</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>日程表</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/10/22/%E5%AE%89%E5%85%A8%E8%AE%BE%E5%A4%87%E5%9F%BA%E7%A1%80-%E6%B7%B1%E4%BF%A1%E6%9C%8D%E4%B8%8A%E7%BD%91%E8%A1%8C%E4%B8%BA%E7%AE%A1%E7%90%86%E5%BA%94%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="鹿祁">
      <meta itemprop="description" content="心有希冀，目有繁星，追光而遇，沐光而行">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="鹿鹿祁">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/22/%E5%AE%89%E5%85%A8%E8%AE%BE%E5%A4%87%E5%9F%BA%E7%A1%80-%E6%B7%B1%E4%BF%A1%E6%9C%8D%E4%B8%8A%E7%BD%91%E8%A1%8C%E4%B8%BA%E7%AE%A1%E7%90%86%E5%BA%94%E7%94%A8/" class="post-title-link" itemprop="url">安全设备基础-深信服上网行为管理应用</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-10-22 22:13:25 / 修改时间：22:17:38" itemprop="dateCreated datePublished" datetime="2023-10-22T22:13:25+08:00">2023-10-22</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ul>
<li>-<br>  OCR图像分析：采用业界主流的高性能OCR图像分析算法，应用于泄密风险分析和事件追溯取证<ul>
<li>行为基线分析：通过行为基线建模分析实现动态适配的风险判别标准，自适应客户场景建立异常行为监控机制</li>
<li>机器学习分析：风险分析引擎应用机器学习算法，行为日志分析效率和风险分析准确率自动迭代增强</li>
</ul>
</li>
</ul>
<h4 id="二、组网方案"><a href="#二、组网方案" class="headerlink" title="二、组网方案"></a>二、组网方案</h4><h5 id="1、基本操作"><a href="#1、基本操作" class="headerlink" title="1、基本操作"></a>1、基本操作</h5><ul>
<li><p>登录设备</p>
<ul>
<li>出厂是有默认IP地址<ul>
<li>Eth0口：10.251.251.251&#x2F;24</li>
<li>Eth1口：10.252.252.252&#x2F;24</li>
</ul>
</li>
<li>主机使用一根网线连接Eth0口，给主机设置一个相同网段的IP直接开始访问</li>
<li>在主机上打开浏览器输入管理IP，这里一定使用HTTPS进行访问：<a href="https://10.251.251.xn--251%2C%2C:admin%2C:admin-pz12af7a63pf9ovrilldda2152cla016wo9sga3241mcah536i4ia668bqa5100h8fxdjs8h/">https://10.251.251.251，使用出厂的用户名密码登录，默认一般为用户名：admin，密码：admin</a></li>
</ul>
</li>
<li><p>恢复出厂设置</p>
<ul>
<li><p>如果可以登录进设备，直接在设备中进行恢复</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202203291431947.png" alt="image-20220329143137805"></p>
</li>
<li><p>如果无法登录进设备，也不知道管理IP的情况</p>
<ul>
<li>设备断电，使用一根交叉网线去短接一组 bypass 接口（默认情况下 Eth0 和 Eth2 口为一组 bypass 口），设备接电，大概过 5-10 分钟设备自动重启，表示恢复出厂设置成功</li>
</ul>
</li>
</ul>
</li>
<li><p>恢复登录密码（知道管理IP，能够进入到登录界面）</p>
<ul>
<li>使用一根交叉网线去短接非一组 bypass 接口</li>
</ul>
</li>
</ul>
<h5 id="2、部署模式"><a href="#2、部署模式" class="headerlink" title="2、部署模式"></a>2、部署模式</h5><p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202203291440901.png" alt="image-20220329144044787"></p>
<ul>
<li>路由部署<ul>
<li>采用路由部署模式，接口都是属于三层接口，需要配置 IP 地址，拥有所有的功能</li>
</ul>
</li>
<li>网桥部署<ul>
<li>采用网桥部署模式，相当于 AC 属于一台二层设备，针对于NAT、DHCP等功能就无法使用</li>
</ul>
</li>
<li>旁路部署<ul>
<li>只能够针对于TCP的应用进行控制，主要做审计的功能</li>
</ul>
</li>
<li>TRUNK部署<ul>
<li>AC相当于一台三层交换机，与下面二层交换机连接的链路为 trunk 链路</li>
</ul>
</li>
</ul>
<h5 id="3、基本防火墙（包过滤的防火墙）"><a href="#3、基本防火墙（包过滤的防火墙）" class="headerlink" title="3、基本防火墙（包过滤的防火墙）"></a>3、基本防火墙（包过滤的防火墙）</h5><p><strong>基于五元组进行控制</strong></p>
<ul>
<li><p>防火墙过滤</p>
<ul>
<li>默认情况下，流量全部是放通状态</li>
</ul>
</li>
<li><p>NAT代理上网</p>
<ul>
<li><p>源地址转换（SNAT）</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202203291456313.png" alt="image-20220329145626272"></p>
</li>
</ul>
</li>
<li><p>端口映射</p>
<ul>
<li><p>目的地址转换（DNAT）</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202203291513057.png" alt="image-20220329151332954"></p>
</li>
</ul>
</li>
</ul>
<h4 id="三、用户认证技术"><a href="#三、用户认证技术" class="headerlink" title="三、用户认证技术"></a>三、用户认证技术</h4><h5 id="1、用户管理"><a href="#1、用户管理" class="headerlink" title="1、用户管理"></a>1、用户管理</h5><p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202203291529690.png" alt="image-20220329152917615"></p>
<ul>
<li>针对 AC 上创建本地用户及密码</li>
<li>用户创建好之后，还需要去添加认证策略</li>
</ul>
<h5 id="2、不需要认证"><a href="#2、不需要认证" class="headerlink" title="2、不需要认证"></a>2、不需要认证</h5><ul>
<li><p>也是一种认证方式，只不过用户是无感知的</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202204251927745.png" alt="image-20220425192711644"></p>
</li>
</ul>
<h5 id="3、IP-x2F-MAC绑定认证"><a href="#3、IP-x2F-MAC绑定认证" class="headerlink" title="3、IP&#x2F;MAC绑定认证"></a>3、IP&#x2F;MAC绑定认证</h5><ul>
<li><p>防止用户进行 IP 地址修改</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202204251935111.png" alt="image-20220425193410441"></p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202204251936196.png" alt="image-20220425193650118"></p>
</li>
</ul>
<h5 id="4、密码认证"><a href="#4、密码认证" class="headerlink" title="4、密码认证"></a>4、密码认证</h5><ul>
<li><p>本地账号密码：直接在AC上创建对应的用户名和密码</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202204251937233.png" alt="image-20220425193724110"></p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202204251937417.png" alt="image-20220425193759258"></p>
</li>
<li><p>外部服务器：一般最常见的是对接微软 AD 域控制器</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202203291549260.png" alt="image-20220329154955217"></p>
</li>
</ul>
<h5 id="5、外部认证"><a href="#5、外部认证" class="headerlink" title="5、外部认证"></a>5、外部认证</h5><ul>
<li><p>短信认证</p>
</li>
<li><p>微信认证</p>
</li>
<li><p>……………………</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202204251938067.png" alt="image-20220425193832020"></p>
</li>
</ul>
<h4 id="四、应用控制技术"><a href="#四、应用控制技术" class="headerlink" title="四、应用控制技术"></a>四、应用控制技术</h4><h5 id="1、应用特征识别控制"><a href="#1、应用特征识别控制" class="headerlink" title="1、应用特征识别控制"></a>1、应用特征识别控制</h5><ul>
<li><p>根据应用进行控制</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202204252008766.png" alt="image-20220425200818578"></p>
</li>
<li><p>邮件过滤</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202204252014393.png" alt="image-20220425201416189"></p>
</li>
<li><p>搜索引擎的关键字过滤</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202204252016456.png" alt="image-20220425201605287"></p>
</li>
<li><p>QQ白名单</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202204252016691.png" alt="image-20220425201652554"></p>
</li>
</ul>
<h5 id="2、URL识别控制（http和https）"><a href="#2、URL识别控制（http和https）" class="headerlink" title="2、URL识别控制（http和https）"></a>2、URL识别控制（http和https）</h5><ul>
<li><p>针对于URL进行控制（可以访问哪些网站，不能访问哪些网站）</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202204252018757.png" alt="image-20220425201846665"></p>
</li>
</ul>
<h4 id="五、流量管理技术"><a href="#五、流量管理技术" class="headerlink" title="五、流量管理技术"></a>五、流量管理技术</h4><h5 id="1、限制通道"><a href="#1、限制通道" class="headerlink" title="1、限制通道"></a>1、限制通道</h5><ul>
<li><p>针对于内网的用户使用对应的应用进行限速</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202204252021530.png" alt="image-20220425202113399"></p>
</li>
</ul>
<h5 id="2、保障通道"><a href="#2、保障通道" class="headerlink" title="2、保障通道"></a>2、保障通道</h5><ul>
<li><p>针对于内网的用户访问对应的应用保障带宽</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202204252022720.png" alt="image-20220425202242510"></p>
</li>
</ul>
<h4 id="六、内容审计技术（上网行为审计）"><a href="#六、内容审计技术（上网行为审计）" class="headerlink" title="六、内容审计技术（上网行为审计）"></a>六、内容审计技术（上网行为审计）</h4><h5 id="1、外发邮件审计"><a href="#1、外发邮件审计" class="headerlink" title="1、外发邮件审计"></a>1、外发邮件审计</h5><p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202204252030348.png" alt="image-20220425203036297"></p>
<h5 id="2、SSL内容解密"><a href="#2、SSL内容解密" class="headerlink" title="2、SSL内容解密"></a>2、SSL内容解密</h5><ul>
<li><p>中间人解密</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202204252032937.png" alt="image-20220425202919306"></p>
</li>
<li><p>准入插件解密</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202204252033540.png" alt="image-20220425203331416"></p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202204252034649.png" alt="image-20220425203408554"></p>
</li>
</ul>
<h5 id="4、WEB关键字过滤"><a href="#4、WEB关键字过滤" class="headerlink" title="4、WEB关键字过滤"></a>4、WEB关键字过滤</h5><p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202204252026274.png" alt="image-20220425202620179"></p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202204252034615.png" alt="image-20220425203455567"></p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202204252035215.png" alt="image-20220425203531167"></p>
<h5 id="5、IM聊天审计"><a href="#5、IM聊天审计" class="headerlink" title="5、IM聊天审计"></a>5、IM聊天审计</h5><p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202204252027391.png" alt="image-20220425202732335"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/10/22/%E5%AE%89%E5%85%A8%E8%AE%BE%E5%A4%87%E5%9F%BA%E7%A1%80-%E5%A0%A1%E5%9E%92%E6%9C%BA%E8%AE%BE%E5%A4%87%E4%BB%8B%E7%BB%8D/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="鹿祁">
      <meta itemprop="description" content="心有希冀，目有繁星，追光而遇，沐光而行">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="鹿鹿祁">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/22/%E5%AE%89%E5%85%A8%E8%AE%BE%E5%A4%87%E5%9F%BA%E7%A1%80-%E5%A0%A1%E5%9E%92%E6%9C%BA%E8%AE%BE%E5%A4%87%E4%BB%8B%E7%BB%8D/" class="post-title-link" itemprop="url">安全设备基础-堡垒机设备介绍</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-10-22 22:13:04 / 修改时间：22:16:51" itemprop="dateCreated datePublished" datetime="2023-10-22T22:13:04+08:00">2023-10-22</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="一、启明星辰天玥运维安全网关"><a href="#一、启明星辰天玥运维安全网关" class="headerlink" title="一、启明星辰天玥运维安全网关"></a>一、启明星辰天玥运维安全网关</h4><h5 id="1、产品介绍"><a href="#1、产品介绍" class="headerlink" title="1、产品介绍"></a>1、产品介绍</h5><ul>
<li>天玥运维安全网关，俗称堡垒机，能够对运维人员维护过程进行全面跟踪、控制、记录、回放；</li>
<li>支持细粒度配置运维人员的访问权限，实时阻断违规、越权的访问行为，同时提供维护人员操作的全过程的记录与报告；</li>
<li>系统支持对加密与图形协议进行审计，消除了传统行为审计系统中的审计盲点，是IT系统内部控制最有力的支撑平台。</li>
<li>运维过程三个阶段进行严格管控：<ul>
<li>事前预防：建立“自然人-资源-资源账号”关系，实现统一认证和授权</li>
<li>事中控制：建立“自然人-操作-资源”关系，实现操作审计和控制</li>
<li>事后审计：建立“自然人-资源-审计日志”关系，实现事后溯源和责任界定</li>
</ul>
</li>
</ul>
<h5 id="2、功能特点"><a href="#2、功能特点" class="headerlink" title="2、功能特点"></a>2、功能特点</h5><ul>
<li>部署方式灵活性： 天玥运维安全网关支持单机、双机、分布式部署多种部署方式，并支持NAT和网口聚合方式，适应多变业务场景。</li>
<li>操作使用便捷性： 天玥运维安全网关提供多种运维方式、C&#x2F;S运维客户端、资源批量登录、命令批量执行、设备自动改密等多种功能以保证运维过程的自动和快捷性。</li>
<li>管控方式严格性： 天玥运维安全网关提供命令限制与复核、应用发布防跳转、运维账号IP、MAC限制等。严格的管控方式以保证运维过程的规范性。</li>
<li>审计效果精细化： 数据库协议深度解析、数据库返回行数记录、Oracle数据库变量绑定解析。</li>
<li>认证方式多样性： 天玥运维安全网关包括多样认证方式，支持对不同用户设置不同认证方式组合的双因素认证，更具灵活性。</li>
<li>运维协议全面性： 天玥运维安全网关支持多种运维访问协议，能够充分满足日常运维需要。</li>
</ul>
<h5 id="3、技术优势"><a href="#3、技术优势" class="headerlink" title="3、技术优势"></a>3、技术优势</h5><ul>
<li>堡垒机分身：虚化出多台堡垒机，适用于分权分域的用户管理场景。</li>
<li>虚拟化部署：支持VMware、VirtualBox、KVM和Xen（HVM）虚拟化环境部署。</li>
<li>运维操作防跳转：防止通过应用发布服务器进行跳转登录未授权资源。web页面防跳转功能，进行http&#x2F;https访问过程时运维人员仅允许访问授权地址。</li>
<li>双重审计：实现数据库协议、字符协议、文件传输协议命令和录像的双重审计。实现命令审计和录像审计的关联检索和回放。</li>
<li>命令限制与复核：对于高危命令实现实时告警或阻断。对于特别重要的命令实现多人审核。</li>
<li>数据库深度解析：数据库协议级审计。数据库返回行数记录。Oracle数据库变量绑定解析。</li>
<li>敏感数据管控：运维人员拥有高权限系统账号，会接触到重要敏感数据。对运维人员上传、下载、流转重要敏感数据进行控制和记录。</li>
</ul>
<h5 id="4、用户价值"><a href="#4、用户价值" class="headerlink" title="4、用户价值"></a>4、用户价值</h5><ul>
<li>完善内控内审，满足合规要求：目前，越来越多的单位面临一种或者几种合规性要求。堡垒机提供的完备审计方案，可以完善组织的IT内控与审计体系，从而满足各种合规性要求，并且使组织能够顺利通过IT审计。</li>
<li>简化运维管理，提高运维效率：堡垒机对账号和资产进行统一管理，规范简化运维流程。提供多种运维操作方式以满足各种不同使用习惯。自动便捷的使用体验提供整体运维效率。</li>
<li>控制运维风险，防止数据泄露：堡垒机基于统一认证、集中管理、规范运维操作行为，对运维操作和数据流转过程做到严格的控制和记录，最大程度控制运维风险。</li>
</ul>
<h4 id="二、安恒明御运维审计与风险控制系统"><a href="#二、安恒明御运维审计与风险控制系统" class="headerlink" title="二、安恒明御运维审计与风险控制系统"></a>二、安恒明御运维审计与风险控制系统</h4><h5 id="1、产品介绍-1"><a href="#1、产品介绍-1" class="headerlink" title="1、产品介绍"></a>1、产品介绍</h5><ul>
<li>明御运维审计与风险控制系统（简称：堡垒机或跳板机）是安恒信息结合多年运维安全管理理论和实际运维经验的基础上，结合各类法令法规(如等级保护、分级保护、银监、证监、PCI、企业内控管理、SOX塞班斯、ISO27001等) 对运维管理的要求，并提供4A(认证Authentication、账号Account、授权Authorization、审计Audit)的统一安全管理方案。</li>
</ul>
<h5 id="2、功能特点-1"><a href="#2、功能特点-1" class="headerlink" title="2、功能特点"></a>2、功能特点</h5><ul>
<li>用户分权管理：支持多种用户角色:超级管理员、部门管理员、配置管理员、审计管理员、运维员、审计员、系统管理员、密码管理员，每种用户角色的权限都不同，为用户设立不同的角色提供了选择，满足合规对三权分立的要求，并提供灵活的角色自定义能力。</li>
<li>集中运维授权：通过堡垒机的集中授权，帮助客户梳理用户与主机之间的关系，并且提供- -对一、一对多、多对一、多对多的灵活授权模式。</li>
<li>资产单点登录：支持托管主机的账户和密码，运维人员登录堡垒机后选择相应资产即可成功自动登录到目标主机中进行运维操作，无需输入主机的账户和密码。</li>
<li>精细命令控制：提供集中的命令控制策略功能，支持字符协议及数据库协议的命令级策略控制，支持通配符和正则表达式两种方式，实现阻断会话、阻断命令、审批、直接放行4种动作。</li>
<li>统一操作审计：对所有的操作进行详细记录，并提供综合查询功能;审计日志可以在线播放也可以离线播放，所有的审计日志支持自动备份和自动归档。</li>
</ul>
<h5 id="3、产品优势"><a href="#3、产品优势" class="headerlink" title="3、产品优势"></a>3、产品优势</h5><ul>
<li>远程运维安全接入：内置SSL VPN功能，实现远程运维的安全接入，保证数据传输安全。</li>
<li>统一认证高效运维：提供本地认证，AD&#x2F;LDAP&#x2F;Radius远程认证、动态口令、usbkey、手机APP口令等双因子认证。</li>
<li>灵活的权限控制：用户只能运维堡垒机中已授权的服务器，降低越权操作和高危操作的风险。</li>
<li>运维审计满足合规：所有远程运维操作，均可进行审计录像，方便事后追踪溯源，满足合规建设要求。</li>
<li>文件传输双向控制：支持灵活的文件传输双向控制，支持传输文件留存，有效防止数据泄漏风险。</li>
<li>快速部署成本低：旁路部署，快速上线；公有云市场堡垒机可店铺下单，支持按月付费。</li>
</ul>
<h4 id="三、绿盟运维安全管理系统"><a href="#三、绿盟运维安全管理系统" class="headerlink" title="三、绿盟运维安全管理系统"></a>三、绿盟运维安全管理系统</h4><h5 id="1、产品介绍-2"><a href="#1、产品介绍-2" class="headerlink" title="1、产品介绍"></a>1、产品介绍</h5><ul>
<li>绿盟运维安全管理系统（俗称堡垒机，英文简称OSMS）以满足等级保护下“身份鉴别、访问控制、安全审计”等监管要求为核心，基于“账号、认证、授权和审计”4A管理理念，采用三权分立和最小访问权限原则，实现精准的事前识别、精细的事中控制和精确的事后审计。</li>
<li>绿盟运维安全管理系统提供了一套先进的运维安全管控与审计解决方案，目标是帮助企业转变传统IT安全运维的被动响应模式，建立面向用户的集中、主动的运维安全管控模式，降低人为安全风险，满足合规要求，保障企业效益。</li>
<li>产品支持高性能硬件和国产化平台（CPU+OS），同时支持虚拟化、阿里云、AWS云等云环境部署。</li>
</ul>
<h5 id="2、功能特性"><a href="#2、功能特性" class="headerlink" title="2、功能特性"></a>2、功能特性</h5><ul>
<li>全程运维行为审计：基于唯一身份标识，通过对用户从登录到退出的全程操作行为进行审计，监控用户对目标设备的所有敏感操作，聚焦关键事件，实现对安全事件的实时发现与预警。</li>
<li>智能的资产管理体系：智能化发现运维人员在运维过程中违规新建的设备账号(简称幽灵账号)，以及长期不会被使用的设备账号(简称孤儿账号)，减少安全隐患。</li>
<li>细粒度的授权体系：支持创建基于时间、IP IP段、用户用户组、设备设备组、设备账号、命令关键字、危险级别等元素的组合条件，授权用户可访问的目标设备或定义高危操作监控策略。当用户越权执行特定命令的时候，实时进行告警和阻断，确保信息系统安全运行。</li>
</ul>
<h5 id="3、产品优势-1"><a href="#3、产品优势-1" class="headerlink" title="3、产品优势"></a>3、产品优势</h5><ul>
<li>安全：采用专业的硬件平台和安全优化的操作系统，支持数据通道加密，使用了系统和用户数据隔离的存储架构，对用户数据进行加密存储，确保数据存储和数据传输的安全性</li>
<li>易用：支持运维过程中的单点登录，多种灵活的设备登录方式、向导式用户配置以及配置信息批量处理等功能。</li>
<li>智能：OSMS支持设备自动发现、设备账号自动改密、运维过程按需自动切换权限、自动备份审计日志和自动生成发送报表等功能。</li>
</ul>
<h5 id="4、客户价值"><a href="#4、客户价值" class="headerlink" title="4、客户价值"></a>4、客户价值</h5><ul>
<li>风险管控，降低运维风险：通过灵活的权限管理、登录和命令控制，智能发现幽灵账号和孤儿账号等功能，最大程度降低客户内部员工和第三方人员运维的风险。</li>
<li>实时审计，提高分析效率：通过字符、图形等多种审计手段，使用倍数、拖拉、定点等多种播放方式，及时发现违规操作行为和追查取证。</li>
<li>自动化运维，提升运维效率：通过自动改密、业务数据备份、补丁更新等手段，减少运维工作，提升运维效率。</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/10/22/%E5%AE%89%E5%85%A8%E8%AE%BE%E5%A4%87%E5%9F%BA%E7%A1%80-%E5%85%A5%E4%BE%B5%E6%A3%80%E6%B5%8B%E8%AE%BE%E5%A4%87%E4%BB%8B%E7%BB%8D/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="鹿祁">
      <meta itemprop="description" content="心有希冀，目有繁星，追光而遇，沐光而行">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="鹿鹿祁">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/22/%E5%AE%89%E5%85%A8%E8%AE%BE%E5%A4%87%E5%9F%BA%E7%A1%80-%E5%85%A5%E4%BE%B5%E6%A3%80%E6%B5%8B%E8%AE%BE%E5%A4%87%E4%BB%8B%E7%BB%8D/" class="post-title-link" itemprop="url">安全设备基础-入侵检测设备介绍</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-10-22 22:12:51 / 修改时间：22:16:22" itemprop="dateCreated datePublished" datetime="2023-10-22T22:12:51+08:00">2023-10-22</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="一、启明星辰入侵检测IDS"><a href="#一、启明星辰入侵检测IDS" class="headerlink" title="一、启明星辰入侵检测IDS"></a>一、启明星辰入侵检测IDS</h4><h5 id="1、介绍"><a href="#1、介绍" class="headerlink" title="1、介绍"></a>1、介绍</h5><ul>
<li>天阗入侵检测与管理系统（IDS）是启明星辰自主原创并拥有完全自主知识产权的威胁检测、分析与管理产品，该产品对于病毒、蠕虫、木马、DDoS、扫描、SQL注入、XSS、缓冲区溢出、欺骗劫持等攻击行为以及网络资源滥用行为（如P2P上传&#x2F;下载、网络游戏、视频&#x2F;音频、网络炒股）等威胁具有高精度的检测能力，同时，该产品中的流量模块对于网络流量的异常情况具有非常准确、有效的发现能力。</li>
<li>该产品在精确检测的基础上强调对威胁的可管理性（如：威胁分析、威胁处理），尤其是对可能产生的大量事件进行了智能过滤，仅向使用者展示真正需要关注的威胁，在减轻使用者工作量的同时，保障威胁处理的及时性。</li>
</ul>
<h5 id="2、功能特点"><a href="#2、功能特点" class="headerlink" title="2、功能特点"></a>2、功能特点</h5><ul>
<li>组织化威胁管理</li>
<li>威胁分析与处理帮助</li>
<li>面向安全结论的报表</li>
<li>智能报警分析与过滤</li>
<li>全面用户上网行为监控</li>
<li>具备智能流量分析能力</li>
<li>精确的Web威胁检测</li>
<li>全面精确的威胁发现</li>
</ul>
<h5 id="3、技术优势"><a href="#3、技术优势" class="headerlink" title="3、技术优势"></a>3、技术优势</h5><ul>
<li>事件日志与策略自动优化：根据用户的安全态势及发生频率识别垃圾事件，并进行策略优化处理。</li>
<li>简单威胁管理：采用去技术化的向导对威胁进行分析和处理，降低了使用者的维护工作量。</li>
<li>智能威胁分析：能够对上报的事件进行关联分析，识别出重要报警，提醒用户关注。</li>
<li>全面威胁检测：对常见的网络威胁、异常流量等攻击行为能够准确高效的检测。</li>
</ul>
<h5 id="4、用户价值"><a href="#4、用户价值" class="headerlink" title="4、用户价值"></a>4、用户价值</h5><ul>
<li>天阗入侵检测与管理系统（IDS）是一款智能化的入侵检测系统，用智能算法，快速过滤掉海量的低质量报警事件；用资产关联算法，使系统展示出来的事件数量大幅减少；用代码优化技术，提升检测处理性能等等，旨在帮助用户，快速定位网络威胁、聚焦重点事件、降低管理难度。运用可视化技术手段、独有的智能算法，把复杂的网络威胁检测的问题变得更加直观有效。通过准确的日报、周报、月报，实现每一条结论都有据可查。从定量分析到定性分析为用户提供准确的、客观的网络安全建设建议。</li>
</ul>
<h4 id="二、安恒明御入侵检测系统"><a href="#二、安恒明御入侵检测系统" class="headerlink" title="二、安恒明御入侵检测系统"></a>二、安恒明御入侵检测系统</h4><h5 id="1、介绍-1"><a href="#1、介绍-1" class="headerlink" title="1、介绍"></a>1、介绍</h5><ul>
<li>明御入侵检测系统（DAS-NTA）以全面深入的流量解析为基础，通过智能语义分析、精准全面的检测规则、多角度分析模型、流量异常识别等技术，提供“可信、精准”的网络攻击和威胁事件发现、攻击源与攻击目标定位、攻击行为关联分析能力，还原入侵检测事件，多维视角实时呈现全网安全态势，为用户网络安全保障工作提供有力支持。</li>
</ul>
<h5 id="2、产品特点"><a href="#2、产品特点" class="headerlink" title="2、产品特点"></a>2、产品特点</h5><ul>
<li>信创型号，引领国产化潮流：NTA信创型号采用中国自主知识产权的处理器，解决了芯片设计上存在的安全隐患操作系统采用中国自主研发的操作系统，该系统具备强大的抗攻击能力，解决自身进程及文件被非法算改和破坏;应用模块采用安恒信息自主研发的应用模块，真正实现硬件到软件、系统到芯片的完全自主，真正意义上的全国产化安全产品</li>
<li>精准识别威胁：NTA基于被动的流量分析引|入检测模型和验证机制，增强系统检测能力和范围，如安全漏洞检测和网页篡改检测等</li>
<li>线性扩展的大流量处理能力：NTA采用设备堆叠分流处理技术，单点处理能力达10G的超大流量检测</li>
<li>全流量分析：NTA可建立全流量安全分析与取证平台，以旁路模式进行实时全流量分析，洞察黑客攻击，能同步监测分析系统潜在弱点</li>
<li>层次化的分布式大规模检测网络：NTA通过设备级联和分散部署，构建统-的大规模监测网络，实现安全威胁态势全局感知</li>
<li>灵活扩展的安全威胁检测种类和范围：NTA采用了多级分析处理引擎和模块化插件架构，可及时、灵活扩充不同安全威胁事件和威胁检测种类</li>
<li>完整的测评效果动态评估机制：NTA通过针对每次测评过程和整改前后的安全问题进行持续有效跟踪，进-步建立完整的测评效果动态评估机制，可利用人工扫描、渗透、代码分析等定期服务，快速发现评估安全风险</li>
</ul>
<h5 id="3、用户价值"><a href="#3、用户价值" class="headerlink" title="3、用户价值"></a>3、用户价值</h5><ul>
<li>预警重要信息系统发生的安全事件：产品采用被动流量分析技术，能实时发现网络流量中的各类威胁事件，及时产生风险告警，从多维度视角直观展示用户网络中的安全事件。</li>
<li>完善核心系统安全防护能力：产品可发现各种隐蔽威胁，分析当前安全防护的弱点并输出完善防护的策略建议，同时本地离线威胁情报与云端联动，协同保障用户网络安全。</li>
<li>细粒度控制策略：产品对IDS规则的管理颗粒度细致，可以单独对每条规则进行紧急程度设置、添加多维度组合白名单，方便用户研判、处理风险事件。用户可根据网络场景对检测的广度和深度对IDS规则进行灵活管理。</li>
</ul>
<h4 id="三、奇安信入侵检测系统"><a href="#三、奇安信入侵检测系统" class="headerlink" title="三、奇安信入侵检测系统"></a>三、奇安信入侵检测系统</h4><h5 id="1、介绍-2"><a href="#1、介绍-2" class="headerlink" title="1、介绍"></a>1、介绍</h5><ul>
<li>入侵检测系统是面向政府、金融、教育、企业等用户推出的，能够及时发现网络攻击企图、攻击行为和攻击结果的威胁检测产品，可通过网络数据监听及多样的告警机制帮助用户及时发现安全威胁时间的发生并采取相应措施。该产品采用先进的协议分析和入侵检测引擎，通过硬件架构优化，能够快速处理网络数据，精准检出网络攻击行为。</li>
</ul>
<h5 id="2、产品功能"><a href="#2、产品功能" class="headerlink" title="2、产品功能"></a>2、产品功能</h5><ul>
<li>威胁事件检测告警<ul>
<li>系统内置超过4000条的攻击事件特征库，可对端口扫描、木马后门、蠕虫、拒绝服务、缓冲溢出、邮件服务器攻击、SQL注入、CG l访问攻击、 IIS服务器等网络攻击，及P2P 、 l M、网络游珑等异常违规行为进行实时检 测和告警。</li>
</ul>
</li>
<li>支持灵活的部署模式<ul>
<li>系统的每一个实体接口均可配置为不同的规则集，每一个规则集都可依据源、目的IP等条件进行对应的检测。同时，规则集支持定义有效的运行时间，方便网络管理人员依据业务系统的规范要求进行规划和部署。</li>
</ul>
</li>
<li>检测策略自定义<ul>
<li>系统提供详尽全面的自定义检测功能，可以通过检测策略参数的灵活设定，筛选重点关注的网络流量及攻 击行为进行深度检测。</li>
</ul>
</li>
</ul>
<h5 id="3、产品优势"><a href="#3、产品优势" class="headerlink" title="3、产品优势"></a>3、产品优势</h5><ul>
<li>高性能多核处理架构<ul>
<li>基于先进的多核硬件处理芯片、多接并行处理、一体化检测引擎等技术的适用，并通过高效的报文分流算法和混合有限状态机的模式匹配算法，确保了网络流量的处理性能及攻击签名的匹配效率，相较同类产品具有明显的性能优势。</li>
</ul>
</li>
<li>精准的威胁检出能力<ul>
<li>基于奇安信深厚的攻防能力储备，并得益于TCP&#x2F;IP数据重组、应用程序识别、应用层状态追踪、应用层协议分析及多项抗逃逸技术的运用，能够提供更高的威胁检出率，并有效避免漏报、误报发生。</li>
</ul>
</li>
<li>深度的数据可视分析<ul>
<li>采用深度数据分析技术，通过多样化的数据查询和关联分析，可以从大量的事件告警中快速准确的定位风险，帮助管理者摆脱“入工挖掘、单位分析”的困境，大幅降低针对威胁的平均检测时间(MTTD)</li>
</ul>
</li>
</ul>
<h5 id="4、用户价值-1"><a href="#4、用户价值-1" class="headerlink" title="4、用户价值"></a>4、用户价值</h5><ul>
<li>实时检测网络威胁<ul>
<li>系统内置全面的攻击事件特征库和多维度事件分析技术，实时检测各种网络入侵及违规行为，并可通过邮件、 Sys log等多种响应方式及时告誓，帮助用户实时、全面检测网络攻击。</li>
</ul>
</li>
<li>洞察安全事件全貌<ul>
<li>依靠系统提供的多维度事件分析技术及安全可视化交互设计，可帮助用户深入分析并全面掌握网络攻击的方式、经过及影响，便于及时调整安全策略或借助其他措施予以处置。</li>
</ul>
</li>
<li>满足合规监管要求<ul>
<li>产品通过了监管机构的测评认证，基于全面的威胁检测和事件告警功能，可充分满足等级保护、分级保护等相关政策、法规和监管要求，帮助用户加强合规建设、满足监管要求。</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/10/22/%E5%AE%89%E5%85%A8%E8%AE%BE%E5%A4%87%E5%9F%BA%E7%A1%80-%E6%8D%B7%E6%99%AEwaf%E5%BA%94%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="鹿祁">
      <meta itemprop="description" content="心有希冀，目有繁星，追光而遇，沐光而行">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="鹿鹿祁">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/22/%E5%AE%89%E5%85%A8%E8%AE%BE%E5%A4%87%E5%9F%BA%E7%A1%80-%E6%8D%B7%E6%99%AEwaf%E5%BA%94%E7%94%A8/" class="post-title-link" itemprop="url">安全设备基础-捷普waf应用</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-10-22 22:12:38 / 修改时间：22:15:44" itemprop="dateCreated datePublished" datetime="2023-10-22T22:12:38+08:00">2023-10-22</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="一、WAF介绍"><a href="#一、WAF介绍" class="headerlink" title="一、WAF介绍"></a>一、WAF介绍</h4><h5 id="1、Web应用防火墙"><a href="#1、Web应用防火墙" class="headerlink" title="1、Web应用防火墙"></a>1、Web应用防火墙</h5><ul>
<li>Web应用防火墙是通过执行一系列针对HTTP&#x2F;HTTPS的安全策略来专门为Web应用提供保护的一款产品</li>
</ul>
<h5 id="2、启明星辰WAF"><a href="#2、启明星辰WAF" class="headerlink" title="2、启明星辰WAF"></a>2、启明星辰WAF</h5><ul>
<li>产品介绍<ul>
<li>天清Web应用安全网关，是启明星辰公司自行研制开发的新一代 Web 安全防护与应用交付类应用安全产品，用于防御以 Web 应用程序漏洞为目标的攻击，并针对 Web 服务器进行 HTTP&#x2F;HTTPS 流量分析，及针对 Web 应用访问各方面进行优化，以提高 Web 或网络协议应用的可用性、性能和安全性，确保 Web 业务应用安全、快速、可靠地交付</li>
</ul>
</li>
<li>功能特点<ul>
<li>网站一键关停： 在重要敏感时期，可以通过一键关停功能让网站切入到维护模式，避免黑客的攻击。用户对网站访问时，有良好的页面提示：网站在维护中。该功能支持灵活的时间设置，在特定时间和特定周期内，此功能生效。<br>网站锁防护： 在重要敏感时期，网站为了保障安全，降低被攻击的可能性，通过网站锁功能，禁止一些可能存在威胁的提交操作，比如发表评论、上传文件等。</li>
<li>短信验证滥刷： 越来越多的网站提供了短信验证码功能，一些网站虽然对获取短信码的时间间隔做了限制，但攻击者通过绕过前端的时间限制，结合一些工具，能够实现短信轰炸，会影响网站在客户中的形象，同时也消耗了网站的短信费用。通过WAF业务合规模块，检测客户端是否有验证码滥刷的行为，对异常行为进行阻断。</li>
<li>恶意注册攻击防护： 某一个客户端正常情况不会频繁在一个网站上注册账户，WAF业务合规模块，结合了用户的注册业务，识别客户端的注册频率和注册成功率，判断为恶意注册时，进行阻断。</li>
<li>API防护： 现在Web应用程序越来越广泛的使用富客户端（浏览器、移动客户端、桌面客户端等）访问后台API接口。API主要是提供给程序访问，但攻击者发现API后通常不遵守规范，API接口也面临着各种注入、访问控制、拒绝服务等攻击。</li>
<li>蜜罐检测： 一些黑客在攻击服务器时，通常会先尝试探测服务器的敏感文件，正常用户一般不会访问这些文件。WAF通过蜜罐检测功能，设置诱惑性的敏感文件，当有攻击者来访问这些文件时，可以提前检测到潜在攻击者。</li>
</ul>
</li>
<li>用户价值<ul>
<li>客户购买Web应用防火墙可满足用户合规性的Web安全防护要求；<ul>
<li>客户Web应用及Web网站通过Web应用防火墙进行安全加固，可放在Web应用及Web网站被攻击及篡改。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="二、捷普WAF应用"><a href="#二、捷普WAF应用" class="headerlink" title="二、捷普WAF应用"></a>二、捷普WAF应用</h4><h5 id="1、介绍"><a href="#1、介绍" class="headerlink" title="1、介绍"></a>1、介绍</h5><ul>
<li>捷普 WEB 应用防火墙，建立在自主版权的专用实时多任务安全网络操作系统和专用硬件平台之上，通过精准的规则和站点自学习将多种 Web 安全防护检测技术结合成一整套完整的解决方案，并整合 DDoS、扫描防护、CC 攻击抵御机制。它采用先进的动态检测技术，集安全防护、安全访问控制、安全审计、网页保护、负载均衡、用户认证、双机热备、地址转换等多项功能于一体。捷普 WEB 应用防火墙支持透明模式部署，并支持 HA 双机热备部署。</li>
<li>在透明模式下，不需要改动已有的网络拓扑，捷普 WEB 应用防火墙能自动适应网络结构，并对出入站流量进行安全检测、过滤和防护。</li>
</ul>
<h5 id="2、实验场景"><a href="#2、实验场景" class="headerlink" title="2、实验场景"></a>2、实验场景</h5><ul>
<li><p>两台主机通过WAF路由模式进行连接，通过配置策略，进行WEB应用防护</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202204242153717.png" alt="image-20220424215317677"></p>
</li>
</ul>
<h5 id="3、部署模式"><a href="#3、部署模式" class="headerlink" title="3、部署模式"></a>3、部署模式</h5><ul>
<li><p>设备的部署模式由接口的模式来决定，主要有以下几种模式</p>
<ul>
<li>路由模式：相当于一台路由器，接口为三层接口，可以为接口配置对应IP地址</li>
<li>桥模式：相当于一台交换机，接口为二层接口，可以指定接口链路模式为access或trunk</li>
<li>聚合模式：与其他聚合接口组合成为一个逻辑端口</li>
<li>虚拟网线：与桥模式类似，区别在于，不会进行MAC地址寻址，直接实现接口物理转发</li>
<li>旁路模式：采用旁挂的方式部署在网络中，不会改变网络的架构</li>
</ul>
</li>
<li><p>路由模式部署，配置接口IP地址</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202204242017387.png" alt="image-20220424201734209"></p>
</li>
</ul>
<h5 id="4、防火墙配置"><a href="#4、防火墙配置" class="headerlink" title="4、防火墙配置"></a>4、防火墙配置</h5><ul>
<li><p>默认情况下防火墙没有任何策略，表示拒绝所有流量，需要添加策略进行允许</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202204242107193.png" alt="image-20220424210705100"></p>
</li>
</ul>
<h5 id="5、对象管理"><a href="#5、对象管理" class="headerlink" title="5、对象管理"></a>5、对象管理</h5><ul>
<li><p>针对于WEB站点进行防护需要添加对应的站点对象</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202204242157035.png" alt="image-20220424215628240"></p>
</li>
</ul>
<h5 id="6、安全防护"><a href="#6、安全防护" class="headerlink" title="6、安全防护"></a>6、安全防护</h5><ul>
<li><p>安全防护里面主要是WAF防护，主要针对HTTP和HTTPS流量进行防护</p>
</li>
<li><p>配置防护的WEB站点组，将前面添加的站点对象加入到防护组中</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202204242200231.png" alt="image-20220424220058149"></p>
</li>
<li><p>配置对应的防护规则，选择对应规则信息，当出现违规流量，动作是允许还是拒绝</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202204242202736.png" alt="image-20220424220233639"></p>
</li>
<li><p>对WEB站点组引用对应的防护策略，引用完成后需要下发配置</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202204242204567.png" alt="image-20220424220414470"></p>
</li>
</ul>
<h5 id="7、验证"><a href="#7、验证" class="headerlink" title="7、验证"></a>7、验证</h5><ul>
<li><p>客户机正常访问</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202204242226114.png" alt="image-20220424222604921"></p>
</li>
<li><p>客户机上实施SQL注入攻击</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202204242237008.png" alt="image-20220424223736952"></p>
</li>
<li><p>直接被拒绝访问，根据信息可以看出被WAF防火墙所拦截</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202204242238055.png" alt="image-20220424223816972"></p>
</li>
<li><p>WAF防火墙上查看信息</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202204242238280.png" alt="image-20220424223859010"></p>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/10/22/%E5%AE%89%E5%85%A8%E8%AE%BE%E5%A4%87%E5%9F%BA%E7%A1%80-ipsec-vpn%E5%BA%94%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="鹿祁">
      <meta itemprop="description" content="心有希冀，目有繁星，追光而遇，沐光而行">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="鹿鹿祁">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/22/%E5%AE%89%E5%85%A8%E8%AE%BE%E5%A4%87%E5%9F%BA%E7%A1%80-ipsec-vpn%E5%BA%94%E7%94%A8/" class="post-title-link" itemprop="url">安全设备基础-ipsec vpn应用</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-10-22 22:12:24 / 修改时间：22:15:01" itemprop="dateCreated datePublished" datetime="2023-10-22T22:12:24+08:00">2023-10-22</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="一、IPSec-协议簇"><a href="#一、IPSec-协议簇" class="headerlink" title="一、IPSec 协议簇"></a>一、IPSec 协议簇</h4><h5 id="1、IPSec-VPN简介"><a href="#1、IPSec-VPN简介" class="headerlink" title="1、IPSec VPN简介"></a>1、IPSec VPN简介</h5><ul>
<li>IPSec（Internet Protocol Security）：是一组基于网络层的，应用密码学的安全通信协议族。IPSec不是具体指哪个协议，而是一个开放的协议族。</li>
<li>IPSec协议的设计目标：是在IPV4和IPV6环境中为网络层流量提供灵活的安全服务。</li>
<li>IPSec VPN：是基于IPSec协议族构建的在IP层实现的安全虚拟专用网。通过在数据包中插入一个预定义头部的方式，来保障OSI上层协议数据的安全，主要用于保护TCP、UDP、ICMP和隧道的IP数据包。</li>
</ul>
<h5 id="2、IPSec提供的安全服务"><a href="#2、IPSec提供的安全服务" class="headerlink" title="2、IPSec提供的安全服务"></a>2、IPSec提供的安全服务</h5><ul>
<li>访问控制、有限的流量保密等其他安全服务</li>
<li>不可否认性（Non-repudiation）</li>
<li>机密性（Confidentiality）</li>
<li>完整性（Integrity）</li>
<li>重传攻击保护（Anti-replay）</li>
<li>数据源鉴别（Authentication）</li>
</ul>
<h5 id="3、IPSec协议族安全体系框架"><a href="#3、IPSec协议族安全体系框架" class="headerlink" title="3、IPSec协议族安全体系框架"></a>3、IPSec协议族安全体系框架</h5><p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202203281317415.png" alt="image-20220328131712342"></p>
<ul>
<li>IKE定义了安全参数如何协商,以及共享密钥如何建立,但它没有定义的是协商内容。这方面的定义是由”解释域(doi)”文档来进行的</li>
<li>IPSec VPN体系结构主要由AH、ESP和IKE协议套件组成。IPSec通过ESP来保障IP数据传输过程的机密性，使用AH&#x2F;ESP提供数据完整性、数据源验证和抗报文重放功能。ESP和AH定义了协议和载荷头的格式及所提供的服务，但却没有定义实现以上能力所需具体转码方式，转码方式包括对数据转换方式，如算法、密钥长度等。为简化IPSec的使用和管理，IPSec还可以通过IKE进行自动协商交换密钥、建立和维护安全联盟的服务。具体介绍如下：</li>
<li>AH协议：AH是报文头验证协议，主要提供的功能有数据源验证、数据完整性校验和防报文重放功能。然而，AH并不加密所保护的数据报。</li>
<li>ESP协议：ESP是封装安全载荷协议。它除提供AH协议的所有功能外（但其数据完整性校验不包括IP头），还可提供对IP报文的加密功能。</li>
<li>IKE协议：IKE协议用于自动协商AH和ESP所使用的密码算法。</li>
</ul>
<h5 id="4、IPSec-协议族"><a href="#4、IPSec-协议族" class="headerlink" title="4、IPSec 协议族"></a>4、IPSec 协议族</h5><p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202203281324344.png" alt="image-20220328132430302"></p>
<ul>
<li>IPSec协议定义了两种通信保护机制：封装安全载荷(ESP，Encapsulating Security Payload)和鉴别头(AH，Authentication Header)。其中ESP机制为通信提供机密性和完整性；AH机制为通信提供完整性保护。ESP机制和AH机制都能为通信提供抗重放(Anti-replay)攻击。</li>
<li>IPSec协议可以设置成在两种工作模式下运行：一种是隧道(tunnel)模式，另一种是传输(transport)模式。</li>
<li>IPSec协议使用IKE协议实现安全协议的自动安全参数协商。IKE协商的安全参数包括加密与鉴别算法、加密与鉴别密钥、通信的保护模式(传输或隧道模式)、密钥的生存期等。IKE将这些安全参数构成的集合称为安全关联(SA，security Association)，还负责这些安全参数的刷新。</li>
<li>两个数据库：安全策略数据库SPD，安全关联数据库SAD</li>
<li>DOI将所有的IPSec小组的文献捆绑在一起。它可以被认为是所有IPSec安全参数的主数据库。 IKE定义了安全参数如何协商,以及共享密钥如何建立,但它没有定义的是协商内容。这方面的定义是由”解释域(doi)”文档来进行的</li>
</ul>
<h4 id="二、IPSec-工作模式"><a href="#二、IPSec-工作模式" class="headerlink" title="二、IPSec 工作模式"></a>二、IPSec 工作模式</h4><h5 id="1、传输模式"><a href="#1、传输模式" class="headerlink" title="1、传输模式"></a>1、传输模式</h5><ul>
<li><p>主要应用场景：经常用于主机和主机之间端到端通信的数据保护。</p>
</li>
<li><p>封装方式：不改变原有的IP包头，在原数据包头后面插入IPSec包头，将原来的数据封装成被保护的数据。</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202203281328274.png" alt="image-20220328132829257"></p>
</li>
</ul>
<h5 id="2、隧道模式"><a href="#2、隧道模式" class="headerlink" title="2、隧道模式"></a>2、隧道模式</h5><ul>
<li><p>主要应用场景：经常用于私网与私网之间通过公网进行通信，建立安全VPN通道。</p>
</li>
<li><p>封装方式：增加新的IP（外网IP）头，其后是ipsec包头，之后再将原来的整个数据包封装。</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202203281329877.png" alt="image-20220328132956773"></p>
</li>
</ul>
<h4 id="三、IPSec-通信协议"><a href="#三、IPSec-通信协议" class="headerlink" title="三、IPSec 通信协议"></a>三、IPSec 通信协议</h4><h5 id="1、AH-协议"><a href="#1、AH-协议" class="headerlink" title="1、AH 协议"></a>1、AH 协议</h5><ul>
<li><p>AH（Authentication Header，认证报头）</p>
<ul>
<li>无连接数据完整性：通过哈希函数（如MD5、SHA1）产生的校验来保证</li>
<li>数据源认证：通过在计算验证码时加入一个共享密钥来实现</li>
<li>抗重放服务：AH报头中的序列号可以防止重放攻击</li>
</ul>
</li>
<li><p>AH不提供任何保密性服务：它不加密所保护的数据包</p>
</li>
<li><p>不论是传输模式还是隧道模式下，AH提供对数据包的保护时，它保护的是整个IP数据包（易变的字段除外，如IP头中的TTL和TOS字段）</p>
</li>
<li><p>AH在传输模式下封装</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202203281334649.png" alt="image-20220328133417603"></p>
</li>
<li><p>AH在隧道模式下封装</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202203281334942.png" alt="image-20220328133427895"></p>
</li>
</ul>
<h5 id="2、ESP-协议"><a href="#2、ESP-协议" class="headerlink" title="2、ESP 协议"></a>2、ESP 协议</h5><ul>
<li><p>ESP(Encapsulating Security Payload，封装安全有效载荷)</p>
<ul>
<li>无连接数据完整性</li>
<li>数据源认证</li>
<li>抗重放服务</li>
<li>数据保密</li>
<li>有限的数据流保护</li>
</ul>
</li>
<li><p>保密服务通过使用密码算法加密 IP 数据包的相关部分来实现。</p>
</li>
<li><p>数据流保密由隧道模式下的保密服务提供。</p>
</li>
<li><p>ESP通常使用DES、3DES、AES等加密算法实现数据加密，使用MD5或SHA1来实现数据完整性认证。</p>
</li>
<li><p>ESP在传输模式下封装</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202203281335169.png" alt="image-20220328133503139"></p>
</li>
<li><p>ESP在隧道模式下封装</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202203281335085.png" alt="image-20220328133533056"></p>
</li>
</ul>
<h5 id="3、AH-与-ESP-对比"><a href="#3、AH-与-ESP-对比" class="headerlink" title="3、AH 与 ESP 对比"></a>3、AH 与 ESP 对比</h5><table>
<thead>
<tr>
<th align="left"><strong>安全特性</strong></th>
<th align="left"><strong>AH</strong></th>
<th align="left"><strong>ESP</strong></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><strong>协议号</strong></td>
<td align="left">51</td>
<td align="left">50</td>
</tr>
<tr>
<td align="left"><strong>数据完整性校验</strong></td>
<td align="left">支持</td>
<td align="left">支持（不验证IP头）</td>
</tr>
<tr>
<td align="left"><strong>数据源验证</strong></td>
<td align="left">支持</td>
<td align="left">支持</td>
</tr>
<tr>
<td align="left"><strong>数据加解密</strong></td>
<td align="left">不支持</td>
<td align="left">支持</td>
</tr>
<tr>
<td align="left"><strong>抗重放服务</strong></td>
<td align="left">支持</td>
<td align="left">支持</td>
</tr>
<tr>
<td align="left"><strong>NAT-T（NAT穿越）</strong></td>
<td align="left">不支持</td>
<td align="left">支持</td>
</tr>
</tbody></table>
<h4 id="四、IPSec-建立"><a href="#四、IPSec-建立" class="headerlink" title="四、IPSec 建立"></a>四、IPSec 建立</h4><h5 id="1、IKE-协商"><a href="#1、IKE-协商" class="headerlink" title="1、IKE 协商"></a>1、IKE 协商</h5><ul>
<li>安全联盟SA<ul>
<li>用IPSec保护一个IP包之前，必须先建立安全联盟（SA）</li>
<li>IPSec的安全联盟可以通过手工配置的方式建立。但是当网络中节点较多时，手工配置将非常困难，而且难以保证安全性。这时就可以使用IKE（Internet Key Exchange）自动进行安全联盟建立与密钥交换的过程。Internet密钥交换（IKE）就用于动态建立SA，代表IPSec对SA进行协商</li>
</ul>
</li>
<li>IKE经过两个阶段为IPSec进行密钥协商并建立安全联盟<ul>
<li>第一阶段交换：通信各方彼此间建立了一个已通过身份验证和安全保护的通道，此阶段的交换建立了一个ISAKMP安全联盟，即ISAKMP SA（也可称为IKE SA）。第一阶段交换有两种协商模式：主模式和野蛮模式</li>
<li>第二阶段交换：用已经建立的安全联盟（IKE SA）为IPSec协商安全服务，即为IPSec协商具体的安全联盟，建立IPSec SA，产生真正可以用来加密数据流的密钥，IPSec SA用于最终的IP数据安全传送</li>
</ul>
</li>
</ul>
<h5 id="2、数据传输"><a href="#2、数据传输" class="headerlink" title="2、数据传输"></a>2、数据传输</h5><ul>
<li>数据传输阶段是通过AH或者ESP通信协议进行数据的传输。</li>
<li>数据传输建立在网络层</li>
</ul>
<h4 id="五、在思科设备上配置IPSec"><a href="#五、在思科设备上配置IPSec" class="headerlink" title="五、在思科设备上配置IPSec"></a>五、在思科设备上配置IPSec</h4><h5 id="1、实验环境"><a href="#1、实验环境" class="headerlink" title="1、实验环境"></a>1、实验环境</h5><p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202203281342488.png" alt="image-20220328134214415"></p>
<h5 id="2、实验需求"><a href="#2、实验需求" class="headerlink" title="2、实验需求"></a>2、实验需求</h5><ul>
<li>在路由器1和路由器2上建立IPSec VPN</li>
<li>实现PC0可以和PC1互相访问</li>
</ul>
<h5 id="3、实验步骤"><a href="#3、实验步骤" class="headerlink" title="3、实验步骤"></a>3、实验步骤</h5><ul>
<li><p>路由器1配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crypto isakmp policy 1encryption 3deshash md5authentication pre-sharegroup 2lifetime 86400exitaccess-list 100 permit 192.168.10.0 0.0.0.255 192.168.20.0 0.0.0.255crypto isakmp key 123456 address 20.20.20.2crypto ipsec transform-set r1-set esp-3des esp-md5-hmaccrypto map r1-map 1 ipsec-isakmpset peer 20.20.20.2set transform-set r1-setmatch address 100exitint f0/1crypto map r1-map</span><br></pre></td></tr></table></figure>
</li>
<li><p>路由器2配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crypto isakmp policy 1encryption 3deshash md5authentication pre-sharegroup 2lifetime 86400exitcrypto isakmp key 123456 address 10.10.10.1access-list 100 permit 192.168.20.0 0.0.0.255 192.168.10.0 0.0.0.255crypto ipsec transform-set r2-set esp-3des esp-md5-hmaccrypto map r2-map 1 ipsec-isakmpset peer 10.10.10.1set transform-set r2-setmatch address 100exitint f0/1crypto map r2-map</span><br></pre></td></tr></table></figure></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/10/22/%E5%AE%89%E5%85%A8%E8%AE%BE%E5%A4%87%E5%9F%BA%E7%A1%80-cisco%E9%98%B2%E7%81%AB%E5%A2%99%E5%BA%94%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="鹿祁">
      <meta itemprop="description" content="心有希冀，目有繁星，追光而遇，沐光而行">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="鹿鹿祁">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/22/%E5%AE%89%E5%85%A8%E8%AE%BE%E5%A4%87%E5%9F%BA%E7%A1%80-cisco%E9%98%B2%E7%81%AB%E5%A2%99%E5%BA%94%E7%94%A8/" class="post-title-link" itemprop="url">安全设备基础-cisco防火墙应用</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-10-22 22:12:04 / 修改时间：22:14:21" itemprop="dateCreated datePublished" datetime="2023-10-22T22:12:04+08:00">2023-10-22</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="一、思科ASA防火墙"><a href="#一、思科ASA防火墙" class="headerlink" title="一、思科ASA防火墙"></a>一、思科ASA防火墙</h4><h5 id="1、简介"><a href="#1、简介" class="headerlink" title="1、简介"></a>1、简介</h5><ol>
<li>防火墙技术是通过有机结合各类用于安全管理与筛选的软件和硬件设备，帮助计算机网络于其内、外网之间构建一道相对隔绝的保护屏障，以保护用户资料与信息安全性的一种技术</li>
</ol>
<h5 id="2、ASA安全设备"><a href="#2、ASA安全设备" class="headerlink" title="2、ASA安全设备"></a>2、ASA安全设备</h5><ol>
<li>ASA5500系列<ul>
<li>常见型号：5505、5510、5520、5540、5550、5580</li>
</ul>
</li>
</ol>
<h5 id="3、ASA是状态防火墙"><a href="#3、ASA是状态防火墙" class="headerlink" title="3、ASA是状态防火墙"></a>3、ASA是状态防火墙</h5><ol>
<li><p>状态化防火墙维护一个关于用户信息的连接表，称为Conn表</p>
<ul>
<li>Conn表中的关键信息<ul>
<li>源IP地址</li>
<li>目的IP地址</li>
<li>IP协议（例如TCP或UDP）</li>
<li>IP协议信息（例如TCP&#x2F;UDP端口号，TCP序列号，TCP控制位）</li>
</ul>
</li>
<li>默认情况下，ASA对TCP和UDP协议提供状态化连接，但ICMP协议是非状态化的（如果内网访问外网采用ICMP协议出去，回来也是回不来的）</li>
</ul>
</li>
<li><p>状态化防火墙的处理过程</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112090540496.png" alt="image-20210726130718298"></p>
</li>
<li><p>ASA安全算法</p>
<ul>
<li>访问控制列表<ul>
<li>基于特定的网络、主机和服务（TCP&#x2F;UDP端口号）控制网络访问</li>
</ul>
</li>
<li>连接表<ul>
<li>维护每个连接的状态信息</li>
<li>安全算法使用此信息在已建立的连接中有效转发流量</li>
</ul>
</li>
<li>检测引擎<ul>
<li>执行状态检测和应用层检测</li>
<li>检测规则集是预先定义的，验证应用是否遵从每个RFC和其他标准</li>
</ul>
</li>
</ul>
</li>
<li><p>数据报文穿越ASA的过程</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112090540451.png" alt="image-20210726131131592"></p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112090540518.png" alt="image-20210726132143774"></p>
</li>
</ol>
<h4 id="二、ASA的接口"><a href="#二、ASA的接口" class="headerlink" title="二、ASA的接口"></a>二、ASA的接口</h4><h5 id="1、物理接口"><a href="#1、物理接口" class="headerlink" title="1、物理接口"></a>1、物理接口</h5><h5 id="2、逻辑接口"><a href="#2、逻辑接口" class="headerlink" title="2、逻辑接口"></a>2、逻辑接口</h5><ul>
<li><p>用来描述安全区域，例如inside、outside、DMZ</p>
</li>
<li><p>接口的安全级别</p>
<ul>
<li>inside（内网区域）：默认安全级别为100</li>
<li>outside（外网区域）：默认安全级别为0</li>
<li>DMZ（非军事化区域、隔离区、服务器区域）：默认安全级别为50</li>
</ul>
</li>
<li><p>不同安全级别的接口之间访问时，遵从的默认规则</p>
<ul>
<li><p>允许出站（outbound）连接：inside访问outside或DMZ访问outside，高安全级别访问低安全级别</p>
</li>
<li><p>禁止入站（inbound）连接：outside访问inside或outside访问DMZ，低安全级别不能访问高安全级别</p>
</li>
<li><p>禁止相同安全级别的接口之间通信：当安全级别一致时，禁止通信</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112090540592.png" alt="image-20210726153409617"></p>
</li>
</ul>
</li>
</ul>
<h5 id="3、接口配置"><a href="#3、接口配置" class="headerlink" title="3、接口配置"></a>3、接口配置</h5><ul>
<li><p>配置接口名称</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#配置为内网区域（ASA5505设备不支持，只能配置再VLAN接口上）asa(config-if)#nameif inside</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置接口的安全级别</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#配置内网接口安全级别为100asa(config-if)#security-level 100#内网接口安全级别默认为100，范围0~100</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看conn表（状态化连接表）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">asa#show conn detail</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="三、ASA应用ACL"><a href="#三、ASA应用ACL" class="headerlink" title="三、ASA应用ACL"></a>三、ASA应用ACL</h4><h5 id="1、作用"><a href="#1、作用" class="headerlink" title="1、作用"></a>1、作用</h5><ul>
<li>允许入站连接</li>
<li>控制出站连接的流量</li>
</ul>
<h5 id="2、配置"><a href="#2、配置" class="headerlink" title="2、配置"></a>2、配置</h5><ul>
<li><p>标准ACL</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#允许1.0网段主机流量通过，这里使用的是正常的掩码asa(config)#access-list out_to_in permit 192.168.1.0 255.255.255.0#out_to_in  ACL表名</span><br></pre></td></tr></table></figure>
</li>
<li><p>扩展ACL</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#允许主机1.2访问3.1的http服务asa(config)#access-list out_to_DMZ extended permit tcp host 192.168.3.1 host 192.168.1.2 eq 80</span><br></pre></td></tr></table></figure>
</li>
<li><p>将ACL应用到接口</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#将表名为out_to_DMZ的ACL应用在outside接口，流量为入口asa(config)#access-group out_to_DMZ in interface outside</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="四、ASA其他配置"><a href="#四、ASA其他配置" class="headerlink" title="四、ASA其他配置"></a>四、ASA其他配置</h4><h5 id="1、配置路由"><a href="#1、配置路由" class="headerlink" title="1、配置路由"></a>1、配置路由</h5><ul>
<li><p>ASA支持静态路由和动态路由</p>
</li>
<li><p>配置静态路由</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#从outside出去，目标为162.16.4.0网络，下一跳地址为172.16.2.2的路由asa(config)# route outside 172.16.4.0 255.255.255.0 172.16.2.2#outside 指定路由出接口#172.16.4.0 255.255.255.0 目标网络#172.16.2.2 下一跳地址</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="2、配置信息相关"><a href="#2、配置信息相关" class="headerlink" title="2、配置信息相关"></a>2、配置信息相关</h5><ul>
<li><p>保存配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">asa# write memory或asa# copy running-config startup-config</span><br></pre></td></tr></table></figure>
</li>
<li><p>清楚当前配置文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">asa(config)# clear config all</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除保存配置文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">asa# write erase</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="3、远程管理"><a href="#3、远程管理" class="headerlink" title="3、远程管理"></a>3、远程管理</h5><ul>
<li><p>telnet（ASA不允许从outside接口通过telnet方式管理）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">asa(config)# telnet 192.168.0.0 255.255.255.0 inside    //允许192.168.0.0网段的所有主机从inside接口telnetasa(config)# telnet 0 0 inside        //允许所有网段的主机从inside接口telnet</span><br></pre></td></tr></table></figure>
</li>
<li><p>ssh</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">asa(config)# host asa802asa802(config)# domain-name asadomain.comasa802(config)# crypto key generate rsa modulus 1024    //生成RSA密钥对，密钥的长度默认是1024位asa802(config)# ssh 0 0 outside asa802(config)# ssh timeout 30asa802(config)# ssh version 2</span><br></pre></td></tr></table></figure>
</li>
<li><p>asdm</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">asa802(config)# http server enable        //开启HTTP服务asa802(config)# http 0 0 outside        //允许从outside接口通过https管理asa802(config)# asdm image disk0:/asdm-602.bin        //提供客户端下载ASDM软件asa802(config)# username benet password cisco privilege 15    //配置管理员权限，15为最高</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="五、ASA应用NAT"><a href="#五、ASA应用NAT" class="headerlink" title="五、ASA应用NAT"></a>五、ASA应用NAT</h4><h5 id="1、4种NAT转换类型"><a href="#1、4种NAT转换类型" class="headerlink" title="1、4种NAT转换类型"></a>1、4种NAT转换类型</h5><ul>
<li><p>静态NAT（将inside区域的内网地址192.168.1.1转换为外网地址60.35.12.65）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ASA(config)#static (inside,outside) 60.35.12.65 192.168.1.1</span><br></pre></td></tr></table></figure>
</li>
<li><p>静态PAT（将DMZ区域的2.1服务器上的http服务映射到外网地址60.35.12.65的80端口）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ASA(config)#static (DMZ,outside) tcp 60.35.12.65 80 192.168.2.1 80#还需要配置outside区域允许访问DMZ区域的ACLASA(config)#access-list out_to_DMZ extended permit tcp any host 60.35.12.65 eq 80ASA(config)#access-group out_to_DMZ in int outside</span><br></pre></td></tr></table></figure>
</li>
<li><p>动态NAT</p>
<ul>
<li><p>定义内部地址池</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ASA(config)#nat (inside) 1 192.168.10.0 255.255.255.0</span><br></pre></td></tr></table></figure>
</li>
<li><p>定义全局地址池</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ASA(config)#global (outside) 1 172.16.1.50-172.16.1.100</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用inside区域主机访问outside区域主机，查看转换表如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ciscoasa# show xlate detail0 in use, 0 most usedciscoasa# show xlate detail1 in use, 1 most usedFlags: D - DNS, d - dump, I - identity, i - dynamic, n - no random,       r - portmap, s - staticNAT from inside:192.168.10.10 to outside:172.16.1.50 flags i</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>动态PAT</p>
<ul>
<li><p>定义内部地址池</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ASA(config)#nat (inside) 1 192.168.10.0 255.255.255.0</span><br></pre></td></tr></table></figure>
</li>
<li><p>定义全局地址池（全局地址池两种情况，外网单个IP或直接使用外网接口IP）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ASA(config)#global (outside) 1 &#123;interface | 172.16.1.100&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用inside区域主机访问outside区域主机，查看转换表如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ciscoasa# show xlate detail2 in use, 2 most usedFlags: D - DNS, d - dump, I - identity, i - dynamic, n - no random,       r - portmap, s - staticTCP PAT from inside:192.168.10.10/29831 to outside:172.16.1.1/1025 flags riTCP PAT from inside:192.168.10.10/21338 to outside:172.16.1.1/1024 flags ri</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h5 id="2、NAT控制与NAT豁免"><a href="#2、NAT控制与NAT豁免" class="headerlink" title="2、NAT控制与NAT豁免"></a>2、NAT控制与NAT豁免</h5><ul>
<li><p>NAT控制</p>
<ul>
<li>ASA从7.0版本开始提供了一个NAT控制的开关，即nat-control命令</li>
<li>默认是禁用NAT控制（no nat-control）</li>
<li>在禁用NAT控制和启用NAT控制时的特性是不同的<ul>
<li>在禁用NAT控制时，NAT规则并不是必须的（只要ACL允许并且有路由就可以访问）</li>
<li>在启用NAT控制时，NAT规则是必须的（在配置了ACL允许后还需要有NAT规则）</li>
</ul>
</li>
</ul>
</li>
<li><p>NAT豁免</p>
<ul>
<li><p>应用背景</p>
<ul>
<li>当启用NAT控制时，每个发起的连接都需要一个相应的NAT规则</li>
<li>在某些应用场合（例如配置VPN）需要绕过NAT规则</li>
</ul>
</li>
<li><p>NAT豁免允许双向通信</p>
</li>
<li><p>配置命令</p>
<ul>
<li><p>定义一个ACL，用于指定需要绕过NAT规则的流量</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">asa(config)# nat (inside) 0  access-list  nonat#inside 内网接口名称#nonat  ACL名字</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
<li><p>NAT控制及豁免配置案例</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112090540557.png" alt="image-20210727084530146"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">启用NAT控制并为网段10.1.1.0/24配置动态NAT asa(config)# nat-controlasa(config)# nat (inside) 1 10.1.1.0 255.255.255.0asa(config)# global (outside) 1 interface</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">为网段10.2.2.0/24配置NAT豁免asa(config)# access-list nonat extended permit ip 10.2.2.0 255.255.255.0 172.16.1.0  255.255.255.0asa(config)# nat (inside) 0 access-list nonat</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="六、ASA透明模式"><a href="#六、ASA透明模式" class="headerlink" title="六、ASA透明模式"></a>六、ASA透明模式</h4><h5 id="1、透明模式简介"><a href="#1、透明模式简介" class="headerlink" title="1、透明模式简介"></a>1、透明模式简介</h5><ul>
<li>充当一个2层设备 ，基于目的MAC地址转发数据帧</li>
<li>与交换机处理数据帧的不同<ul>
<li>对于目的MAC地址未知的单播数据帧，ASA不会泛洪而是直接丢弃</li>
<li>ASA不参与STP</li>
</ul>
</li>
<li>工作过程<ul>
<li>透明模式下默认允许的3层流量<ul>
<li>允许IPv4流量自动从高级别接口到低级别接口</li>
<li>允许ARP流量双向穿越</li>
</ul>
</li>
<li>只支持2个区域</li>
<li>不需要在接口上配置IP地址</li>
</ul>
</li>
</ul>
<h5 id="2、透明模式配置"><a href="#2、透明模式配置" class="headerlink" title="2、透明模式配置"></a>2、透明模式配置</h5><ul>
<li><p>切换到透明模式（PT里面无法使用命令，使用GNS3）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">asa(config)# firewall transparent</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看当天工作模式</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ciscoasa(config)# show firewallFirewall mode: Transparent</span><br></pre></td></tr></table></figure>
</li>
<li><p>配置管理IP</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ciscoasa(config)# ip address 192.168.1.100 255.255.255.0    //管理IP地址必须处于同一个连接子网</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看MAC表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ciscoasa# show mac-address-table</span><br></pre></td></tr></table></figure>
</li>
<li><p>禁止特定接口的MAC地址学习</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ciscoasa(config)# mac-learn inside disable</span><br></pre></td></tr></table></figure>
</li>
<li><p>透明模式案例</p>
<ul>
<li><p>公司为了方便部署，将ASA配置为透明模式，管理IP地址配置为192.168.1.253&#x2F;24</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112090540465.png" alt="image-20210727174152732"></p>
</li>
<li><p>为了增强托管主机的安全，增加了一台ASA并将其配置为透明模式，管理IP地址配置为209.165.201.1&#x2F;28</p>
</li>
</ul>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112090540321.png" alt="image-20210727173818700"></p>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/10/22/windiws%E6%93%8D%E4%BD%9C-%E8%BF%9B%E9%98%B6%E7%89%88%EF%BC%88powershell%E5%87%BD%E6%95%B0%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="鹿祁">
      <meta itemprop="description" content="心有希冀，目有繁星，追光而遇，沐光而行">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="鹿鹿祁">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/22/windiws%E6%93%8D%E4%BD%9C-%E8%BF%9B%E9%98%B6%E7%89%88%EF%BC%88powershell%E5%87%BD%E6%95%B0%EF%BC%89/" class="post-title-link" itemprop="url">windiws操作-进阶版（powershell函数）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-10-22 22:09:00 / 修改时间：22:25:41" itemprop="dateCreated datePublished" datetime="2023-10-22T22:09:00+08:00">2023-10-22</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="五、函数"><a href="#五、函数" class="headerlink" title="五、函数"></a>五、函数</h4><h5 id="1、基本知识"><a href="#1、基本知识" class="headerlink" title="1、基本知识"></a>1、基本知识</h5><ul>
<li><p>函数是具有分配的名称的 PowerShell 语句的列表。 运行函数时，键入函数名称。 列表中的语句运行就像在命令提示符下键入了这些语句一样。</p>
</li>
<li><p>简单函数</p>
<ul>
<li>直接在列表中的语句运行就像在命令提示符下键入了这些语句一样</li>
</ul>
</li>
<li><p>复杂函数</p>
<ul>
<li>函数可以具有参数，参数可以是命名参数、位置参数、开关参数或动态参数。 可以从命令行或管道中读取函数参数</li>
<li>函数可以返回可以显示、分配给变量或传递给其他函数或 cmdlet 的值，还可使用 关键字指定返回 <code>return</code> 值 ，<code>return</code> 关键字将退出该行中的 函数</li>
</ul>
</li>
<li><p>语法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function [&lt;scope:&gt;]&lt;name&gt; [([type]$parameter1[,[type]$parameter2])]&#123;  begin &#123;&lt;statement list&gt;&#125;  process &#123;&lt;statement list&gt;&#125;  end &#123;&lt;statement list&gt;&#125;&#125;或者function [&lt;scope:&gt;]&lt;name&gt;&#123;  param([type]$parameter1 [,[type]$parameter2])  dynamicparam &#123;&lt;statement list&gt;&#125;  begin &#123;&lt;statement list&gt;&#125;  process &#123;&lt;statement list&gt;&#125;  end &#123;&lt;statement list&gt;&#125;&#125;#关键字    function#作用域    scope，使用global:函数名，表示定义的全局函数#函数名    name#参数        param#动态参数    dynamicparam#表达式        statement list</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="2、简单函数"><a href="#2、简单函数" class="headerlink" title="2、简单函数"></a>2、简单函数</h5><ul>
<li><p>语法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function &lt;function-name&gt; &#123;statements&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>举例：以管理员方式运行powershellise工具</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function Start-PSAdmin &#123;    Start-Process PowerShell_ise -Verb RunAs&#125;Start-PSAdmin# RunAs    使用管理身份运行</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="3、带参函数"><a href="#3、带参函数" class="headerlink" title="3、带参函数"></a>3、带参函数</h5><ul>
<li><p>命名参数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function Get-SmallFiles &#123;  Param($Size)  Get-ChildItem -Path D:\桌面文件 | Where-Object &#123;    $_.Length -lt $Size -and !$_.PSIsContainer  &#125;&#125;Get-SmallFiles -Size 50000#Length单位默认为字节</span><br></pre></td></tr></table></figure>
</li>
<li><p>位置参数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function Get-Extension &#123;  $name = $args[0] + &quot;.txt&quot;  $name&#125;Get-Extension my</span><br></pre></td></tr></table></figure>
</li>
<li><p>开关参数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function Switch-Item &#123;  param ([switch]$on)  if ($on) &#123; &quot;Switch on&quot; &#125;  else &#123; &quot;Switch off&quot; &#125;&#125;Switch-Item -on:$false</span><br></pre></td></tr></table></figure>
</li>
<li><p>函数返回值<code>return</code>在满足条件时退出特定点的函数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#判断数组中元素，偶数就相乘，奇数就打印function MultiplyEven&#123;    param($number)    if ($number % 2) &#123; return &quot;$number 是奇数&quot; &#125;    $number * 2&#125;1..10 | ForEach-Object &#123;MultiplyEven -Number $_&#125;</span><br></pre></td></tr></table></figure></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/10/22/windiws%E6%93%8D%E4%BD%9C-%E8%BF%9B%E9%98%B6%E7%89%88%EF%BC%88powershell%E7%BB%93%E6%9E%84%E8%AF%AD%E5%8F%A5%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="鹿祁">
      <meta itemprop="description" content="心有希冀，目有繁星，追光而遇，沐光而行">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="鹿鹿祁">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/22/windiws%E6%93%8D%E4%BD%9C-%E8%BF%9B%E9%98%B6%E7%89%88%EF%BC%88powershell%E7%BB%93%E6%9E%84%E8%AF%AD%E5%8F%A5%EF%BC%89/" class="post-title-link" itemprop="url">windiws操作-进阶版（powershell结构语句）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-10-22 22:08:53 / 修改时间：22:25:09" itemprop="dateCreated datePublished" datetime="2023-10-22T22:08:53+08:00">2023-10-22</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="一、结构语句"><a href="#一、结构语句" class="headerlink" title="一、结构语句"></a>一、结构语句</h4><h5 id="1、控制结构"><a href="#1、控制结构" class="headerlink" title="1、控制结构"></a>1、控制结构</h5><ul>
<li><p>运算符</p>
<ul>
<li><p>算数运算符：算术运算符计算数字值，加法运算符 (<code>+</code>) 和乘法运算符 (<code>*</code>) 也操作字符串、数组和哈希表，加法运算符用于连接输入，乘法运算符返回输入的多个副本</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">+    #添加整数;各个字符串、数组和哈希表-    #两个值相减*    #数字或复制字符串相乘和数组指定的数字/    #两个值相除%    #取模-返回剩余的</span><br></pre></td></tr></table></figure>
</li>
<li><p>赋值运算符：赋值运算符将一个或多个值分配给变量，可以将算术运算符与赋值结合使用，将算术运算的结果分配给变量</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">=        #将变量的值设置为指定值+=        #将变量的值增加指定的值，或将指定值追加到现有值-=        #将变量的值降低指定的值*=        #将变量的值乘以指定的值，或将指定值追加到现有值/=        #将变量的值除以指定值%=        #将变量的值除以指定的值并然后，将余数 (取模) 赋给该变量++        #增加变量、可赋值属性的值，或数组元素1--        #减小变量、可赋值属性的值，或数组元素1</span><br></pre></td></tr></table></figure>
</li>
<li><p>比较运算符：比较运算符可以比较两个值，也可以根据输入值筛选集合的元素</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-eq        #equals等于-ne        #不等于-gt        #大于-ge        #大于或等于-lt        #小于-le        #小于或等于-like    #字符串匹配通配符模式-notlike        #字符串与通配符模式不匹配-match            #字符串匹配正则表达式模式-notmatch        #字符串与正则表达式模式不匹配-replace        #替换与正则表达式模式匹配的字符串-contains        #集合包含值-notcontains    #集合不包含值-in                #值在集合中-notin            #值不在集合中-is                #两个对象都是同一类型-isnot            #对象不是同一类型</span><br></pre></td></tr></table></figure>
</li>
<li><p>逻辑运算符：连接表达式和语句，允许使用单个表达式测试多个条件，使用逻辑运算符的语句将返回布尔值 (TRUE 或 FALSE) 值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-AND        #逻辑 AND，当两者同时为 TRUE 时语句为 TRUE-OR            #逻辑 OR，如果任一情况，为 TRUE语句为 TRUE-xor        #逻辑排他 OR，如果都为TRUE，则为fales，只有一个语句为 TRUE，则为 TRUE-NOT        #逻辑上不是。 对语句求反!            #与 -not 相同</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>控制台输入和输出指令</p>
<ul>
<li><p>控制台输入</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">read-host &quot;请输入文字&quot;请输入文字: 123123</span><br></pre></td></tr></table></figure>
</li>
<li><p>控制台输出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Write-Host    #控制台直接输出，不会将数据传入管道中，可以使用 -ForegroundColor 和 -BackgroundColor 来设置字体颜色及背景颜色$a=1+2 | Write-Host -BackgroundColor Blue -ForegroundColor Red3Get-Variable aName                           Value                                           ----                           -----                                           a  Write-Host &quot;hello&quot; | Where-Object&#123;$_.length -gt 10&#125;hello</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Write-Output    #可以将对象发送给管道$a=1+2 | Write-OutputGet-Variable aName                           Value                                           ----                           -----                                           a                              3  Write-Output &quot;hello&quot; | Where-Object&#123;$_.length -gt 10&#125;        #无返回结果</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>if&#x2F;else&#x2F;if：用于根据一个或多个条件测试的结果运行语句列表的语言命令</p>
<ul>
<li><p>语法结构</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">if (&lt;test1&gt;)    &#123;&lt;statement list 1&gt;&#125;[elseif (&lt;test2&gt;)    &#123;&lt;statement list 2&gt;&#125;][else    &#123;&lt;statement list 3&gt;&#125;]</span><br></pre></td></tr></table></figure>
</li>
<li><p>案例：查询计算机中的服务，并根据状态进行排序，使用升序方式，并判断如果服务为 running 显示为绿色，如果服务状态为 stopped显示为红色，并打印服务名称和状态</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Get-Service |Sort-Object status -Descending |foreach &#123;    if ($_.Status -eq &quot;stopped&quot;)&#123;        Write-Host $_.Name $_.Status -ForegroundColor Red    &#125;    elseif($_.Status -eq &quot;running&quot;)&#123;        Write-Host $_.Name $_.Status -ForegroundColor Green    &#125;    else&#123;        Write-Host $_.Name $_.Status -ForegroundColor Yellow        &#125;&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>案例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[int]$a=Read-Host &quot;请输入小明的成绩&quot;if($a -gt 90)&#123;    Write-Host (&quot;优秀&quot;)&#125;elseif($a -gt 80)&#123;    Write-Host (&quot;良好&quot;)&#125;elseif($a -gt 60)&#123;    Write-Host (&quot;及格&quot;)&#125;else&#123;    Write-Host (&quot;不及格&quot;)&#125;请输入小明的成绩: 95优秀</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>switch：针对检查多个条件，使用<code>switch</code>会更加简单<code>switch</code>语句列出每个条件和一个可选操作</p>
<ul>
<li><p>语法结构</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">switch [-regex | -wildcard | -exact] [-casesensitive] (&lt;test-expression&gt;)&#123;    &quot;string&quot; | number | variable | &#123; &lt;value-scriptblock&gt; &#125; &#123; &lt;action-scriptblock&gt; &#125;    default &#123; &lt;action-scriptblock&gt; &#125;                                 # 可选的&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>案例：遍历数组中的内容</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$var=1,3,5,7Switch($var)&#123;    default &#123;$_&#125;&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>案例：Switch条件判断</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$a=Read-Host &quot;请输入成绩&quot;switch ($a)&#123;    &#123;$_ -ge 90&#125;&#123;&quot;大于90，优秀&quot;;break&#125;    &#123;$_ -ge 80&#125;&#123;&quot;大于80，良好&quot;;break&#125;    &#123;$_ -ge 60&#125;&#123;&quot;大于60，及格&quot;;break&#125;    &#123;$_ -lt 60&#125;&#123;&quot;小于于60，不及格&quot;&#125;&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h5 id="2、循环结构"><a href="#2、循环结构" class="headerlink" title="2、循环结构"></a>2、循环结构</h5><ul>
<li><p>for：用于根据条件测试运行语句的语言命令，创建在指定条件的计算结果为 <code>$true</code> 时在命令块中运行命令的循环</p>
<ul>
<li><p>语法结构</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for (&lt;Init&gt;; &lt;Condition&gt;; &lt;Repeat&gt;)        &#123;    &lt;Statement list&gt;&#125;#Init         表示在循环开始之前运行的一个或多个命令。 通常使用语句的 Init 部分来创建和初始化具有起始值的变量#Condition    条件，如果语句返回为 $true，则允许命令块，循环重复，直到该条件变为 $false#Repeat        重复，表示一个或多个以逗号分隔的命令，这些命令在每次循环重复时执行。 通常，这用于修改在语句的 条件 部分内测试的变量#Statement list        表示在每次输入或重复循环时运行的一个或多个命令集</span><br></pre></td></tr></table></figure>
</li>
<li><p>案例：求1到100的和</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$sum=0for($a=1;$a -le 100;$a++)&#123;    $sum+=$a&#125;$sum</span><br></pre></td></tr></table></figure>
</li>
<li><p>案例：打印99乘法表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for($a=1;$a -le 9;$a++)&#123;   for($b=1;$b -le $a;$b++)&#123;   Write-Host $(&quot;&#123;0&#125;*&#123;1&#125;=&#123;2&#125;`t&quot; -f $b,$a,($a*$b)) -NoNewline        #-f 格式化输出 -NoNewline 不进行换行   &#125;   Write-Host&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>案例：查询本地TCP&#x2F;IP参数中的DHCP服务器</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$a = ipconfig /allSwitch -Wildcard ($a)&#123;    &quot;*DHCP 服务器*&quot; &#123; Write-Host $switch.current&#125;&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>foreach：用于 (循环访问) 项集合中的一系列值，要遍历的最简单且最典型的集合类型是数组</p>
<ul>
<li><p>语法结构</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">foreach ($&lt;item&gt; in $&lt;collection&gt;)&#123;    &lt;statement list&gt;    &lt;statement list&gt;    ···········&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>案例：循环遍历数组中的元素</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$letterArray = &quot;a&quot;,&quot;b&quot;,&quot;c&quot;,&quot;d&quot;foreach ($letter in $letterArray)&#123;  Write-Host $letter&#125;#结合if来进行判断，从而限制返回结果foreach ($file in Get-ChildItem)&#123;  if ($file.length -gt 100KB)  &#123;    Write-Host $file  &#125;&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>foreach-object：针对输入对象集合中的每个项执行操作，属于一个 cmdlet 命令</p>
<ul>
<li><p>使用脚本块来指定操作</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Get-Process | ForEach-Object &#123;$_.ProcessName&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>直接使用操作语句来执行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Get-Process | ForEach-Object ProcessName</span><br></pre></td></tr></table></figure>
</li>
<li><p>案例：统计$PSHOME目录下所有文件的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Get-ChildItem $PSHOME | ForEach-Object -Process &#123;    if(!$_.PSIsContainer)&#123;        $_.Name        Write-Host ([int]($_.Length / 1024))&quot;KB&quot;        &quot; &quot;    &#125;&#125;#PSIsContainer属性，表示是一个容器</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>while：用于创建一个循环，只要条件测试计算结果为 <code>true</code>，该循环在命令块中运行命令。 语句 <code>while</code> 比 <code>For</code>语句更易于构造，因为它的语法不太复杂，比<code>foreach</code>语句更灵活，在语句中指定条件测试来控制循环运行次数</p>
<ul>
<li><p>语法结构</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">while (&lt;condition&gt;)&#123;&lt;statement list&gt;&#125;#&lt;condition&gt;    计算语句部分#&lt;statement list&gt;    执行语句部分，只有计算语句部分条件满足才会执行</span><br></pre></td></tr></table></figure>
</li>
<li><p>案例：打印0-10的数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$va1=0while($va1 -le 10)&#123;    Write-Host $va1    $va1++&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>案例：计算1-100的和</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$va1=1$sum=0while($va1 -le 100)&#123;    $sum+=$va1    $va1++&#125;Write-Host $sum</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>do&#x2F;while：循环始终在计算条件之前至少运行一次，再进行条件判断，条件为<code>true</code>时，脚本块重复</p>
<ul>
<li><p>语法结构</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">do &#123;&lt;statement list&gt;&#125; while (&lt;condition&gt;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>案例：打印100以内7或7的倍数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$a=1do&#123;    if($a%7 -eq 0)&#123;        Write-Host $a    &#125;    $a++&#125;while($a -le 100)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>break：用于立即退出 foreach、for、do-while、switch、while语句，在循环中使用，表示立即退出<strong>当前</strong>循环</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$i=0$varB = 10,20,30,40foreach ($val in $varB) &#123;  if ($val -eq 30) &#123;    break  &#125;  $i++&#125;Write-Host &quot;30 所在位置的下标为 $i&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>continue：提供一种退出当前控制块但继续执行的方法，而不是完全退出，在循环中使用，表示退出<strong>当次</strong>循环</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">while ($ctr -lt 10)&#123;    $ctr += 1    if ($ctr -eq 5)    &#123;        continue    &#125;    Write-Host -Object $ctr&#125;</span><br></pre></td></tr></table></figure></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/10/22/windiws%E6%93%8D%E4%BD%9C-%E8%BF%9B%E9%98%B6%E7%89%88%EF%BC%88powershell%E6%95%B0%E7%BB%84%E4%B8%8E%E5%93%88%E5%B8%8C%E8%A1%A8%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="鹿祁">
      <meta itemprop="description" content="心有希冀，目有繁星，追光而遇，沐光而行">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="鹿鹿祁">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/22/windiws%E6%93%8D%E4%BD%9C-%E8%BF%9B%E9%98%B6%E7%89%88%EF%BC%88powershell%E6%95%B0%E7%BB%84%E4%B8%8E%E5%93%88%E5%B8%8C%E8%A1%A8%EF%BC%89/" class="post-title-link" itemprop="url">windiws操作-进阶版（powershell数组与哈希表）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-10-22 22:08:29 / 修改时间：22:24:47" itemprop="dateCreated datePublished" datetime="2023-10-22T22:08:29+08:00">2023-10-22</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="一、数组与哈希表"><a href="#一、数组与哈希表" class="headerlink" title="一、数组与哈希表"></a>一、数组与哈希表</h4><h5 id="1、数组"><a href="#1、数组" class="headerlink" title="1、数组"></a>1、数组</h5><ul>
<li><p>Powershell会把文本按每一行作为元素存为数组。如果一个命令的返回值不止一个结果时，Powershell也会自动把结果存储为数组。</p>
</li>
<li><p>数组是一种作为多个项集合的数据结构。 你可以循环访问数组或使用索引来访问单个项。 数组是作为一个连续的内存块创建的，其中每个值存储在相邻位置</p>
</li>
<li><p>创建数组</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$arr=@(1,2,3)$arr=&quot;张三&quot;,25,&quot;180cm&quot;    #存放不同类型的值    $arr=@()                #空数组$arr=,&quot;woniu&quot;            #单元素数组$arr=1..5                #连续数字[int[]] $arr=@()        #定义强类型数组$arr = Write-Output 1 2 3 4        #使用Write-Output创建数组</span><br></pre></td></tr></table></figure>
</li>
<li><p>访问数组</p>
<ul>
<li><p>数组的元素可以使用索引寻址，第一个元素的索引为0，第i个元素的索引为i-1，最后一个元素的索引为Count-1，但是Powershell为了使用方便，直接可以将 -1 作为最后的一个元素的索引。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$var=1..10$var[2]$var[-1]$var[0..3]</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$result=ls$result[1,3,5]</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>修改数组</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#修改数组中的值$var=1,2,3$var[2]=4</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#向数组中添加元素$var=1,2,3$var+=4</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#删除数组中的元素$var=1,2,3,4$var=$var[0..1]+$var[3]</span><br></pre></td></tr></table></figure>
</li>
<li><p>将一个字符串转换为数组</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$var=&quot;1234&quot;$var=$var.ToCharArray()</span><br></pre></td></tr></table></figure>
</li>
<li><p>数组和其他集合具有计数属性</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$arr=1..10$arr.count10#访问最后一项$arr[$arr.count-1]10</span><br></pre></td></tr></table></figure>
</li>
<li><p>获得最大索引号</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$arr.GetUpperBound(0)10</span><br></pre></td></tr></table></figure>
</li>
<li><p>将命令返回结果存为对象数组来进行引用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$arr=Get-Process$arr[0].Id                #下标为 0 的项的 ID 属性10928</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用 <code>where</code> 方法进行筛选</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$arr.Where(&#123;$_.name -eq &#x27;wps&#x27;&#125;)Handles  NPM(K)    PM(K)      WS(K)     CPU(s)     Id  SI ProcessName          -------  ------    -----      -----     ------     --  -- -----------              696      49    76400      87020       3.91  30168   2 wps</span><br></pre></td></tr></table></figure>
</li>
<li><p>数组中使用运算符</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-join        #将数组中的所有元素与你指定的字符或字符串联接在一起$arr=&#x27;192.168.10.1&#x27;,&#x27;192.168.10.2&#x27;$arr -join &quot;,&quot;192.168.10.1,192.168.10.2            #使用 ， 号将所有项串联-join $arr192.168.10.1192.168.10.2            #直接连接成了一个字符串</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-contains        #检查值数组，以查看其是否包含指定值$data = @(&#x27;red&#x27;,&#x27;green&#x27;,&#x27;blue&#x27;)$data -contains &#x27;green&#x27;True</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-in            #验证的单个值与几个值中的一个相匹配，该值位于运算符的左侧，而数组位于右侧$data = @(&#x27;red&#x27;,&#x27;green&#x27;,&#x27;blue&#x27;)&#x27;green&#x27; -in $dataTrue</span><br></pre></td></tr></table></figure>
</li>
<li><p>嵌套数组</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$a=@(@(1,2,3),@(3,3,5))$a[1][0]3</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="2、哈希表"><a href="#2、哈希表" class="headerlink" title="2、哈希表"></a>2、哈希表</h5><ul>
<li><p>哈希表是一种数据结构，与数组非常相似，只不过是使用键存储每个值（对象）。 它是一个基本的键&#x2F;值存储</p>
</li>
<li><p>哈希表存放的是成对的，在哈希表中不再仅仅限制使用数字寻址，可以使用任意类型的数据类型寻址。</p>
</li>
<li><p>创建哈希表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ageList = @&#123;&#125;            #空哈希表$stu=@&#123; Name = &quot;小明&quot;;Age=&quot;12&quot;;sex=&quot;男&quot; &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>插入新的值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$stu=@&#123;&#125;$stu.name=&quot;张三&quot;$stu.major=&quot;网络安全&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改哈希表值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$stu=@&#123;name=&quot;张三&quot;;major=&quot;网络安全&quot;;school=&quot;蜗牛学苑&quot;&#125;$stu.major=&quot;测试开发&quot;            #将&quot;major&quot;键重新赋值为&quot;测试开发&quot;$stu.remove(&quot;school&quot;)        #将对应的键删除</span><br></pre></td></tr></table></figure>
</li>
<li><p>清除键和清空哈希表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$stu.Remove(&#x27;school&#x27;)        #当清除了键，值也一并删除$stu.Clear()                #使用 Clear() 方法进行清空哈希表</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建哈希表时指定顺序</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$person = [ordered]@&#123; name = &#x27;Kevin&#x27;; age  = 36 &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>嵌套哈希表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$stu=[ordered]@&#123;&#x27;张三&#x27;=@&#123;major=&#x27;网络安全&#x27;;school=&#x27;蜗牛学苑&#x27;&#125;;&#x27;李四&#x27;=@&#123;major=&#x27;测试开发&#x27;;school=&#x27;蜗牛学苑&#x27;&#125;&#125;$stu.张三[&#x27;major&#x27;]网络安全</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用哈希表格式化输出</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls | Format-Table name,mode        #表格形式只显示&quot;name&quot;和&quot;mode&quot;列</span><br></pre></td></tr></table></figure>

<ul>
<li><p>表格的每一个列包含四个属性：</p>
<ul>
<li><strong>Expression</strong>:绑定的表达式</li>
<li><strong>Width</strong>:列宽度</li>
<li>**Label:**列标题</li>
<li>**Alignment:**列的对齐方式</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$column1 = @&#123;expression=&quot;Name&quot;; width=30;label=&quot;filename&quot;; alignment=&quot;left&quot;&#125;$column2 = @&#123;expression=&quot;LastWriteTime&quot;; width=40;label=&quot;last modification&quot;; alignment=&quot;right&quot;&#125;ls | Format-Table $column1, $column2</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/10/22/windiws%E6%93%8D%E4%BD%9C-%E8%BF%9B%E9%98%B6%E7%89%88%EF%BC%88powershell%E5%8F%98%E9%87%8F%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="鹿祁">
      <meta itemprop="description" content="心有希冀，目有繁星，追光而遇，沐光而行">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="鹿鹿祁">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/22/windiws%E6%93%8D%E4%BD%9C-%E8%BF%9B%E9%98%B6%E7%89%88%EF%BC%88powershell%E5%8F%98%E9%87%8F%EF%BC%89/" class="post-title-link" itemprop="url">windiws操作-进阶版（powershell变量）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-10-22 22:08:16 / 修改时间：22:24:21" itemprop="dateCreated datePublished" datetime="2023-10-22T22:08:16+08:00">2023-10-22</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="一、变量与对象"><a href="#一、变量与对象" class="headerlink" title="一、变量与对象"></a>一、变量与对象</h4><h5 id="1、对象"><a href="#1、对象" class="headerlink" title="1、对象"></a>1、对象</h5><ul>
<li><p>Powershell属于面向对象语言之一</p>
</li>
<li><p>尽管您可以通过以文本方式键入命令与 Windows PowerShell 进行交互，但 Windows PowerShell 是基于对象的，而不是基于文本的</p>
</li>
<li><p>命令的输出即为对象。可以将输出对象发送给另一条命令以作为其输入</p>
</li>
<li><p>探索对象：Get-Member</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#使用Get-Member查看对象的属性和方法PS C:\&gt; Get-Process | Get-Member   TypeName:System.Diagnostics.ProcessName                       MemberType     Definition                           ----                       ----------     ----------                           Handles                    AliasProperty  Handles = Handlecount                Name                       AliasProperty  Name = ProcessName                                  OutputDataReceived         Event          System.Diagnostics.DataReceivedEve...BeginErrorReadLine         Method         void BeginErrorReadLine()            __NounName                 NoteProperty   string __NounName=Process            BasePriority               Property       int BasePriority &#123;get;&#125;                       PSResources                PropertySet    PSResources &#123;Name, Id, Handlecount...ProductVersion             ScriptProperty System.Object ProductVersion &#123;get=...················································································</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用对象属性（用于描述对象的某些方面）</p>
<ul>
<li>脚本属性</li>
<li>属性</li>
<li>NoteProperty</li>
<li>别名属性</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PS C:\&gt; (Get-Process -Name explorer).Nameexplorer#只列出对象所需要的属性Get-Process | Select Name,Id,VM,PM</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用对象方法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#停止某个服务可以使用Stop-Service -Name Spooler#也可使用调用对象方法的方式(Get-Service -Name Spooler).Stop()</span><br></pre></td></tr></table></figure>
</li>
<li><p>排序对象</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#使用sort进行排序，默认升序，使用-Descending参数进行降序Get-Process | sort Id -Descending</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="2、变量"><a href="#2、变量" class="headerlink" title="2、变量"></a>2、变量</h5><ul>
<li><p>变量可以临时保存数据，因此可以把数据保存在变量中，可以是一个计算机名称、一系列服务的集合、XML文档等</p>
</li>
<li><p>Powershell对变量没有太多的限制，不需要再使用变量前进行显示声明或定义，也可以更改变量值的类型</p>
</li>
<li><p>powershell 不需要显示地去声明，可以自动创建变量，只须记住变量的前缀为 $ 符号</p>
</li>
<li><p>声明变量</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$a = 123$a = &quot;112&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>常用变量类型</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[string]    #固定长度的Unicode字符字符串[char]      #Unicode 16位字符[int]       #32位带符号整数[bool]      #布尔类型，只有两个值，True（真）/False（假）值[double]    #双精度64位浮点数[DateTime]  #日期和时间[array]</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看变量的类型</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$a.gettype()        #使用变量的GetType()方法</span><br></pre></td></tr></table></figure>
</li>
<li><p>自动变量：描述存储 PowerShell 的状态信息的变量，由 PowerShell 创建和维护</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$$            #包含会话收到的最后一行中的最后一个令牌$?            #包含最后一个命令的执行状态，如果最后 一 个命令成功，它包含 True;如果失败，它包含 False。$^            #包含会话收到的最后一行的第一个令牌。$_            #含管道对象中的当前 对象。 可以在命令中使用此变量，这些命令针对管道中每个对象或所选对象执行一个操作。$HOME        #包含用户的主目录的完整路径，等同于“$env:HOMEDRIVE+$env:HOMEPATH”</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$null        #$null 是包含 null 或 空值的 自动变量，可以使用此变量在命令和脚本中表示不存在或未定义的值$a = &quot;one&quot;, $null, &quot;three&quot;$a.count</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$PID        #承载当前 PowerShell 会话 (PID) 的进程标识符$PROFILE    #包含当前用户和当前主机应用程序的 PowerShell 配置文件的完整路径$PSHOME        #包含 PowerShell 安装目录的完整路径$PWD        #包含一个 path 对象，该对象表示当前 PowerShell 运行空间的当前目录位置的完整路径</span><br></pre></td></tr></table></figure>
</li>
<li><p>环境变量：访问和管理 PowerShell 中的环境变量</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#访问环境变量$Env:windir</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#创建和创建和更新环境变量的值$Env:Foo = &#x27;An example&#x27;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#写入系统变量#[System.Environment]::SetEnvironmentVariable(&quot;testPath&quot;,&quot;d:/test&quot;,&quot;machine&quot;)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#写入用户变量#[environment]::SetEnvironmentvariable(&quot;Path&quot;, &quot;;c:\powershellscript&quot;, &quot;User&quot;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>常量：相对于变量而言，常量是不可改变的</p>
<ul>
<li><p>创建常量</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set-Variable -Name woniu -Value 3 -Option Constant-Name    #常量名-Value    #常量值-Option Constant    #表示申明当前量为一个常量#常量的申明中常量名不需要加“$”,但使用时需要加上“$”符号Write-Host($woniu)</span><br></pre></td></tr></table></figure>
</li>
<li><p>定义只读变量</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set-Variable -Name server -Value &quot;192.168.1.1&quot; -Option ReadOnly#只读变量与常量都能达到不可修改的目的，但从内存分配的地址空间来看只读变量依然仅仅只是一个变量</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>获取变量</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Get-Variable</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除变量的值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Remove-Variable b            #这里的变量名不需要使用 $ 符号</span><br></pre></td></tr></table></figure>
</li>
<li><p>删除变量</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Remove-Variable b            #这里的变量名不需要使用 $ 符号</span><br></pre></td></tr></table></figure></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/13/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><span class="page-number current">14</span><a class="page-number" href="/page/15/">15</a><span class="space">&hellip;</span><a class="page-number" href="/page/22/">22</a><a class="extend next" rel="next" href="/page/15/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">鹿祁</p>
  <div class="site-description" itemprop="description">心有希冀，目有繁星，追光而遇，沐光而行</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">219</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">鹿祁</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  
  <script color='0,0,255' opacity='0.5' zIndex='-1' count='99' src="/lib/canvas-nest/canvas-nest.min.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>


  <script defer src="/lib/three/three.min.js"></script>


  















  

  

</body>
</html>
