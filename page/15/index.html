<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="心有希冀，目有繁星，追光而遇，沐光而行">
<meta property="og:type" content="website">
<meta property="og:title" content="鹿鹿祁">
<meta property="og:url" content="http://example.com/page/15/index.html">
<meta property="og:site_name" content="鹿鹿祁">
<meta property="og:description" content="心有希冀，目有繁星，追光而遇，沐光而行">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="鹿祁">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/page/15/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>鹿鹿祁</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">鹿鹿祁</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>日程表</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/10/22/windiws%E6%93%8D%E4%BD%9C-%E8%BF%9B%E9%98%B6%E7%89%88%EF%BC%88powershell%E5%91%BD%E4%BB%A4%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="鹿祁">
      <meta itemprop="description" content="心有希冀，目有繁星，追光而遇，沐光而行">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="鹿鹿祁">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/22/windiws%E6%93%8D%E4%BD%9C-%E8%BF%9B%E9%98%B6%E7%89%88%EF%BC%88powershell%E5%91%BD%E4%BB%A4%EF%BC%89/" class="post-title-link" itemprop="url">windiws操作-进阶版（powershell命令）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-10-22 22:08:08 / 修改时间：22:23:59" itemprop="dateCreated datePublished" datetime="2023-10-22T22:08:08+08:00">2023-10-22</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="一、命令基础"><a href="#一、命令基础" class="headerlink" title="一、命令基础"></a>一、命令基础</h4><h5 id="1、介绍"><a href="#1、介绍" class="headerlink" title="1、介绍"></a>1、介绍</h5><ul>
<li><p>Windows PowerShell 是一种命令行外壳程序和脚本环境，使命令行用户和脚本编写者可以利用 .NET Framework的强大功能</p>
</li>
<li><p>PowerShell是一门开源、跨平台的脚本语言和管理Shell，由命令行管理程序和脚本语言组成。</p>
</li>
<li><p>基于 .NET 构建，输出是基于对象的，兼容CMD，命令可扩展</p>
<ul>
<li>.NET 分为 Core和Framework</li>
<li>5版本是基于Framework框架</li>
<li>6和7版本基于Core框架，Core为微软的一个开源项目</li>
</ul>
</li>
<li><p>查看版本使用内置变量</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PS C:\&gt; $PSVersionTableName                           Value                                           ----                           -----                                           PSVersion                      5.1.14393.206                                   PSEdition                      Desktop                                         PSCompatibleVersions           &#123;1.0, 2.0, 3.0, 4.0...&#125;                         BuildVersion                   10.0.14393.206                                  CLRVersion                     4.0.30319.42000                                 WSManStackVersion              3.0                                             PSRemotingProtocolVersion      2.3                                             SerializationVersion           1.1.0.1</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="2、使用ISE工具"><a href="#2、使用ISE工具" class="headerlink" title="2、使用ISE工具"></a>2、使用ISE工具</h5><ul>
<li><p>Powershell控制台工具</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202205031320380.png" alt="image-20220503132052267"></p>
</li>
</ul>
<table>
<thead>
<tr>
<th align="left">优点</th>
<th align="left">缺点</th>
</tr>
</thead>
<tbody><tr>
<td align="left">控制台程序非常轻量，可以快速加载且不需要太多内存</td>
<td align="left">不支持双字节字符集，非英语语言可能无法展示</td>
</tr>
<tr>
<td align="left">不需要任何非Powershell自身必须的 .NET Fromework之外的资源</td>
<td align="left">剪切板使用的是非标准键（直接右击复制）</td>
</tr>
<tr>
<td align="left">可以设置不同的字体颜色和背景</td>
<td align="left">只有少量的帮助信息和自能使用Tab键不全，没有提示</td>
</tr>
</tbody></table>
<ul>
<li><h5 id="集成脚本环境（ISE）"><a href="#集成脚本环境（ISE）" class="headerlink" title="集成脚本环境（ISE）"></a>集成脚本环境（ISE）</h5><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202205031335849.png" alt="image-20220503133540794"></li>
</ul>
<table>
<thead>
<tr>
<th align="left">优点</th>
<th align="left">缺点</th>
</tr>
</thead>
<tbody><tr>
<td align="left">支持双字节字符集</td>
<td align="left">不能再没有安装图形桌面的服务器上运行</td>
</tr>
<tr>
<td align="left">提供更多的帮助</td>
<td align="left">以一个单独的程序存在，需要更多的硬件资源</td>
</tr>
<tr>
<td align="left">使用标准的复制、粘贴按键（Ctrl+c、Ctrl+v）</td>
<td align="left"></td>
</tr>
</tbody></table>
<h5 id="3、使用命令"><a href="#3、使用命令" class="headerlink" title="3、使用命令"></a>3、使用命令</h5><ul>
<li><p>命令的几种类型</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PS C:\&gt; [System.Management.Automation.CommandTypes].GetEnumNames()Alias                    #别名Function                #函数FilterCmdlet                    #Powershell编译命令（Command-Let）ExternalScriptApplication                #可执行文件或程序ScriptWorkflowConfigurationAll</span><br></pre></td></tr></table></figure>
</li>
<li><p>命令基本剖析</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202205031349054.png" alt="image-20220428222119592"></p>
</li>
<li><p>Cmdlet命名惯例（Powershell命令命名惯例）</p>
<ul>
<li><p>规则以标准的动词开始，例如：Get、Set、New或Pause等等，可以使用Get-Verb进行查看运行使用的动词列表</p>
</li>
<li><p>动词后面紧跟的是一个 “-” 破折号，然后是一个单数形式的名词，例如：Service或Process等</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">New-Service        #创建一个新服务Get-Process        #获取本地计算机或远程计算机上运行的进程Set-Service        #设置一个服务Invoke-Command        #在本地计算机或远程计算机上运行命令</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>别名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#获取命令的别名PS C:\&gt; Get-Alias -Definition Get-ServiceCommandType     Name                                               Version    Source                      -----------     ----                                               -------    ------                      Alias           gsv -&gt; Get-Service#gsv就是Get-Service的别名，可以直接使用别名help gsv</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="4、使用命令帮助"><a href="#4、使用命令帮助" class="headerlink" title="4、使用命令帮助"></a>4、使用命令帮助</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#查看Get-Service命令的帮助信息help Get-Service#更新帮助文档Update-Help        #需要更新一部分时间#在想操作某个事务时，但不知道使用命令，可以使用帮助help *log*#使用在线帮助Help Get-EventLog -online</span><br></pre></td></tr></table></figure>

<h5 id="5、命令的参数"><a href="#5、命令的参数" class="headerlink" title="5、命令的参数"></a>5、命令的参数</h5><ul>
<li><p>必选参数和可选参数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PS C:\&gt; help Get-EventLog名称    Get-EventLog   语法    Get-EventLog [-LogName] &lt;string&gt; [[-InstanceId] &lt;long[]&gt;]  [&lt;CommonParameters&gt;]       Get-EventLog  [&lt;CommonParameters&gt;]# -LogName为必选参数，因为参数名称和参数值没有被 [] 包裹# 使用 [] 整个包裹的为可选参数</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#本地计算机上的事件日志中获取最近的5个条目PS C:\&gt; Get-EventLog -LogName System -Newest 5   Index Time          EntryType   Source                 InstanceID Message                                          ----- ----          ---------   ------                 ---------- -------                                            760 4月 28 20:42   Information Service Control M...   1073748860 Software Protection 服务处于 停止 状态。                    759 4月 28 20:42   Information Service Control M...   1073748864 Windows Biometric Service 服务的启动类型从 按需启动 更改为...     758 4月 28 20:42   Information Service Control M...   1073748860 Windows Biometric Service 服务处于 正在运行 状态。            757 4月 28 20:42   Information Service Control M...   1073748860 Software Protection 服务处于 正在运行 状态。                  756 4月 28 20:42   Information Service Control M...   1073748860 Microsoft Storage Spaces SMP 服务处于 正在运行 状态。</span><br></pre></td></tr></table></figure>
</li>
<li><p>位置参数（参数具有位置性，位置不能调换）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PS C:\&gt; Get-EventLog Application 1   Index Time          EntryType   Source                 InstanceID Message                                 ----- ----          ---------   ------                 ---------- -------                                  8003 4月 28 13:04   Information SecurityCenter                  1 已经启动 Windows 安全中心服务。                     6712 4月 24 10:58   Information SecurityCenter                  1 已经启动 Windows 安全中心服务。#Application 参数名为 -LogName # 1 参数名为    -InstanceID</span><br></pre></td></tr></table></figure>
</li>
<li><p>参数值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[-LogName] &lt;string&gt;            #后面的 &lt;string&gt; 为参数值，表示键入值的类型#常用类型#string   一系列字母和数字，也可以包含空格符，包含空格时需要使用引号包裹，建议单引号，也可以交叉使用双引号Get-EventLog System#Int、Int32或Int64    整数，不包含小数Get-EventLog System -Newest 5#DateTime    日期，通常表示为：月-日-年Get-EventLog System -After 4-28-2022[-ComputerName &lt;string[]&gt;]    #后面的 &lt;string[]&gt; 表示可以接收数组、集合或列表类型的字符串Get-EventLog Security -ComputerName server-r2,dc4#将多个值放入到某个文件中去读取Get-EventLog Application -computer (Get-Content names.txt)    #这里使用Get-Content去获取对象的内容</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="6、使用管道"><a href="#6、使用管道" class="headerlink" title="6、使用管道"></a>6、使用管道</h5><ul>
<li><p>通过管道把命令互相连接起来，通过传输一个命令，把其输出作为另一个Cmdlet的输入（前面命令的输出结果作为后面命令的操作对象）</p>
</li>
<li><p>使用管道输出为文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#输出为CSV文件Get-Process | Export-Csv procs.csv#导入查看CSV文件Import-Csv procs.csv</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#输出为XML文件Get-Process | Export-Clixml procs.xml#使用diff比较差异，显示出前后运行的进程差异并显示对应名称diff -Reference (Import-Clixml .\procs.xml) -Difference (Get-Process) -Property name#比较差异时返回结果：“&lt;=”表示参照结果（前者有，后者无），“=&gt;”表示差异结果（前者无，后者有）</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#转换为HTML文件并输出Get-Service | ConvertTo-Html | Out-File services.html</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用Cmdlets修改系统</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#中止进程Get-Process -Name explorer | Stop-Process#停止服务Get-Service -Name Spooler | Stop-Service</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="7、常用命令"><a href="#7、常用命令" class="headerlink" title="7、常用命令"></a>7、常用命令</h5><ul>
<li><p>Get类</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Get-Command        #得到所有PowerShell命令，获取有关 cmdlet 以及有关 PowerShell 命令的其他元素的基本信息（包括Cmdlet、Alias、Function）Get-Process        #获取所有进程Get-Help        #显示有关 Windows PowerShell 命令和概念的信息Get-History        #获取在当前会话中输入的命令的列表Get-Job            #获取在当前会话中运行的 Windows PowerShell 后台作业Get-FormatData    #获取当前会话中的格式数据Get-Event        #获取事件队列中的事件Get-Alias        #获取当前会话的别名Get-Culture        #获取操作系统中设置的当前区域性Get-Date        #获取当前日期和时间Get-Host        #获取表示当前主机程序的对象Get-Member        #获取对象的属性和方法Get-Random        #从集合中获取随机数或随机选择对象Get-UICulture    #获取操作系统中当前用户界面 (UI) 区域性设置Get-Unique        #从排序列表返回唯一项目Get-Variable    #获取当前控制台中的变量Get-EventLog    #获取本地或远程计算机上的事件日志或事件日志列表中的事件Get-ChildItem    #获取一个或多个指定位置中的项和子项Get-Content        #获取指定位置的项的内容Get-ItemProperty    #获取指定项的属性Get-WmiObject        #获取 Windows Management Instrumentation (WMI) 类的实例或可用类的相关信息Get-Location        #获取当前工作位置的相关信息（如：F:\Users\TaoMin ）Get-PSDrive            #获取当前会话中的 Windows PowerShell 驱动器Get-Item            #获取位于指定位置的项Get-Process            #获取在本地计算机或远程计算机上运行的进程Get-Service            #获取本地或远程计算机上的服务Get-Transaction        #获取当前（活动）事务Get-ExecutionPolicy    #获取当前会话中的执行策略</span><br></pre></td></tr></table></figure>
</li>
<li><p>Set类</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set-Alias            #在当前 Windows PowerShell 会话中为 cmdlet 或其他命令元素创建或更改别名（替代名称）Set-PSDebug            #打开和关闭脚本调试功能，设置跟踪级别并切换 strict 模式Set-StrictMode        #建立和强制执行表达式、脚本和脚本块中的编码规则Set-Date            #将计算机上的系统时间更改为指定的时间Set-Variable        #设置变量的值，如果该变量还不存在，则创建该变量Set-PSBreakpoint    #在行、命令或者变量上设置断点Set-Location        #将当前工作位置设置为指定的位置Set-Item            #将项的值更改为命令中指定的值Set-Service            #启动、停止和挂起服务并更改服务的属性Set-Content            #在项中写入内容或用新内容替换其中的内容Set-ItemProperty    #创建或更改某一项的属性值Set-WmiInstance        #创建或更新现有 Windows Management Instrumentation (WMI) 类的实例Set-ExecutionPolicy    #更改 Windows PowerShell 执行策略的用户首选项。</span><br></pre></td></tr></table></figure>
</li>
<li><p>Write类</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Write-Host                #将自定义输出内容写入主机。类似于.net的 write()或者writeline()功能Write-Progress            #在 Windows PowerShell 命令窗口内显示进度栏Write-Debug                #将调试消息写入控制台Write-Verbose            #将文本写入详细消息流Write-Warning            #写入警告消息Write-Error                #将对象写入错误流Write-Output            #将指定对象发送到管道中的下一个命令；如果该命令是管道中的最后一个命令，则在控制台上显示这些对象Write-EventLog            #将事件写入事件日志</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="8、任务"><a href="#8、任务" class="headerlink" title="8、任务"></a>8、任务</h5><ul>
<li>显示正在运行的进程列表</li>
<li>显示最新的100个应用程序日志</li>
<li>显示所有类型为 “Cmdlet” 的命令</li>
<li>显示所有的别名</li>
<li>创建一个别名，使用 “np” 直接打开 notepad.exe</li>
<li>显示以字母M开头的服务名称</li>
<li>显示所有的防火墙规则</li>
<li>显示防火墙的所有入站规则</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/10/22/windiws%E6%93%8D%E4%BD%9C-%E8%BF%9B%E9%98%B6%E7%89%88%EF%BC%88windows-%E5%9F%9F-%E5%9F%9F%E7%AD%96%E7%95%A5%E5%BA%94%E7%94%A8%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="鹿祁">
      <meta itemprop="description" content="心有希冀，目有繁星，追光而遇，沐光而行">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="鹿鹿祁">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/22/windiws%E6%93%8D%E4%BD%9C-%E8%BF%9B%E9%98%B6%E7%89%88%EF%BC%88windows-%E5%9F%9F-%E5%9F%9F%E7%AD%96%E7%95%A5%E5%BA%94%E7%94%A8%EF%BC%89/" class="post-title-link" itemprop="url">windiws操作-进阶版（windows 域-域策略应用）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-10-22 22:07:18 / 修改时间：22:23:27" itemprop="dateCreated datePublished" datetime="2023-10-22T22:07:18+08:00">2023-10-22</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="一、域组策略"><a href="#一、域组策略" class="headerlink" title="一、域组策略"></a>一、域组策略</h4><h5 id="1、组策略介绍"><a href="#1、组策略介绍" class="headerlink" title="1、组策略介绍"></a>1、组策略介绍</h5><ul>
<li>一组策略的集合，用于统一修改系统、设置程序</li>
</ul>
<h5 id="2、组策略优点"><a href="#2、组策略优点" class="headerlink" title="2、组策略优点"></a>2、组策略优点</h5><ul>
<li>减小管理成本、减小用户单独配置错误的可能性、可以针对特定对象设置特定的策略</li>
</ul>
<h5 id="3、组策略对象GPO"><a href="#3、组策略对象GPO" class="headerlink" title="3、组策略对象GPO"></a>3、组策略对象GPO</h5><ul>
<li>存储组策略的所有配置信息，是AD中的一种特殊对象</li>
<li>默认GPO<ul>
<li>默认域策略:影响域中所有的用户和计算机</li>
<li>默认域控制器策略:影响组织单位“Domain Controllers”中所有的用户和计算机</li>
</ul>
</li>
<li>GPO链接应用：只能链接到站点、域、OU（组织单位）上</li>
</ul>
<h4 id="二、域组策略应用案例"><a href="#二、域组策略应用案例" class="headerlink" title="二、域组策略应用案例"></a>二、域组策略应用案例</h4><h5 id="1、域组策略基本操作"><a href="#1、域组策略基本操作" class="headerlink" title="1、域组策略基本操作"></a>1、域组策略基本操作</h5><ul>
<li><p>打开域控制器上的组策略管理</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202203250203063.png" alt="image-20220325020256969"></p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202203250203001.png" alt="image-20220325020358951"></p>
</li>
<li><p>在站点或者域或者OU上创建GPO对象</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202203250207244.png" alt="image-20220325020746197"></p>
</li>
<li><p>通过编辑GPO对象，进入到组策略管理编辑器</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202203250209508.png" alt="image-20220325020946458"></p>
</li>
<li><p>编辑完成后刷新组策略</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202203250212714.png" alt="image-20220325021228683"></p>
</li>
</ul>
<h5 id="2、案例一（计算机配置）"><a href="#2、案例一（计算机配置）" class="headerlink" title="2、案例一（计算机配置）"></a>2、案例一（计算机配置）</h5><ul>
<li>实验环境：已部署Windows Server 2016域，财务部员工用户位于OU“财务部”中</li>
<li>实验需求：财务部的所有计算机都要自动下载并安装系统补丁</li>
</ul>
<h5 id="3、案例二（用户配置）"><a href="#3、案例二（用户配置）" class="headerlink" title="3、案例二（用户配置）"></a>3、案例二（用户配置）</h5><ul>
<li>实验环境：已部署Windows Server 2016域，销售部员工用户位于OU“销售部”中</li>
<li>实验需求：销售部员工使用统一的桌面背景，禁止更改桌面背景</li>
</ul>
<h5 id="4、案例三（软件分发）"><a href="#4、案例三（软件分发）" class="headerlink" title="4、案例三（软件分发）"></a>4、案例三（软件分发）</h5><ul>
<li>实验环境：已部署Windows Server 2016域，销售部员工用户位于OU“销售部”中</li>
<li>实验需求：将软件MBSA统一分发给销售部所有员工，用户可以选择是否进行安装</li>
<li>注意<ul>
<li>只能针对 “.msi” 格式文件进行分发（可以使用VERITAS Discover和Advanced Installer等第三方软件将.exe格式文件转换为.msi格式文件）</li>
<li>分发是分配和发布（分配：将程序分配到用户或计算机、发布：将程序发布给用户，用户可选择是否安装；分配比发布更具有强制性）</li>
<li>软件分发点是服务器上的共享文件夹，应采用 “\服务器名或IP地址\共享名” 方式访问</li>
</ul>
</li>
</ul>
<h5 id="5、案例四"><a href="#5、案例四" class="headerlink" title="5、案例四"></a>5、案例四</h5><ul>
<li>实验环境：已部署Windows Server 2016域，“销售部”组中包含销售部员工用户账户UserA、UserB，“财务部”组中包含财务部员工用户账户UserC</li>
<li>实验需求：销售部的所有员工设置密码长度为9，并且每个月都要修改一次密码；财务部的员工设置密码的长度为20，允许登陆尝试次数为3次，一旦账户被锁定，必须由管理员手动解锁该账户</li>
</ul>
<h4 id="三、组策略应用规则"><a href="#三、组策略应用规则" class="headerlink" title="三、组策略应用规则"></a>三、组策略应用规则</h4><h5 id="1、策略继承与阻止"><a href="#1、策略继承与阻止" class="headerlink" title="1、策略继承与阻止"></a>1、策略继承与阻止</h5><ul>
<li><p>下级容器默认会继承来自上级容器的GPO</p>
</li>
<li><p>子容器可以阻止继承上级容器的GPO</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202203250213332.png" alt="image-20210730172447975"></p>
</li>
</ul>
<h5 id="2、策略强制生效和筛选"><a href="#2、策略强制生效和筛选" class="headerlink" title="2、策略强制生效和筛选"></a>2、策略强制生效和筛选</h5><ul>
<li><p>强制生效</p>
<ul>
<li><p>上级容器强制下级容器执行其GPO设置</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202203250213319.png" alt="image-20210730172403826"></p>
</li>
<li><p>“强制生效”会覆盖“阻止继承”设置</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202203250213368.png" alt="image-20210730173206977"></p>
</li>
</ul>
</li>
<li><p>筛选</p>
<ul>
<li><p>可阻止一个GPO应用于容器内的特定计算机或用户</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202203250213388.png" alt="image-20210730172604885"></p>
</li>
</ul>
</li>
</ul>
<h5 id="3、组策略应用顺序"><a href="#3、组策略应用顺序" class="headerlink" title="3、组策略应用顺序"></a>3、组策略应用顺序</h5><ul>
<li>LSDOU（本地、站点、域、组织单位）<ul>
<li>首先应用本地组策略</li>
<li>如果有站点组策略，则应用</li>
<li>接着应用域策略</li>
<li>最后应用OU上的策略</li>
<li>如果同一个OU上链接了多个GPO，则按照链接顺序从高到低逐个应用</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/10/22/windiws%E6%93%8D%E4%BD%9C-%E8%BF%9B%E9%98%B6%E7%89%88%EF%BC%88windows-%E5%9F%9F-%E5%9F%9F%E8%AE%A4%E8%AF%81%E6%9C%BA%E5%88%B6%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="鹿祁">
      <meta itemprop="description" content="心有希冀，目有繁星，追光而遇，沐光而行">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="鹿鹿祁">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/22/windiws%E6%93%8D%E4%BD%9C-%E8%BF%9B%E9%98%B6%E7%89%88%EF%BC%88windows-%E5%9F%9F-%E5%9F%9F%E8%AE%A4%E8%AF%81%E6%9C%BA%E5%88%B6%EF%BC%89/" class="post-title-link" itemprop="url">windiws操作-进阶版（windows 域-域认证机制）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-10-22 22:07:08 / 修改时间：22:22:35" itemprop="dateCreated datePublished" datetime="2023-10-22T22:07:08+08:00">2023-10-22</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="一、活动目录对象"><a href="#一、活动目录对象" class="headerlink" title="一、活动目录对象"></a>一、活动目录对象</h4><h5 id="1、用户"><a href="#1、用户" class="headerlink" title="1、用户"></a>1、用户</h5><ul>
<li><p>当一台 server 部署了活动目录服务后成为域控制器，从而 server 上的用户将不再是本地帐户，而变成了域用户</p>
</li>
<li><p>在这里打开 管理工具→Active Directory 用户和计算机 进行管理</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202203210102877.png" alt="image-20220321010253766"></p>
</li>
</ul>
<h5 id="2、组"><a href="#2、组" class="headerlink" title="2、组"></a>2、组</h5><ul>
<li>组的类型<ul>
<li>安全组（为于设置访问权限）</li>
<li>通讯组（用于电子邮件通信、包含联系人和用户帐户）</li>
</ul>
</li>
<li>组的作用域<ul>
<li>本地域组：针对本域的资源创建的本地域组（本域）</li>
<li>全局组：管理日常维护的目录对象（整个林及信任域）</li>
<li>通用组：身份信息记录在全局编录中，查询速度快（整个林及信任域）</li>
</ul>
</li>
</ul>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202203210106823.png" alt="image-20220321010650737"></p>
<h5 id="3、组织单位（OU）"><a href="#3、组织单位（OU）" class="headerlink" title="3、组织单位（OU）"></a>3、组织单位（OU）</h5><ul>
<li>OU是AD中的容器</li>
<li>用来存放用户、组、计算机和其他OU等对象</li>
<li>常见创建OU的方式：基于部门、基于地理位置、基于对象类型</li>
</ul>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202203210107777.png" alt="image-20220321010745718"></p>
<h4 id="二、Windows基本认证"><a href="#二、Windows基本认证" class="headerlink" title="二、Windows基本认证"></a>二、Windows基本认证</h4><h5 id="1、NTLM认证协议"><a href="#1、NTLM认证协议" class="headerlink" title="1、NTLM认证协议"></a>1、NTLM认证协议</h5><ul>
<li><p>基本介绍</p>
<ul>
<li>NTLM是NT LAN Manager的缩写，NTLM 是指 telnet 的一种验证身份方式，即问询&#x2F;应答身份验证协议，是 Windows NT 早期版本的标准安全协议，Windows 2000 支持 NTLM 是为了保持向后兼容。Windows 2000内置三种基本安全协议之一</li>
<li>Windows早期的认证方式，目前所采用的是Kerberos认证</li>
</ul>
</li>
<li><p>认证过程</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202203290745137.png" alt="image-20220329074505097"></p>
<ul>
<li><p>NTLM使用在Windows NT和Windows 2000 Server（or later）工作组环境中（Kerberos用在域模式下）。在AD域环境中，如果需要认证Windows NT系统，也必须采用NTLM</p>
<p>1）用户通过输入Windows帐号和密码登录客户端主机。在登录之前，客户端会缓存输入密码的哈希值，原始密码会被丢弃（“原始密码在任何情况下都不能被缓存”，这是一条基本的安全准则）。成功登录客户端Windows的用户如果试图访问服务器资源，需要向对方发送一个请求。该请求中包含一个以明文表示的用户名</p>
<p>2）服务器接收到请求后，生成一个16位的随机数。这个随机数被称为Challenge或者Nonce。服务器在将该Challenge发送给客户端之前，该Challenge会先被保存起来。Challenge是以明文的形式发送的</p>
<p>3）客户端在接收到服务器发回的Challenge后，用在步骤一中保存的密码哈希值对其加密，然后再将加密后的Challenge发送给服务器</p>
<p>4）服务器接收到客户端发送回来的加密后的Challenge后，会向DC（Domain）发送针对客户端的验证请求。该请求主要包含以下三方面的内容：客户端用户名；客户端密码哈希值加密的Challenge和原始的Challenge</p>
<p>5）DC根据用户名获取该帐号的密码哈希值，对原始的Challenge进行加密。如果加密后的Challenge和服务器发送的一致，则意味着用户拥有正确的密码，验证通过，否则验证失败。DC将验证结果发给服务器，并最终反馈给客户端</p>
</li>
</ul>
</li>
</ul>
<h4 id="三、Windows域认证"><a href="#三、Windows域认证" class="headerlink" title="三、Windows域认证"></a>三、Windows域认证</h4><h5 id="1、Kerberos认证协议"><a href="#1、Kerberos认证协议" class="headerlink" title="1、Kerberos认证协议"></a>1、Kerberos认证协议</h5><ul>
<li><p>相关名词</p>
<ul>
<li>域控制器（Domain Controller，<strong>DC</strong>）：在域中至少有一台服务器负责每一台联入网络的电脑和用户的验证工作，相当于一个单位的门卫一样。</li>
<li>密钥分发中心（Key Distribution Center，<strong>KDC</strong>）：KDC维护着域中所有安全主体（Security Principal）账户信息数据库，负责管理票据、认证票据、分发票据。</li>
<li>帐户数据库（Account Database，<strong>AD</strong>）：一个类似于 Windows本机SAM的数据库，存储了域内所有网络对象的凭证，也存储所有Client的白名单，在白名单中的 Client才可以申请到TGT。</li>
<li>身份验证服务（Authentication Service，<strong>AS</strong>）：用于生成TGT的服务。</li>
<li>票据发放服务（Ticket Granting Service，<strong>TGS</strong>）：用于生成某个服务的ticket</li>
<li>认证票据（Ticket Granting Ticket，<strong>TGT</strong>）：可以理解为入场券，通过入场券能够获得票据，是一种临时凭证的存在。</li>
<li>票据（<strong>Ticket</strong>）：网络对象互相访问的凭证。</li>
<li>Master Key ：长期密钥（被 Hash加密的用户密钥），这里指 NTLM Hash，简单理解就是Windows加密过的密码口令。</li>
<li>Session Key ：短期会话密钥。</li>
<li>krbtgt 账户：每个域控制器都有一个 krbtgt的用户账户，是 KDC的服务账户，用来创建票据授予服务(TGS)加密的密钥。</li>
</ul>
</li>
<li><p>Kerberos中的角色</p>
<ul>
<li>Client：客户据</li>
<li>Server：需要访问的服务</li>
<li>KDC (DC) ：认证服务器，一般为域控制器（DC）</li>
</ul>
</li>
<li><p>认证过程</p>
<p>1）Client向KDC的AS服务发送请求，希望获取访问Server的权限。 KDC收到请求后，通过在帐户数据库AD中存储黑名单和白名单来区分Client是否可信。确认成功后，AS返回TGT给Client。</p>
<p>2）Client得到了TGT后，继续向KDC的TGS服务发送请求，希望获取访问 Server的权限。KDC通过客户端请求信息中的TGT判断客户端是否拥有权限，确认成功返回访问Server的权限ticket。</p>
<p>3）Client得到ticket后，Client与Server二者进行相互验证，成功后，Client就可以访问Server的资源。</p>
</li>
<li><p>详细认证过程</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai202203290655873.png" alt="image-20220223112544179"></p>
<p>1）Client 发送 AS Request 给 AS 。</p>
<p>AS Request 大致内容：</p>
<ul>
<li>Pre-authentication data ：一个使用 Client 的 Master key加密过的 Timestamp（时间戳），用于证明自己是所发送用户名对应的那个用户。</li>
<li>Client name &amp; realm：Domain name\Client name ，Client标识，用于 KDC 从 AD 中查找 Client 的 Master key 。</li>
<li>Server Name ：KDC TGS 的 Server Name 。</li>
</ul>
<p>2）AS 接收到 Client 的请求信息，需要验证发送方是否为本人，而AS 只需从 AD 中获取 Client 对应的 Master Key 对 Pre-authentication data 进行解密验证其是否为合法的 Timestamp，若验证合格，则说明发送方在 AD 中且其密钥正确。但是当 Timestamp 比当前的时间偏差过多或者 Timestamp 早于上次认证时间点，AS 会直接拒绝。</p>
<p>验证通过后，AS 将 AS Response 发送给 Client。主要包括请求 Client 的 Master Key加密过的 Session Key 和被 KDC用户（krbtgt 帐户）使用其自己的 NTLM Hash 加密的 TGT 。</p>
<p>TGT 的大致内容如下：</p>
<ul>
<li>Session Key ：KDC 生成的一个随机字符串，用于后续 Client与TGS 服务之间的通信。</li>
<li>Client name &amp; realm ：Domain name\Client 。</li>
<li>Server name &amp; realm: 简单地说就是 Domain name\Server ， Client 访问的 Server 。</li>
<li>End Time ：TGT 到期时间。</li>
</ul>
<p>3）Client 使用自己的Master Key 可以将 AS返回的加密过后的 Session Key 解密，得到Session Key。而后发送TGS Request 给 TGS ，请求Ticket</p>
<p>TGS Request 大致内容如下：</p>
<ul>
<li>Authenticator ：使用 Session Key加密的Clien info（Client标识等信息）和 Timestamp（时间戳）。</li>
<li>TGT</li>
<li>Client info ：Domain name&#x2F; Client 。</li>
<li>Server info ：Client 要访问的 Server 的信息 。</li>
<li>Timestamp ：时间戳 。</li>
</ul>
<p>4）TGS 收到TGS Request ，通过自己的 Master Key（NTLM Hash） 对 TGS Request 中的 TGT 进行解密，得到Session Key ，而后使用Session Key 解密 Authenticator 进行相关验证，验证成功后 TGS 向 Client 发送 TGS Response 。TGS Response 主要包括两个部分，使用Session Key（KDC-Client） 加密过的用于 Client 和 Server 通信的Session Key （Server-Client ）与使用 Server 的 Master Key 进行加密的Ticket</p>
<p>Ticket大致内容如下：</p>
<ul>
<li>Session Key ： 用于 Client 和 Server 通信的Session Key 。</li>
<li>Client name &amp; realm : Domain name\Client 。</li>
<li>End time : Ticket的到期时间。</li>
</ul>
<p>5）Client 通过Session Key（KDC-Client）进行解密将 TGS Response 中用于与Server通信的Session Key （Server-Client ）获取到。而后 Client 向 Server请求服务，发送Request其中包含Ticket，Server Session Key加密的Client info与Timestamp，还包含一个 Flag 用于表示 Client 是否需要进行双向验证。</p>
<p>6）Server通过使用自己的 Master Key 解密用户请求中的 Ticket 得到 Session Key（Server-Client ），使用 Session Key（Server-Client ）解密Client加密后的信息（Client info与Timestamp）进行验证，验证成功后，让 Client 访问需要访问的资源。</p>
<p>若Client 需要进行双向验证，验证成功后，返回给 Client 使用 Session Key（Server-Client ）得到新时间戳并验证其是否正确。验证通过的话则Client可以信任该Server，可以发送服务请求。</p>
<p>校验通过后，该票据会一直存在Client的内存中。</p>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/10/22/windiws%E6%93%8D%E4%BD%9C-%E8%BF%9B%E9%98%B6%E7%89%88%EF%BC%88windows-%E5%9F%9F-%E9%83%A8%E7%BD%B2%E5%9F%9F%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="鹿祁">
      <meta itemprop="description" content="心有希冀，目有繁星，追光而遇，沐光而行">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="鹿鹿祁">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/22/windiws%E6%93%8D%E4%BD%9C-%E8%BF%9B%E9%98%B6%E7%89%88%EF%BC%88windows-%E5%9F%9F-%E9%83%A8%E7%BD%B2%E5%9F%9F%EF%BC%89/" class="post-title-link" itemprop="url">windiws操作-进阶版（windows 域-部署域）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-10-22 22:07:00 / 修改时间：22:21:59" itemprop="dateCreated datePublished" datetime="2023-10-22T22:07:00+08:00">2023-10-22</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="一、Active-Directory基本概念"><a href="#一、Active-Directory基本概念" class="headerlink" title="一、Active Directory基本概念"></a>一、Active Directory基本概念</h4><h5 id="1、概述"><a href="#1、概述" class="headerlink" title="1、概述"></a>1、概述</h5><ul>
<li>活动目录（Active Directory）是面向Windows Standard Server、Windows Enterprise Server以及 Windows Datacenter Server的目录服务。</li>
<li>Active Directory不能运行在Windows Web Server上，但是可以通过它对运行Windows Web Server的计算机进行管理。</li>
<li>Active Directory存储了有关网络对象的信息，并且让管理员和用户能够轻松地查找和使用这些信息。</li>
<li>Active Directory使用了一种结构化的数据存储方式，并以此作为基础对目录信息进行合乎逻辑的分层组织</li>
</ul>
<h5 id="2、功能"><a href="#2、功能" class="headerlink" title="2、功能"></a>2、功能</h5><ul>
<li>服务器及客户端计算机管理：管理服务器及客户端计算机账户，所有服务器及客户端计算机加入域管理并实施组策略。</li>
<li>用户服务：管理用户域账户、用户信息、企业通讯录（与电子邮件系统集成）、用户组管理、用户身份认证、用户授权管理等，按省实施组管理策略。</li>
<li>资源管理：管理打印机、文件共享服务等网络资源。</li>
<li>桌面配置：系统管理员可以集中的配置各种桌面配置策略，如：用户使用域中资源权限限制、界面功能的限制、应用程序执行特征限制、网络连接限制、安全配置限制等。</li>
<li>应用系统支撑：支持财务、人事、电子邮件、企业信息门户、办公自动化、补丁管理、防病毒系统等各种应用系统</li>
<li>主要将网络中的计算机逻辑上组织到一起集中管理</li>
</ul>
<h4 id="二、Active-Directory相关概念"><a href="#二、Active-Directory相关概念" class="headerlink" title="二、Active Directory相关概念"></a>二、Active Directory相关概念</h4><h5 id="1、Active-Directory"><a href="#1、Active-Directory" class="headerlink" title="1、Active Directory"></a>1、Active Directory</h5><ul>
<li>AD是Windows server的一种服务</li>
<li>AD是一个目录数据库，被用来存储用户账户、计算机账户、打印机与共享文件夹等对象，而提供目录服务的组件就是AD域服务器，它负责目录数据库的存储、添加、删除、修改与查询等工作</li>
</ul>
<h5 id="2、域"><a href="#2、域" class="headerlink" title="2、域"></a>2、域</h5><ul>
<li>活动目录的一种实现形式</li>
<li>活动目录中最核心的管理单位</li>
<li>由域控制器和成员计算机组成</li>
</ul>
<h5 id="3、域控制器"><a href="#3、域控制器" class="headerlink" title="3、域控制器"></a>3、域控制器</h5><ul>
<li>安装了活动目录的一台计算机（一般为Windows server）</li>
<li>一个域可以有多台域控制器</li>
</ul>
<h5 id="4、名称空间（DNS域名空间）"><a href="#4、名称空间（DNS域名空间）" class="headerlink" title="4、名称空间（DNS域名空间）"></a>4、名称空间（DNS域名空间）</h5><ul>
<li>是一个区域的名字（在DNS上新建的一个区域）</li>
<li>定位了网络资源（域名资源）的位置</li>
</ul>
<h5 id="5、对象和属性"><a href="#5、对象和属性" class="headerlink" title="5、对象和属性"></a>5、对象和属性</h5><ul>
<li>对象由一组属性组成，它代表的是具体的事物</li>
<li>属性就是用来描述对象的数据</li>
</ul>
<h5 id="6、容器（组织单位、域）"><a href="#6、容器（组织单位、域）" class="headerlink" title="6、容器（组织单位、域）"></a>6、容器（组织单位、域）</h5><ul>
<li>是一种特殊的活动目录对象</li>
<li>作用是存放对象的空间</li>
</ul>
<h5 id="7、域组策略（GPO对象）"><a href="#7、域组策略（GPO对象）" class="headerlink" title="7、域组策略（GPO对象）"></a>7、域组策略（GPO对象）</h5><ul>
<li>若干策略的集合</li>
<li>应用到容器会影响容器内所有的计算机和用户</li>
</ul>
<h4 id="三、域结构"><a href="#三、域结构" class="headerlink" title="三、域结构"></a>三、域结构</h4><h5 id="1、物理结构"><a href="#1、物理结构" class="headerlink" title="1、物理结构"></a>1、物理结构</h5><ul>
<li><p>站点：可以将高速连接的网络中多台域控制放入一个站点</p>
<ul>
<li>一个域的域控制器分布在不同的站点中，而站点之间是慢速连接，由于不同站点的域控制器之间会互相复制AD DS数据库，因此要谨慎规划执行复制的时段，尽量在离峰时段执行复制工作，频率不要过高，避免复制时占用站点之间的连接带宽，影响站点之间其他数据的传输效率</li>
<li>同一个站点内的域控制器之间是通过快速链路连接在一起的，在复制AD DS数据时，可以实现快速复制。AD DS会设置让同一个站点内、隶属于同一个域的域控制器之间自动执行复制操作，默认的复制频率也要高于不同站点之间的域控制器。</li>
</ul>
</li>
<li><p>域控制器</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202203202327499.png" alt="image-20220320232705431"></p>
</li>
</ul>
<h5 id="2、逻辑结构"><a href="#2、逻辑结构" class="headerlink" title="2、逻辑结构"></a>2、逻辑结构</h5><ul>
<li><p>单域：网络中只建立了一个域</p>
</li>
<li><p>域树：具有连续的名称空间的多个域</p>
</li>
<li><p>域林：由一个或多个没有形成连续名称空间的域树组成</p>
</li>
<li><p>组织单位：域内部的一种容器（用于存放对象）</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202203202323906.png" alt="image-20220320232359841"></p>
</li>
</ul>
<h4 id="四、域功能级别和林功能级别"><a href="#四、域功能级别和林功能级别" class="headerlink" title="四、域功能级别和林功能级别"></a>四、域功能级别和林功能级别</h4><p><strong>AD DS将域与林划分为不同的功能级别，每个级别各有不同的功能与限制</strong></p>
<h5 id="1、域功能级别"><a href="#1、域功能级别" class="headerlink" title="1、域功能级别"></a>1、域功能级别</h5><ul>
<li>会受早期域控制器（操作系统）版本影响</li>
<li>只会影响到该域，不会影响到其他域</li>
</ul>
<h5 id="2、林功能级别"><a href="#2、林功能级别" class="headerlink" title="2、林功能级别"></a>2、林功能级别</h5><ul>
<li>会受域功能级别影响</li>
<li>会影响到该林的所有域</li>
</ul>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202203202350445.png" alt="image-20220320235036372"></p>
<h4 id="五、部署Windows域"><a href="#五、部署Windows域" class="headerlink" title="五、部署Windows域"></a>五、部署Windows域</h4><h5 id="1、一台Windows-server-2016服务器（主域控）"><a href="#1、一台Windows-server-2016服务器（主域控）" class="headerlink" title="1、一台Windows server 2016服务器（主域控）"></a>1、一台Windows server 2016服务器（主域控）</h5><ul>
<li><p>server 配置固定IP</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202203202357800.png" alt="image-20220320235737747"></p>
</li>
<li><p>添加服务器角色（Active Directory域服务）</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202203202358381.png" alt="image-20220320235824328"></p>
</li>
<li><p>将 server 提升为域控制器</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202203210000414.png" alt="image-20220321000028362"></p>
</li>
<li><p>进行AD域服务配置</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202203210004392.png" alt="image-20220321000121062"></p>
<ul>
<li>部署配置：添加新林（网络中没有林也没有域）</li>
<li>域控制选项：域功能级别和林功能级别设定，域控制功能（一般情况下第一台域控制器都会安装DNS服务器，网络中第一台域控制一定是全局编录服务器（GC），目录服务器还原模式密码用于恢复活动目录数据时使用）</li>
<li>其他选项：NetBIOS域名一般为二级域名称（使用默认）</li>
<li>路径：活动目录数据库及日志存放位置</li>
<li>检查：无错误项即可安装</li>
</ul>
</li>
</ul>
<h5 id="2、一台Windows-10客户机"><a href="#2、一台Windows-10客户机" class="headerlink" title="2、一台Windows 10客户机"></a>2、一台Windows 10客户机</h5><ul>
<li><p>将客户机加入域</p>
<ul>
<li><p>为客户机配置正确的DNS服务器（输入的DNS服务器的IP，而不是域控制器的IP）这里域控制器和DNS为同一台</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202203210019532.png" alt="image-20220321001913456"></p>
</li>
<li><p>根据提示，需要输入一个有权限加入该域的帐户的名称和密码（域用户，普通用户或域管理员都可）</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202203210023200.png" alt="image-20220321002323094"></p>
</li>
</ul>
</li>
</ul>
<h5 id="3、一台Windows-server-2016服务器（额外域控）"><a href="#3、一台Windows-server-2016服务器（额外域控）" class="headerlink" title="3、一台Windows server 2016服务器（额外域控）"></a>3、一台Windows server 2016服务器（额外域控）</h5><ul>
<li><p>server 配置固定IP并将DNS服务器地址指向DNS服务器</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202203210027201.png" alt="image-20220321002706155"></p>
</li>
<li><p>添加服务器角色（Active Directory域服务）</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202203210027541.png" alt="image-20220320235824328"></p>
</li>
<li><p>将 server 提升为域控制器</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202203210027484.png" alt="image-20220321000028362"></p>
</li>
<li><p>进行AD域服务配置</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202203210031781.png" alt="image-20220321003146684"></p>
<ul>
<li>域控制选项<ul>
<li>DNS服务器（可选）</li>
<li>全局编录：域中已有一台GC（可选）</li>
<li>只读域控制器：RODC中的目录数据库为只读</li>
<li>站点：默认</li>
<li>目录服务还原模式密码</li>
</ul>
</li>
</ul>
</li>
<li><p>验证：在主域控上创建对象，在辅助域控上查看对象</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202203210047043.png" alt="image-20220321004719979"></p>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/10/22/windiws%E6%93%8D%E4%BD%9C-%E8%BF%9B%E9%98%B6%E7%89%88%EF%BC%88windows-denfender%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="鹿祁">
      <meta itemprop="description" content="心有希冀，目有繁星，追光而遇，沐光而行">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="鹿鹿祁">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/22/windiws%E6%93%8D%E4%BD%9C-%E8%BF%9B%E9%98%B6%E7%89%88%EF%BC%88windows-denfender%EF%BC%89/" class="post-title-link" itemprop="url">windiws操作-进阶版（windows denfender）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-10-22 22:06:34 / 修改时间：22:19:46" itemprop="dateCreated datePublished" datetime="2023-10-22T22:06:34+08:00">2023-10-22</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="一、图形化操作"><a href="#一、图形化操作" class="headerlink" title="一、图形化操作"></a>一、图形化操作</h4><h5 id="1、打开防火墙"><a href="#1、打开防火墙" class="headerlink" title="1、打开防火墙"></a>1、打开防火墙</h5><p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202202231715966.png" alt="image-20220223171535864"></p>
<h5 id="2、启用或关闭防火墙"><a href="#2、启用或关闭防火墙" class="headerlink" title="2、启用或关闭防火墙"></a>2、启用或关闭防火墙</h5><p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112080737781.png" alt="image-20211208073733731"></p>
<h5 id="3、允许应用"><a href="#3、允许应用" class="headerlink" title="3、允许应用"></a>3、允许应用</h5><p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202202231717875.png" alt="image-20220223171709821"></p>
<h5 id="4、添加入站和出站规则"><a href="#4、添加入站和出站规则" class="headerlink" title="4、添加入站和出站规则"></a>4、添加入站和出站规则</h5><p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202202231719420.png" alt="image-20220223171915326"></p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202202231718826.png" alt="image-20220223171848728"></p>
<h4 id="二、命令行操作"><a href="#二、命令行操作" class="headerlink" title="二、命令行操作"></a>二、命令行操作</h4><h5 id="1、语法规则"><a href="#1、语法规则" class="headerlink" title="1、语法规则"></a>1、语法规则</h5><p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/zh-cn/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/dd734783(v=ws.10)?redirectedfrom=MSDN">https://docs.microsoft.com/zh-cn/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/dd734783(v=ws.10)?redirectedfrom=MSDN</a></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">c:\&gt;netsh advfirewall firewall此上下文中的命令:?              - 显示命令列表。add            - 添加新入站或出站防火墙规则。delete         - 删除所有匹配的防火墙规则。dump           - 显示一个配置脚本。help           - 显示命令列表。set            - 为现有规则的属性设置新值。show           - 显示指定的防火墙规则。</span><br></pre></td></tr></table></figure>

<h5 id="2、基本操作"><a href="#2、基本操作" class="headerlink" title="2、基本操作"></a>2、基本操作</h5><ul>
<li><p>启用和关闭Windows Defender高级安全防火墙</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netsh advfirewall set allprofiles state on            #开启netsh advfirewall set allprofiles state off            #关闭</span><br></pre></td></tr></table></figure>
</li>
<li><p>查询防火墙规则</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netsh advfirewall firewall show rule name=all</span><br></pre></td></tr></table></figure>
</li>
<li><p>还原默认策略（重置防火墙）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netsh advfirewall reset</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置日志记录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netsh advfirewall set currentprofile logging filename &quot;C:\temp\pfirewall.log&quot;</span><br></pre></td></tr></table></figure>
</li>
<li><p>导出和导入防火墙设置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netsh advfirewall export &quot;C:\temp\WFconfiguration.wfw&quot;            #导出netsh advfirewall import &quot;C:\temp\WFconfiguration.wfw&quot;             #导入</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="3、创建入站或出站规则"><a href="#3、创建入站或出站规则" class="headerlink" title="3、创建入站或出站规则"></a>3、创建入站或出站规则</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">c:\&gt;netsh advfirewall firewall add rule用法: add rule name=&lt;string&gt;                    #规则名称      dir=in|out                            #指定入站或出站      action=allow|block|bypass                #指定动作（允许连接、阻止连接、只允许安全连接）      [program=&lt;program path&gt;]                #指定程序路径      [service=&lt;service short name&gt;|any]    #指定服务名称或所有服务      [description=&lt;string&gt;]                #指定描述      [enable=yes|no (default=yes)]            #是否启用策略，默认为启用      [profile=public|private|domain|any[,...]]        #指定应用网络场景（公共网络、专用网络、域环境网络、所有....）      [localip=any|&lt;IPv4 address&gt;|&lt;IPv6 address&gt;|&lt;subnet&gt;|&lt;range&gt;|&lt;list&gt;]    #指定本地IP      [remoteip=any|localsubnet|dns|dhcp|wins|defaultgateway|                #指定目标IP         &lt;IPv4 address&gt;|&lt;IPv6 address&gt;|&lt;subnet&gt;|&lt;range&gt;|&lt;list&gt;]      [localport=0-65535|&lt;port range&gt;[,...]|RPC|RPC-EPMap|IPHTTPS|any (default=any)]    #指定本地端口      [remoteport=0-65535|&lt;port range&gt;[,...]|any (default=any)]                            #指定远程端口      [protocol=0-255|icmpv4|icmpv6|icmpv4:type,code|icmpv6:type,code|                    #指定协议         tcp|udp|any (default=any)]      [interfacetype=wireless|lan|ras|any]                                    #指定接口类型（无线、局域网、远程访问、所有）      [rmtcomputergrp=&lt;SDDL string&gt;]                                        #远程计算机组      [rmtusrgrp=&lt;SDDL string&gt;]                                                #远程用户组      [edge=yes|deferapp|deferuser|no (default=no)]                            #Edge 只能为入站规则指定      [security=authenticate|authenc|authdynenc|authnoencap|notrequired        #         (default=notrequired)]</span><br><span class="line">#举例netsh advfirewall firewall add rule name=&quot;All ICMP V4&quot; dir=in action=allow protocol=icmpv4        #允许所有ICMP4协议入站netsh advfirewall firewall add rule name=&quot;Open SQL Server Port 1433&quot; dir=in action=allow protocol=TCP localport=1433    #允许从1433端口入站netsh advfirewall firewall add rule name=&quot;My Application&quot; dir=in action=allow program=&quot;C:\MyApp\MyApp.exe&quot;    #允许某个应用程序netsh advfirewall firewall add rule name=&quot;remote desktop&quot; dir=in action=allow service=&quot;TermService&quot;            #允许远程桌面服务</span><br></pre></td></tr></table></figure>

<h5 id="4、删除规则"><a href="#4、删除规则" class="headerlink" title="4、删除规则"></a>4、删除规则</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">c:\&gt;netsh advfirewall firewall delete rule用法: delete rule name=&lt;string&gt;      [dir=in|out]      [profile=public|private|domain|any[,...]]      [program=&lt;program path&gt;]      [service=&lt;service short name&gt;|any]      [localip=any|&lt;IPv4 address&gt;|&lt;IPv6 address&gt;|&lt;subnet&gt;|&lt;range&gt;|&lt;list&gt;]      [remoteip=any|localsubnet|dns|dhcp|wins|defaultgateway|         &lt;IPv4 address&gt;|&lt;IPv6 address&gt;|&lt;subnet&gt;|&lt;range&gt;|&lt;list&gt;]      [localport=0-65535|&lt;port range&gt;[,...]|RPC|RPC-EPMap|any]      [remoteport=0-65535|&lt;port range&gt;[,...]|any]      [protocol=0-255|icmpv4|icmpv6|icmpv4:type,code|icmpv6:type,code|         tcp|udp|any]</span><br><span class="line">举例：netsh advfirewall firewall delete rule name=&quot;remote desktop&quot;</span><br></pre></td></tr></table></figure>

<h5 id="5、修改规则"><a href="#5、修改规则" class="headerlink" title="5、修改规则"></a>5、修改规则</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">c:\&gt;netsh advfirewall firewall set rule用法: set rule      group=&lt;string&gt; | name=&lt;string&gt;      [dir=in|out]      [profile=public|private|domain|any[,...]]      [program=&lt;program path&gt;]      [service=service short name|any]      [localip=any|&lt;IPv4 address&gt;|&lt;IPv6 address&gt;|&lt;subnet&gt;|&lt;range&gt;|&lt;list&gt;]      [remoteip=any|localsubnet|dns|dhcp|wins|defaultgateway|         &lt;IPv4 address&gt;|&lt;IPv6 address&gt;|&lt;subnet&gt;|&lt;range&gt;|&lt;list&gt;]      [localport=0-65535|&lt;port range&gt;[,...]|RPC|RPC-EPMap|IPHTTPS|any]      [remoteport=0-65535|&lt;port range&gt;[,...]|any]      [protocol=0-255|icmpv4|icmpv6|icmpv4:type,code|icmpv6:type,code|         tcp|udp|any]      new      [name=&lt;string&gt;]      [dir=in|out]      [program=&lt;program path&gt;      [service=&lt;service short name&gt;|any]      [action=allow|block|bypass]      [description=&lt;string&gt;]      [enable=yes|no]      [profile=public|private|domain|any[,...]]      [localip=any|&lt;IPv4 address&gt;|&lt;IPv6 address&gt;|&lt;subnet&gt;|&lt;range&gt;|&lt;list&gt;]      [remoteip=any|localsubnet|dns|dhcp|wins|defaultgateway|         &lt;IPv4 address&gt;|&lt;IPv6 address&gt;|&lt;subnet&gt;|&lt;range&gt;|&lt;list&gt;]      [localport=0-65535|RPC|RPC-EPMap|any[,...]]      [remoteport=0-65535|any[,...]]      [protocol=0-255|icmpv4|icmpv6|icmpv4:type,code|icmpv6:type,code|         tcp|udp|any]      [interfacetype=wireless|lan|ras|any]      [rmtcomputergrp=&lt;SDDL string&gt;]      [rmtusrgrp=&lt;SDDL string&gt;]      [edge=yes|deferapp|deferuser|no (default=no)]      [security=authenticate|authenc|authdynenc|notrequired]</span><br><span class="line">举例：netsh advfirewall firewall set rule group=&quot;远程桌面&quot; new enable=yes    #将组名为“远程桌面”的策略全部启用</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/10/22/windiws%E6%93%8D%E4%BD%9C-%E8%BF%9B%E9%98%B6%E7%89%88%EF%BC%88%E9%98%B2%E7%81%AB%E5%A2%99%E5%9F%BA%E7%A1%80%E4%BB%A5%E5%8F%8A%E6%93%8D%E4%BD%9C%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="鹿祁">
      <meta itemprop="description" content="心有希冀，目有繁星，追光而遇，沐光而行">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="鹿鹿祁">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/22/windiws%E6%93%8D%E4%BD%9C-%E8%BF%9B%E9%98%B6%E7%89%88%EF%BC%88%E9%98%B2%E7%81%AB%E5%A2%99%E5%9F%BA%E7%A1%80%E4%BB%A5%E5%8F%8A%E6%93%8D%E4%BD%9C%EF%BC%89/" class="post-title-link" itemprop="url">windiws操作-进阶版（防火墙基础以及操作）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-10-22 22:06:22 / 修改时间：22:18:28" itemprop="dateCreated datePublished" datetime="2023-10-22T22:06:22+08:00">2023-10-22</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ol>
<li><h4 id="一、防火墙介绍"><a href="#一、防火墙介绍" class="headerlink" title="一、防火墙介绍"></a>一、防火墙介绍</h4></li>
</ol>
<h5 id="1、概述"><a href="#1、概述" class="headerlink" title="1、概述"></a>1、概述</h5><ul>
<li>防火墙技术是通过有机结合各类用于安全管理与筛选的软件和硬件设备，帮助计算机网络于其内、外网之间构建一道相对隔绝的保护屏障，以保护用户资料与信息安全性的一种技术。</li>
<li>在实际应用中，由于公网地址的不足，我们多数是在企业网中使用局部私网也就是局域网，所以整个局域网的安全最重要的就是在私网和公网交界的地方，也就是网络出口出的设备上。因此我们一般在网络出口安放防火墙来保护整个局域网的边界安全。</li>
<li>防火墙，顾名思义，阻挡的是火，此词起源于建筑领域，正是用来隔离火灾，阻止火势从一个区域蔓延到另一个区域。</li>
<li>引入到通信领域，防火墙也正是形象化地体现了这一特点：防火墙这一具体设备，通常用于两个网络之间的隔离。当然，这种隔离是高明的，隔离的是“火”的蔓延，而又保证“人”的穿墙而过。这里的“火”是指网络中的各种攻击，而“人”是指正常的通信报文。</li>
<li>那么，用通信语言来定义，防火墙主要用于保护一个网络区域免受来自另一个网络区域的网络攻击和网络入侵行为。因其隔离、防守的属性，灵活应用于网络边界、子网隔离等位置，具体如企业网络出口、大型网络内部子网隔离、数据中心边界等等。</li>
</ul>
<h5 id="2、分类"><a href="#2、分类" class="headerlink" title="2、分类"></a>2、分类</h5><ul>
<li>物理特性划分<ul>
<li>软件防火墙（Windows Defender、Linux iptables、Linux firewalld等等）</li>
<li>硬件防火墙（Cisco ASA、深信服AF、天清汉马T系列防火墙（启明星辰）、明御安全网关（安恒）等等）</li>
</ul>
</li>
<li>性能划分：百兆级、千兆级、万兆级等等</li>
<li>结构划分：单一主机防火墙、路由集成防火墙、分布式防火墙等等</li>
<li>技术划分：包过滤、应用代理、状态检测等等</li>
</ul>
<h5 id="3、防火墙功能（常见功能）"><a href="#3、防火墙功能（常见功能）" class="headerlink" title="3、防火墙功能（常见功能）"></a>3、防火墙功能（常见功能）</h5><ul>
<li>访问控制（防火墙是一种高级的访问控制设备）</li>
<li>地址转换（都会部署在内外网之间，尤其是互联网出口，因此会涉及到地址转换问题）</li>
<li>网络环境支持（2层或3层之间的内部连接，DHCP环境、动态路由环境、VLAN环境、ADSL拨号环境、SNMP网络管理环境）</li>
<li>带宽管理QOS（可以根据业务进行不同的流量分配，以保证重要业务的应用）</li>
<li>入侵检测和攻击防御</li>
<li>用户认证 （多种用户认证方式）</li>
<li>高可用性 （双机、多机&#x2F;冷备、热备）</li>
</ul>
<h5 id="4、防火墙策略"><a href="#4、防火墙策略" class="headerlink" title="4、防火墙策略"></a>4、防火墙策略</h5><p><strong>防火墙的本质是控制和防护，防火墙的工作原理是通过设置安全策略，来进行安全防护</strong></p>
<ul>
<li><p>定义：安全策略是按一定规则，控制设备对流量转发以及对流量进行内容安全一体化检测的策略。规则的本质是包过滤</p>
</li>
<li><p>应用：对跨防火墙的网络互访进行控制，对设备本身的访问进行控制</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112080733063.png" alt="image-20211208073325012"></p>
</li>
</ul>
<h4 id="二、防火墙发展"><a href="#二、防火墙发展" class="headerlink" title="二、防火墙发展"></a>二、防火墙发展</h4><h5 id="1、包过滤防火墙"><a href="#1、包过滤防火墙" class="headerlink" title="1、包过滤防火墙"></a>1、包过滤防火墙</h5><ul>
<li><p>判断信息：数据包的源IP地址、目的IP地址、协议类型、源端口、目的端口（五元组）</p>
</li>
<li><p>工作范围：网络层、传输层（3-4层）</p>
</li>
<li><p>和路由器的区别：普通的路由器只检查数据包的目标地址，并选择一个达到目的地址的最佳路径。防火墙除了要决定目的路径以外还需要根据已经设定的规则进行判断“是与否”。</p>
</li>
<li><p>技术应用：包过滤技术</p>
</li>
<li><p>优势：对于小型站点容易实现，处理速度快，价格便宜</p>
</li>
<li><p>劣势：规则表很快会变得庞大复杂难运维，只能基于五元组</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112080712341.png" alt="image-20211208071212773"></p>
</li>
</ul>
<h5 id="2、应用代理防火墙"><a href="#2、应用代理防火墙" class="headerlink" title="2、应用代理防火墙"></a>2、应用代理防火墙</h5><ul>
<li><p>判断信息：所有应用层的信息包</p>
</li>
<li><p>工作范围：应用层（7层）</p>
</li>
<li><p>和包过滤防火墙的区别：包过滤防火墙工作基于3-4层，通过检验报头进行规则表匹配。应用代理防火墙工作7层，检查所有的应用层信息包，每个应用需要添加对应的代理服务。</p>
</li>
<li><p>技术应用：应用代理技术</p>
</li>
<li><p>优势：检查了应用层的数据</p>
</li>
<li><p>劣势：检测效率低，配置运维难度极高，可伸缩性差</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112080713612.png" alt="image-20211208071345408"></p>
</li>
</ul>
<h5 id="3、状态检测防火墙"><a href="#3、状态检测防火墙" class="headerlink" title="3、状态检测防火墙"></a>3、状态检测防火墙</h5><ul>
<li><p>判断信息：IP地址、端口号、TCP标记</p>
</li>
<li><p>工作范围：数据链路层、网络层、传输层（2-4层）</p>
</li>
<li><p>和包过滤防火墙的区别：包过滤防火墙工作基于3-4层，通过检验报头进行规则表匹配。是包过滤防火墙的升级版，一次检查建立会话表，后期直接按会话表放行。</p>
</li>
<li><p>技术应用：状态检测技术</p>
</li>
<li><p>优势：主要检查3-4层能够保证效率，对TCP防御较好</p>
</li>
<li><p>劣势：应用层控制较弱，不检查数据区</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112080714950.png" alt="image-20211208071433802"></p>
</li>
</ul>
<h5 id="4、Web应用防火墙（WAF）"><a href="#4、Web应用防火墙（WAF）" class="headerlink" title="4、Web应用防火墙（WAF）"></a>4、Web应用防火墙（WAF）</h5><ul>
<li><p>判断信息：http协议数据的request和response</p>
</li>
<li><p>工作范围：应用层（7层）</p>
</li>
<li><p>目的：防止基于应用层的攻击影响Web应用系统</p>
</li>
<li><p>主要技术原理：</p>
<ul>
<li>代理服务：会话双向代理，用户与服务器不产生直接链接，对于DDOS攻击可以抑制</li>
<li>特征识别：通过正则表达式的特征库进行特征识别</li>
<li>算法识别：针对攻击方式进行模式化识别，如SQL注入、DDOS、XSS等</li>
</ul>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112080716800.png" alt="image-20211208071609641"></p>
</li>
</ul>
<h5 id="5、多合一安全网关（UTM）"><a href="#5、多合一安全网关（UTM）" class="headerlink" title="5、多合一安全网关（UTM）"></a>5、多合一安全网关（UTM）</h5><ul>
<li><p>包含功能：FW（防火墙）、IDS（入侵检测）、IPS（入侵防御）、AV（防病毒）</p>
</li>
<li><p>工作范围：2-7层（但是不具备web应用防护能力）</p>
</li>
<li><p>目的：将多种安全问题通过一台设备解决</p>
</li>
<li><p>优点：功能多合一有效降低了硬件成本、人力成本、时间成本</p>
</li>
<li><p>缺点：模块串联检测效率低，性能消耗大</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112080717751.png" alt="image-20211208071727685"></p>
</li>
</ul>
<h5 id="6、下一代防火墙（NGFW）"><a href="#6、下一代防火墙（NGFW）" class="headerlink" title="6、下一代防火墙（NGFW）"></a>6、下一代防火墙（NGFW）</h5><ul>
<li><p>包含功能：FW、IDS、IPS、AV、WAF</p>
</li>
<li><p>工作范围：2-7层</p>
</li>
<li><p>和UTM的区别：与UTM相比增加的web应用防护功能；UTM是串行处理机制，NGFW是并行处理机制；NGFW的性能更强，管理更高效</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112080718572.png" alt="image-20211208071853524"></p>
</li>
</ul>
<h4 id="三、常见防火墙"><a href="#三、常见防火墙" class="headerlink" title="三、常见防火墙"></a>三、常见防火墙</h4><h5 id="1、Windows-defender"><a href="#1、Windows-defender" class="headerlink" title="1、Windows defender"></a>1、Windows defender</h5><ul>
<li>微软官方出品，对于 Windows 的兼容性有着独一无二的优势，只防御真正的威胁，而不会误杀善意软件。</li>
<li>基于云的技术，病毒库高度整合，更新速度极快，能够防御和查杀最新的威胁。</li>
<li>简约不简单，界面友好，无任何多余花哨功能，专注杀毒防护。</li>
<li>系统资源占用低，采用最新的防御技术，查杀率高。</li>
<li>默认内置于Windows vista及之后Windows操作系统</li>
</ul>
<h5 id="2、iptables"><a href="#2、iptables" class="headerlink" title="2、iptables"></a>2、iptables</h5><ul>
<li>IPTABLES 是与最新的 3.5 版本 Linux 内核集成的 IP 信息包过滤系统。如果 Linux 系统连接到因特网或 LAN、服务器或连接 LAN 和因特网的代理服务器， 则该系统有利于在 Linux 系统上更好地控制 IP 信息包过滤和防火墙配置。</li>
<li>防火墙在做数据包过滤决定时，有一套遵循和组成的规则，这些规则存储在专用的数据包过滤表中，而这些表集成在 Linux 内核中。在数据包过滤表中，规则被分组放在我们所谓的链（chain）中。而netfilter&#x2F;iptables IP 数据包过滤系统是一款功能强大的工具，可用于添加、编辑和移除规则。</li>
</ul>
<h5 id="3、firewalld"><a href="#3、firewalld" class="headerlink" title="3、firewalld"></a>3、firewalld</h5><ul>
<li>Firewalld自CentOS 7及更新版本后作为默认防火墙管理工具</li>
<li>Firewalld 提供动态管理的防火墙，支持定义网络连接或接口的信任级别的网络&#x2F;防火墙区域。它支持 IPv4、IPv6 防火墙设置、以太网桥和 IP 集。运行时和永久配置选项是分开的。它还为服务或应用程序提供直接添加防火墙规则的接口。</li>
<li><a target="_blank" rel="noopener" href="https://firewalld.org/">https://firewalld.org/</a></li>
</ul>
<h5 id="4、思科Secure-防火墙"><a href="#4、思科Secure-防火墙" class="headerlink" title="4、思科Secure 防火墙"></a>4、思科Secure 防火墙</h5><ul>
<li><a target="_blank" rel="noopener" href="https://www.cisco.com/c/zh_cn/products/security/firewalls/index.html">https://www.cisco.com/c/zh_cn/products/security/firewalls/index.html</a></li>
</ul>
<h5 id="5、深信服下一代防火墙（AF）"><a href="#5、深信服下一代防火墙（AF）" class="headerlink" title="5、深信服下一代防火墙（AF）"></a>5、深信服下一代防火墙（AF）</h5><ul>
<li>深信服下一代防火墙AF融合边界对抗威胁所需的专业安全能力，通过简单易用的方式交付，全面防护各类威胁，并具备多重智能模型和智能联动手段，可持续对抗不断出现的各类新风险。</li>
<li><a target="_blank" rel="noopener" href="https://www.sangfor.com.cn/product-and-solution/sangfor-security/22">https://www.sangfor.com.cn/product-and-solution/sangfor-security/22</a></li>
</ul>
<h5 id="6、启明星辰天清汉马T系列防火墙"><a href="#6、启明星辰天清汉马T系列防火墙" class="headerlink" title="6、启明星辰天清汉马T系列防火墙"></a>6、启明星辰天清汉马T系列防火墙</h5><ul>
<li>天清汉马T系列防火墙采用启明星辰领先的VSOS操作系统，通过多核并行化处理、特征库树形存储、流扫描处理、零拷贝、分布式T比特硬件平台等技术手段，实现了整个处理过程一次拆包，确保天清汉马T系列防火墙开启多重防护功能后依然能够保证高速度、低时延的安全防护。</li>
<li><a target="_blank" rel="noopener" href="https://www.venustech.com.cn/new_type/xydfhq/">https://www.venustech.com.cn/new_type/xydfhq/</a></li>
</ul>
<h5 id="7、明御安全网关"><a href="#7、明御安全网关" class="headerlink" title="7、明御安全网关"></a>7、明御安全网关</h5><ul>
<li>全流程防御体系<ul>
<li>事前感知预警（资产识别、风险识别、策略评估、热点威胁事件）</li>
<li>事中防护响应（L2-4防护、入侵防御、病毒防护、协同防御）</li>
<li>持续检测分析（精准告警、运营报表、威胁情报检测）</li>
<li>事后取证优化（攻击链分析、资产画像、日志报表、抓包取证）</li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://www.dbappsecurity.com.cn/product/cloud151.html">https://www.dbappsecurity.com.cn/product/cloud151.html</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/10/22/%E6%B5%81%E9%87%8F%E6%94%BB%E5%87%BB-%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE%EF%BC%88%E9%82%AE%E4%BB%B6%E6%94%B6%E5%8F%91%E5%8D%8F%E8%AE%AE%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="鹿祁">
      <meta itemprop="description" content="心有希冀，目有繁星，追光而遇，沐光而行">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="鹿鹿祁">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/22/%E6%B5%81%E9%87%8F%E6%94%BB%E5%87%BB-%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE%EF%BC%88%E9%82%AE%E4%BB%B6%E6%94%B6%E5%8F%91%E5%8D%8F%E8%AE%AE%EF%BC%89/" class="post-title-link" itemprop="url">流量攻击-应用层协议（邮件收发协议）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-10-22 22:04:55 / 修改时间：22:32:09" itemprop="dateCreated datePublished" datetime="2023-10-22T22:04:55+08:00">2023-10-22</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="一、电子邮件系统"><a href="#一、电子邮件系统" class="headerlink" title="一、电子邮件系统"></a>一、电子邮件系统</h4><h5 id="1、概述"><a href="#1、概述" class="headerlink" title="1、概述"></a>1、概述</h5><ul>
<li>电子邮件是—种用电子手段提供信息交换的通信方式，是互联网应用最广的服务。通过网络的电子邮件系统，用户可以以非常低廉的价格（不管发送到哪里，都只需负担网费）、非常快速的方式（几秒钟之内可以发送到世界上任何指定的目的地），与世界上任何一个角落的网络用户联系</li>
<li>电子邮件（简称E-mail）又称电子信箱，是一种用电子手段提供交换的通信方式，这种非即时交互式的通信，加速了信息的交流及数据的传送</li>
<li>电子邮件可以是文字、图像、声音等多种形式</li>
</ul>
<h5 id="2、电子邮件优势"><a href="#2、电子邮件优势" class="headerlink" title="2、电子邮件优势"></a>2、电子邮件优势</h5><ul>
<li>成本低廉</li>
<li>内容多样化</li>
<li>传送快速</li>
<li>安全性高</li>
</ul>
<h5 id="3、电子邮件系统组成"><a href="#3、电子邮件系统组成" class="headerlink" title="3、电子邮件系统组成"></a>3、电子邮件系统组成</h5><ul>
<li><p>MUA:邮件用户代理</p>
</li>
<li><p>MTA:邮件传输代理</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112060045625.png" alt="image-20210804141024098"></p>
</li>
</ul>
<h5 id="4、常见的邮件协议"><a href="#4、常见的邮件协议" class="headerlink" title="4、常见的邮件协议"></a>4、常见的邮件协议</h5><ul>
<li>SMTP：简单邮件传输协议，默认端口号 25，主要用于传输电子邮件（一般用于发送邮件）</li>
<li>POP3：邮局协议第3版，默认端口号 110，主要用于下载接收邮件（一般用于接收邮件）</li>
<li>IMAP4：网际消息访问协议第4版，默认端口号143，主要用于在线查看邮件（一般用于接收邮件）</li>
</ul>
<h5 id="5、常见的邮件系统"><a href="#5、常见的邮件系统" class="headerlink" title="5、常见的邮件系统"></a>5、常见的邮件系统</h5><ul>
<li>Exchange：微软公司出品，使用在Windows环境，图形化，操作简单</li>
<li>Postfix：GNU出品，使用在Unix或Linux环境，高效，稳定，安全</li>
<li>其他第三方邮件系统（例如：QQ、163等等）</li>
</ul>
<h5 id="6、常见的邮件客户端"><a href="#6、常见的邮件客户端" class="headerlink" title="6、常见的邮件客户端"></a>6、常见的邮件客户端</h5><ul>
<li>Foxmail</li>
<li>Outlook</li>
<li>网易邮箱大师</li>
<li>QQ邮箱</li>
<li>……………………</li>
</ul>
<h4 id="二、部署邮件系统（winmail）"><a href="#二、部署邮件系统（winmail）" class="headerlink" title="二、部署邮件系统（winmail）"></a>二、部署邮件系统（winmail）</h4><h5 id="1、实验环境"><a href="#1、实验环境" class="headerlink" title="1、实验环境"></a>1、实验环境</h5><ul>
<li>一台Windows server 2016上安装Winmail邮件服务端软件（IP：192.168.1.2）</li>
<li>一台 Windows 10 上安装Foxmail邮件客户端软件（IP：192.168.1.10）</li>
</ul>
<h5 id="2、实验步骤"><a href="#2、实验步骤" class="headerlink" title="2、实验步骤"></a>2、实验步骤</h5><ul>
<li><p>邮件服务器部署</p>
<ul>
<li><p>Windows server 2016上安装winmail邮件服务器系统</p>
<ul>
<li><p>安装</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112061059787.png" alt="image-20211206105915733"></p>
</li>
<li><p>配置</p>
<ul>
<li><p>创建域名</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112061101667.png" alt="image-20211206110134597"></p>
</li>
<li><p>创建对应邮箱账户</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112061102340.png" alt="image-20211206110246265"></p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>客户端部署</p>
<ul>
<li><p>Windows 10上安装Foxmail邮件客户端</p>
<ul>
<li>安装</li>
</ul>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112061050160.png" alt="image-20211206105033975"></p>
<ul>
<li><p>配置：添加账号，这里一个账号使用POP3协议，一个账号使用IMAP协议</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112061055676.png" alt="image-20211206105537612"></p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="三、邮件传输流量"><a href="#三、邮件传输流量" class="headerlink" title="三、邮件传输流量"></a>三、邮件传输流量</h4><h5 id="1、SMTP流量"><a href="#1、SMTP流量" class="headerlink" title="1、SMTP流量"></a>1、SMTP流量</h5><p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112070919292.png" alt="image-20211207091944150"></p>
<h5 id="2、POP3流量"><a href="#2、POP3流量" class="headerlink" title="2、POP3流量"></a>2、POP3流量</h5><p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112061133035.png" alt="image-20211206113324968"></p>
<h5 id="3、IMAP4流量"><a href="#3、IMAP4流量" class="headerlink" title="3、IMAP4流量"></a>3、IMAP4流量</h5><p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112061131136.png" alt="image-20211206113117048"></p>
<h4 id="四、SMTP状态码"><a href="#四、SMTP状态码" class="headerlink" title="四、SMTP状态码"></a>四、SMTP状态码</h4><table>
<thead>
<tr>
<th align="left">状态码</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">211</td>
<td align="left">System status, or system help reply 系统状态或显示系统帮助。</td>
</tr>
<tr>
<td align="left">214</td>
<td align="left">Help message 显示系统帮助，通常用于显示非标准命令的帮助。</td>
</tr>
<tr>
<td align="left">220</td>
<td align="left">Service ready 服务就绪。</td>
</tr>
<tr>
<td align="left">221</td>
<td align="left">Service closing transmission channel 服务关闭了传输通道。</td>
</tr>
<tr>
<td align="left">250</td>
<td align="left">Requested mail action okay, completed 所要求的邮件动作完成，可以继续邮件对话。 通常在EHLO&#x2F;HELO命令后会通过“250-”来描述服务器所支持的特性。</td>
</tr>
<tr>
<td align="left">251</td>
<td align="left">User not local; will forward to 收件人非本地用户，将转发到 。</td>
</tr>
<tr>
<td align="left">354</td>
<td align="left">Start mail input; end with . 开始接收邮件内容输入，以.(即单行一个点)结束输入。</td>
</tr>
<tr>
<td align="left">421</td>
<td align="left">Service not available, closing transmission channel 无法提供正常服务，关闭传输管道。 邮件保留在本地，可能会尝试重新投递。通常这种情况发生在服务器遇到问题，必须关闭传输。</td>
</tr>
<tr>
<td align="left">450</td>
<td align="left">Requested mail action not taken: mailbox unavailable 所要求的邮件动作无法执行：邮箱不可用。 邮件保留在本地，可能会尝试重新投递。通常这种情况发生在邮箱忙或被拒绝等。</td>
</tr>
<tr>
<td align="left">451</td>
<td align="left">Requested action aborted: local error in processing 要求动作中断：本地端发生错误。 邮件保留在本地，可能会尝试重新投递。通常这种情况发生在系统投递时遇到意外的错误。</td>
</tr>
<tr>
<td align="left">452</td>
<td align="left">Requested action not taken: insufficient system storage 要求动作无法执行：系统空间不足。 邮件保留在本地，可能会尝试重新投递。通常这种情况发生在邮箱限额满。</td>
</tr>
<tr>
<td align="left">500</td>
<td align="left">Syntax error, command unrecognized 命令格式错误，不可识别。当命令行太长时也会发生这样的错误。</td>
</tr>
<tr>
<td align="left">501</td>
<td align="left">Syntax error in parameters or arguments 命令参数错误。</td>
</tr>
<tr>
<td align="left">502</td>
<td align="left">Command not implemented 命令尚未实现。</td>
</tr>
<tr>
<td align="left">503</td>
<td align="left">Bad sequence of commands 错误的命令顺序。</td>
</tr>
<tr>
<td align="left">504</td>
<td align="left">Command parameter not implemented 命令的参数尚未实现。</td>
</tr>
<tr>
<td align="left">550</td>
<td align="left">Requested action not taken: mailbox unavailable 所要求动作无法执行：信箱不存在。不再尝试投递。</td>
</tr>
<tr>
<td align="left">551</td>
<td align="left">User not local; please try 收件人不属于本地用户，转发到。不再尝试投递。</td>
</tr>
<tr>
<td align="left">552</td>
<td align="left">Requested mail action aborted: exceeded storage allocation 所要求的动作中断：超出所分配的储存空间。不再尝试投递。</td>
</tr>
<tr>
<td align="left">553</td>
<td align="left">Requested action not taken: mailbox name not allowed 所要求的动作未执行：不接受该信箱。 通常发生在邮件地址错误、被作为垃圾邮件拒收。不再尝试投递。</td>
</tr>
<tr>
<td align="left">554</td>
<td align="left">Transaction failed 传输失败。</td>
</tr>
</tbody></table>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/10/22/%E6%B5%81%E9%87%8F%E6%94%BB%E5%87%BB-%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE%EF%BC%88https%E5%8D%8F%E8%AE%AE%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="鹿祁">
      <meta itemprop="description" content="心有希冀，目有繁星，追光而遇，沐光而行">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="鹿鹿祁">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/22/%E6%B5%81%E9%87%8F%E6%94%BB%E5%87%BB-%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE%EF%BC%88https%E5%8D%8F%E8%AE%AE%EF%BC%89/" class="post-title-link" itemprop="url">流量攻击-应用层协议（https协议）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-10-22 22:04:35 / 修改时间：22:31:42" itemprop="dateCreated datePublished" datetime="2023-10-22T22:04:35+08:00">2023-10-22</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="一、HTTPS协议"><a href="#一、HTTPS协议" class="headerlink" title="一、HTTPS协议"></a>一、HTTPS协议</h4><h5 id="1、简介"><a href="#1、简介" class="headerlink" title="1、简介"></a>1、简介</h5><ul>
<li>HTTPS （全称：Hyper Text Transfer Protocol over SecureSocket Layer），是以安全为目标的 HTTP 通道，在HTTP的基础上通过传输加密和身份认证保证了传输过程的安全性 。HTTPS 在HTTP 的基础下加入SSL，HTTPS 的安全基础是 SSL，因此加密的详细内容就需要 SSL。 HTTPS 存在不同于 HTTP 的默认端口及一个加密&#x2F;身份验证层（在 HTTP与 TCP 之间）。这个系统提供了身份验证与加密通讯方法。它被广泛用于万维网上安全敏感的通讯，例如交易支付等方面</li>
</ul>
<h5 id="2、TLS"><a href="#2、TLS" class="headerlink" title="2、TLS"></a>2、TLS</h5><ul>
<li>传输层安全协议，TLS1.0与SSL3.0保持一致，目前常用版本TLS1.2</li>
<li>设计目标：<ul>
<li>保密性：通过加密encryption实现，所有信息都加密传输，第三方无法窃听</li>
<li>完整性：通过MAC校验机制，一旦被篡改，通信双方会立刻发现</li>
<li>认证：双方认证，双方都可以配备证书，防止身份被冒充</li>
<li>互操作、通用性：根据公开的RFC（互联网工程任务组（IETF）发布的一系列备忘录），任何符合RFC的软件实现都可以互操作，不受限于任何专利技术</li>
<li>可扩展性：通过扩展机制TLS_Ext可以添加功能，有大量的新功能，都是通过扩展添加的</li>
<li>高效率：通过session cache，恰当部署cache之后，TLS的效率很高</li>
</ul>
</li>
<li>发展历史<ul>
<li>1995年，SSL 2.0</li>
<li>1996年，SSL 3.0</li>
<li>1999年，TLS 1.0</li>
<li>2006年，TLS 1.1</li>
<li>2008年，TLS 1.2</li>
<li>2015年之后，TLS 1.3</li>
</ul>
</li>
</ul>
<h5 id="2、HTTP的缺点"><a href="#2、HTTP的缺点" class="headerlink" title="2、HTTP的缺点"></a>2、HTTP的缺点</h5><ul>
<li>HTTP的明文数据传输</li>
<li>HTTP在传输客户端请求和服务端响应时, 唯一的数据完整性检验就是在报文头部包含了本次传输数据的长度, 而对内容是否被篡改不作确认</li>
</ul>
<h5 id="3、HTTPS的改进"><a href="#3、HTTPS的改进" class="headerlink" title="3、HTTPS的改进"></a>3、HTTPS的改进</h5><ul>
<li>双向身份认证<ul>
<li>客户端和服务端在传输数据之前，会基于X.509（公钥证书的格式标准）对双方进行身份认证<ul>
<li>客户端发起 SSL 握手消息给服务端要求连接</li>
<li>服务端将证书发送给客户端</li>
<li>客户端检查服务端证书，确认是否由自己信任的证书签发机构签发。 如果不是，将是否继续通讯的决定权交给用户选择 ( 注意，这里将是一个安全缺陷 )。如果检查无误或者用户选择继续，则客户端认可服务端的身份</li>
<li>服务端要求客户端发送证书，并检查是否通过验证。失败则关闭连接，认证成功则从客户端证书中获得客户端的公钥，一般为1024位或者 2048位。到此，服务器客户端双方的身份认证结束，双方确保身份都是真实可靠的</li>
</ul>
</li>
</ul>
</li>
<li>数据传输的机密性<ul>
<li>客户端和服务端在开始传输数据之前，会协商传输过程需要使用的加密算法。 客户端发送协商请求给服务端, 其中包含自己支持的非对称加密的密钥交换算法 ( 一般是RSA), 数据签名摘要算法 ( 一般是SHA或者MD5) , 加密传输数据的对称加密算法 ( 一般是DES),以及加密密钥的长度。 服务端接收到消息之后，选中安全性最高的算法，并将选中的算法发送给客户端，完成协商。客户端生成随机的字符串，通过协商好的非对称加密算法，使用服务端的公钥对该字符串进行加密，发送给服务端。 服务端接收到之后，使用自己的私钥解密得到该字符串。在随后的数据传输当中，使用这个字符串作为密钥进行对称加密</li>
</ul>
</li>
</ul>
<h4 id="二、加密算法"><a href="#二、加密算法" class="headerlink" title="二、加密算法"></a>二、加密算法</h4><h5 id="1、对称加密算法"><a href="#1、对称加密算法" class="headerlink" title="1、对称加密算法"></a>1、对称加密算法</h5><ul>
<li>加密的密钥和解密的密钥相同</li>
</ul>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/20210803110500.png" alt="image-20210803110500840"></p>
<ul>
<li>对称算法的缺陷<ul>
<li>密钥传输风险<ul>
<li>发送方和接收方必须要使用一个安全的信道建立密钥。</li>
<li>但是消息传递的通信链路是不安全的</li>
</ul>
</li>
<li>密钥多难管理<ul>
<li>如果一个用户要和其他的所有N个用户通信，那么该用户需要同时保管N把对应的对称密钥。如果在拥有n个用户的网络中，每个用户都需要互相通信，那么整个网络中需要的密钥对数是n*（n-1）&#x2F;2，这种情况在一个中大型的企业中，比如一个拥有2000位员工的企业中，需约生成400万个对称密钥，并且每个对称密钥需要通过安全的信道传输，是很困难的</li>
</ul>
</li>
</ul>
</li>
<li>常见的对称加密算法<ul>
<li>DES&#x2F;3DES算法：DES加密采用的是分组加密的方法，使用56位密钥加密64位明文，最后产生64位密文。3DES用两个密钥对数据进行3次加密&#x2F;解密运算。</li>
<li>AES算法：AES为分组密码，分组密码也就是把明文分成一组一组的，每组长度相等，每次加密一组数据，直到加密完整个明文。高级加密标准，是下一代的加密算法标准，速度快，安全级别高，在21世纪AES 标准的一个实现是 Rijndael 算法。</li>
<li>RC系列算法</li>
<li>IDEA</li>
</ul>
</li>
</ul>
<h5 id="2、非对称加密算法"><a href="#2、非对称加密算法" class="headerlink" title="2、非对称加密算法"></a>2、非对称加密算法</h5><ul>
<li>加密和解密使用的是不同的密钥（公钥（公共密钥）、私钥），两个密钥之间存在着相互依存关系，用其中任一个密钥加密的信息只能用另一个密钥进行解密，即用公钥加密，用私钥解密就可以得到明文。（通信双方无需事先交换密钥就可进行保密通信）</li>
</ul>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/20210803110525.png" alt="image-20210803110525526"></p>
<ul>
<li>加密算法相对比较复杂，对于大规模数据进行加解密，过程比较影响效率</li>
<li>常见的非对称加密算法<ul>
<li>Elgamal：Elgamal由Taher Elgamal于1985年发明，其基础是Diffie-Hellman密钥交换算法，后者使通信双方能通过公开通信来推导出只有他们知道的密钥</li>
<li>RSA：由 RSA 公司发明，是一个支持变长密钥的公共密钥算法，需要加密的文件块的长度也是可变的，非对称算法</li>
<li>ECC</li>
<li>Rabin</li>
</ul>
</li>
</ul>
<h4 id="三、PKI体系"><a href="#三、PKI体系" class="headerlink" title="三、PKI体系"></a>三、PKI体系</h4><h5 id="1、PKI概念"><a href="#1、PKI概念" class="headerlink" title="1、PKI概念"></a>1、PKI概念</h5><ul>
<li>公钥基础设施（Public Key Infrastructure）<ul>
<li>通过使用<strong>公钥技术</strong>和<strong>数字签名</strong>来确保信息安全</li>
<li>由公钥加密技术、数字证书、CA、RA组成<ul>
<li>数字证书用于用户的身份验证。</li>
<li>认证机构CA是PKI的核心，负责管理PKI中所有用户（包括各种应用程序）的数字证书的生成、分发、验证和撤销。</li>
<li>RA（注册机构）接受用户的请求，负责将用户的有关申请信息存档备案，并存储在数据库中，等待审核，并将审核通过的证书请求发送给证书颁发机构。RA分担了CA的部分任务，使管理变得更方便。</li>
</ul>
</li>
</ul>
</li>
<li>公钥加密技术就是使用非对称加密算法进行加解密</li>
<li>PKI体系能够实现的功能<ul>
<li>身份验证：确认用户的身份标识。</li>
<li>数据完整性：确保数据在传输过程中没有被修改。</li>
<li>数据机密性：防止非授权用户获取数据。</li>
<li>操作的不可否认性：确保用户不能冒充其他用户的身份。</li>
</ul>
</li>
<li>身份认证技术<ul>
<li>身份认证：通过标识和鉴别用户的身份，防止攻击者假冒合法用户来获取访问权限。</li>
<li>身份认证技术：是在网络中确认操作者身份的过程而产生的有效解决方法。</li>
<li>应用场景：<ul>
<li>Alice先用Hash函数，生成信件的摘要（digest）。</li>
<li>Alice再使用自己的私钥，对这个摘要加密，生成”数字签名”（signature）</li>
<li>Alice将这个签名，附在信件下面，一起发给Bob</li>
<li>Bob收信后，取下数字签名，用Alice的公钥解密，得到信件的摘要。由此证明，这封信确实是Alice发出的。—-完成身份的验证</li>
<li>Bob再对信件本身使用Hash函数，将得到的结果，与上一步得到的摘要进行对比。如果两者一致，就证明这封信未被修改过。—完成数据完整性的验证</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/20210803145157.png" alt="image-20210803145157611"></p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/20210803145208.png" alt="image-20210803145208230"></p>
<h5 id="2、数字证书"><a href="#2、数字证书" class="headerlink" title="2、数字证书"></a>2、数字证书</h5><ul>
<li>证书用于保证密钥的合法性</li>
<li>证书的主体可以是用户、计算机、服务等</li>
<li>证书格式遵循X.509标准</li>
<li>数字证书包含信息<ul>
<li>使用者的公钥值</li>
<li>使用者标识信息（如名称和电子邮件地址）</li>
<li>有效期（证书的有效时间）</li>
<li>颁发者标识信息</li>
<li>颁发者的数字签名</li>
</ul>
</li>
<li>数字证书由权威公正的第三方机构即CA签发</li>
</ul>
<h5 id="3、数据安全传输案例"><a href="#3、数据安全传输案例" class="headerlink" title="3、数据安全传输案例"></a>3、数据安全传输案例</h5><ul>
<li>首先搞清楚一个问题：在这个传输案例中，Alice是发送方，Bob是接收方</li>
<li>第一步：Alice将原始数据通过hash算法得出信息摘要，使用<strong>Alice的私钥</strong>对信息摘要进行签名得到数字签名</li>
<li>第二步：Alice将原始信息和数字签名和自己的证书通过<strong>对称加密算法的密钥</strong>进行加密得到加密信息</li>
<li>第三步：Alice使用<strong>Bob的公钥</strong>对<strong>对称加密算法的密钥</strong>进行加密得到密钥信封</li>
<li>第四步：Alice将加密信息和密钥信封通过公网传输给Bob</li>
<li>第五步：Bob收到Alice发送的加密信息和密钥信封</li>
<li>第六步：Bob首先将密钥信封通过<strong>Bob的私钥</strong>进行解密得到<strong>对称加密算法的密钥</strong></li>
<li>第七步：Bob使用<strong>对称加密算法的密钥</strong>将加密信息进行解密得到原始信息、Alice的数字签名和Alice的证书</li>
<li>第八步：Bob使用相同的hash算法对原始信息进行计算得到信息摘要</li>
<li>第九步：Bob根据Alice的证书中<strong>Alice的公钥</strong>将Alice的数字前面进行解密得到Alice计算的信息摘要</li>
<li>第十步：Bob通过自己计算的信息摘要和Alice计算的信息摘要进行比对</li>
</ul>
<h5 id="“-class-x3D-”reference-link”-gt"><a href="#“-class-x3D-”reference-link”-gt" class="headerlink" title="“ class&#x3D;”reference-link”&gt;"></a>“ class&#x3D;”reference-link”&gt;<img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/20210803111913.png" alt="image-20210803111913163"></h5><h5 id="4、CA（Certificate-Authority，证书颁发机构）"><a href="#4、CA（Certificate-Authority，证书颁发机构）" class="headerlink" title="4、CA（Certificate Authority，证书颁发机构）"></a>4、CA（Certificate Authority，证书颁发机构）</h5><ul>
<li>CA的核心功能是颁发和管理数字证书</li>
<li>CA的作用<ul>
<li>处理证书申请</li>
<li>发放证书</li>
<li>更新证书</li>
<li>接受最终用户数字证书的查询、撤销</li>
<li>产生和发布证书吊销列表（CRL）</li>
<li>数字证书归档</li>
<li>密钥归档</li>
<li>历史数据归档</li>
</ul>
</li>
</ul>
<h4 id="四、部署证书服务器"><a href="#四、部署证书服务器" class="headerlink" title="四、部署证书服务器"></a>四、部署证书服务器</h4><h5 id="1、这里需要两台服务器（一台作为CA，一台作为web服务器）"><a href="#1、这里需要两台服务器（一台作为CA，一台作为web服务器）" class="headerlink" title="1、这里需要两台服务器（一台作为CA，一台作为web服务器）"></a>1、这里需要两台服务器（一台作为CA，一台作为web服务器）</h5><h5 id="2、服务器设置固定IP"><a href="#2、服务器设置固定IP" class="headerlink" title="2、服务器设置固定IP"></a>2、服务器设置固定IP</h5><ul>
<li>与网站服务器同一网段</li>
</ul>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/20210803154714.png" alt="image-20210803154714886"></p>
<h5 id="3、添加角色Active-Directory证书服务"><a href="#3、添加角色Active-Directory证书服务" class="headerlink" title="3、添加角色Active Directory证书服务"></a>3、添加角色Active Directory证书服务</h5><p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/20210803154839.png" alt="image-20210803154839342"></p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/20210803155000.png" alt="image-20210803155000546"></p>
<h5 id="4、配置角色服务"><a href="#4、配置角色服务" class="headerlink" title="4、配置角色服务"></a>4、配置角色服务</h5><p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/20210803155228.png" alt="image-20210803155228518"></p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/20210803155309.png" alt="image-20210803155309522"></p>
<h5 id="5、使用web服务器申请证书"><a href="#5、使用web服务器申请证书" class="headerlink" title="5、使用web服务器申请证书"></a>5、使用web服务器申请证书</h5><ul>
<li><p>打开web服务器管理器找到服务器证书</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/20210803155741.png" alt="image-20210803155741159"></p>
</li>
<li><p>创建证书申请</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/20210803155916.png" alt="image-20210803155916065"></p>
</li>
<li><p>提交证书申请</p>
<ul>
<li><p>访问证书服务器虚拟目录，地址：<a target="_blank" rel="noopener" href="http://192.168.1.55/certsrv">http://192.168.1.55/certsrv</a></p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/20210803160337.png" alt="image-20210803160337077"></p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/20210803160535.png" alt="image-20210803160535258"></p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/20210803160602.png" alt="image-20210803160602014"></p>
</li>
<li><p>将刚才在web服务器上创建的证书申请生成的base64位编码填入</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/20210803160802.png" alt="image-20210803160802468"></p>
</li>
</ul>
</li>
</ul>
<h5 id="6、在CA上批准证书申请"><a href="#6、在CA上批准证书申请" class="headerlink" title="6、在CA上批准证书申请"></a>6、在CA上批准证书申请</h5><ul>
<li><p>打开证书颁发机构管理器，找到挂起的申请</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/20210803161022.png" alt="image-20210803161022749"></p>
</li>
<li><p>直接进行颁发</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/20210803161108.png" alt="image-20210803161108300"></p>
</li>
</ul>
<h5 id="7、使用web服务器再次访问证书服务器虚拟目录下载证书"><a href="#7、使用web服务器再次访问证书服务器虚拟目录下载证书" class="headerlink" title="7、使用web服务器再次访问证书服务器虚拟目录下载证书"></a>7、使用web服务器再次访问证书服务器虚拟目录下载证书</h5><p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/20210803161331.png" alt="image-20210803161331699"></p>
<h5 id="8、使用web服务器完成证书申请，导入证书文件"><a href="#8、使用web服务器完成证书申请，导入证书文件" class="headerlink" title="8、使用web服务器完成证书申请，导入证书文件"></a>8、使用web服务器完成证书申请，导入证书文件</h5><p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/20210803161515.png" alt="image-20210803161515324"></p>
<h4 id="五、部署HTTPS服务器"><a href="#五、部署HTTPS服务器" class="headerlink" title="五、部署HTTPS服务器"></a>五、部署HTTPS服务器</h4><h5 id="1、在web服务器上编辑绑定，增加https协议支持，选择对应证书"><a href="#1、在web服务器上编辑绑定，增加https协议支持，选择对应证书" class="headerlink" title="1、在web服务器上编辑绑定，增加https协议支持，选择对应证书"></a>1、在web服务器上编辑绑定，增加https协议支持，选择对应证书</h5><p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/20210803161751.png" alt="image-20210803161750949"></p>
<h5 id="2、要求使用SSL"><a href="#2、要求使用SSL" class="headerlink" title="2、要求使用SSL"></a>2、要求使用SSL</h5><p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/20210803162231.png" alt="image-20210803162231507"></p>
<h4 id="六、分析HTTPS流量"><a href="#六、分析HTTPS流量" class="headerlink" title="六、分析HTTPS流量"></a>六、分析HTTPS流量</h4><h5 id="1、TLS交互过程"><a href="#1、TLS交互过程" class="headerlink" title="1、TLS交互过程"></a>1、TLS交互过程</h5><p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/20210803180204.png" alt="image-20210803180204144"></p>
<h5 id="2、通过数据包捕获进行查看交互过程"><a href="#2、通过数据包捕获进行查看交互过程" class="headerlink" title="2、通过数据包捕获进行查看交互过程"></a>2、通过数据包捕获进行查看交互过程</h5><p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112052320417.png" alt="image-20211205232034366"></p>
<ul>
<li><p>握手阶段一（Client Hello）客户机发起握手消息</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112052256549.png" alt="image-20211205225613471"></p>
</li>
<li><p>握手阶段二（Server Hello，Certificate，Server Key Exchange，Server Hello Done）服务器响应握手消息，将服务器证书发送给客户端，执行DH密钥协商</p>
<ul>
<li><p>Server Hello</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112052307001.png" alt="image-20211205230742929"></p>
</li>
<li><p>Certificate</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112052323167.png" alt="image-20211205232306099"></p>
</li>
<li><p>Server Key Exchange，Server Hello Done</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112052333618.png" alt="image-20211205233321552"></p>
</li>
</ul>
</li>
<li><p>握手阶段三（Client Key Exchange，Change Cipher Spec，Encrypted Handshake Message ）客户端进行密钥协商完成DH过程（因为主密钥是由客户端和服务器的随机数共同生成），随即改变密码规范，告诉服务器启用加密参数</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112060018576.png" alt="image-20211206001842507"></p>
</li>
<li><p>握手阶段四（Change Cipher Spec，Encrypted Handshake Message）服务器响应客户端改变密码规范，启用加密参数</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112060020649.png" alt="image-20211206002026591"></p>
</li>
<li><p>DH密钥交互过程</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112071057843.png" alt="image-20211207105701765"></p>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/10/22/%E6%B5%81%E9%87%8F%E6%94%BB%E5%87%BB-%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE%EF%BC%88http%E5%8D%8F%E8%AE%AE%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="鹿祁">
      <meta itemprop="description" content="心有希冀，目有繁星，追光而遇，沐光而行">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="鹿鹿祁">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/22/%E6%B5%81%E9%87%8F%E6%94%BB%E5%87%BB-%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE%EF%BC%88http%E5%8D%8F%E8%AE%AE%EF%BC%89/" class="post-title-link" itemprop="url">流量攻击-应用层协议（http协议）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-10-22 22:04:28 / 修改时间：22:31:12" itemprop="dateCreated datePublished" datetime="2023-10-22T22:04:28+08:00">2023-10-22</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="一、HTTP协议"><a href="#一、HTTP协议" class="headerlink" title="一、HTTP协议"></a>一、HTTP协议</h4><h5 id="1、HTTP简介"><a href="#1、HTTP简介" class="headerlink" title="1、HTTP简介"></a>1、HTTP简介</h5><ul>
<li>HTTP（Hyper Text Transfer Protocal，超文本传输协议），是用于从万维网（World Wide Web，WWW）服务器传输超文本（HTML）到本地浏览器的传输协议</li>
<li>HTTP基于TCP&#x2F;IP来传递数据（HTML文件、图片文件、查询结构等）</li>
</ul>
<h5 id="2、万维网服务（WWW服务）"><a href="#2、万维网服务（WWW服务）" class="headerlink" title="2、万维网服务（WWW服务）"></a>2、万维网服务（WWW服务）</h5><ul>
<li>Internet上广泛应用的一种信息服务技术</li>
<li>采用客户机&#x2F;服务器架构（C&#x2F;S）</li>
<li>客户机通过浏览器可以观看服务器上图形化页面，浏览器&#x2F;服务器（B&#x2F;S）</li>
</ul>
<h5 id="3、WWW服务软件"><a href="#3、WWW服务软件" class="headerlink" title="3、WWW服务软件"></a>3、WWW服务软件</h5><ul>
<li>Apache（多平台）</li>
<li>IIS（Windows平台）</li>
<li>tomcat（多平台）</li>
<li>nginx（多平台）</li>
<li>……….</li>
</ul>
<h5 id="4、HTTP工作原理"><a href="#4、HTTP工作原理" class="headerlink" title="4、HTTP工作原理"></a>4、HTTP工作原理</h5><ul>
<li><p>HTTP工作于客户端&#x2F;服务器架构上。浏览器作为HTTP客户端通过URL向HTTP服务器即WEB服务器发送所有请求。</p>
<ul>
<li><p>URL即统一资源定位符(Uniform Resource Locator)，用来唯一地标识万维网中的某一个文档。URL由协议、主机和端口(默认为80)以及文件名三部分构成</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112031404962.png" alt="image-20210802173359713"></p>
</li>
</ul>
</li>
<li><p>WEB服务器根据接收到的请求向客户端发送响应信息</p>
</li>
<li><p>HTTP默认端口号为80，但是管理员可以可以将其端口进行修改（但建议改为其他非标准端口）</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112031404362.png" alt="image-20210802173214629"></p>
</li>
</ul>
<h5 id="5、HTTP的3点注意事项"><a href="#5、HTTP的3点注意事项" class="headerlink" title="5、HTTP的3点注意事项"></a>5、HTTP的3点注意事项</h5><ul>
<li>HTTP是无连接的：无连接的含义是限制每次连接只处理一个请求。服务器处理完客户端的请求并收到客户端的应答后即断开连接。采用这种方式可以节省传输时间</li>
<li>HTTP是媒体独立的：只要客户端和服务器知道如何处理数据内容，任何类型的数据都可以通过HTTP发送。客户端以及服务器指定使用适合的MIME-type（消息内容类型）</li>
<li>HTTP是无状态的：是指协议对于事务处理没有记忆能力，如果后续处理需要前面的信息，则必须重传，这样可能导致每次连接传送的数据量增大，另一方面，在服务器不需要提供先前信息时它的应答就较快</li>
</ul>
<h4 id="二、Windows-server部署web服务"><a href="#二、Windows-server部署web服务" class="headerlink" title="二、Windows server部署web服务"></a>二、Windows server部署web服务</h4><h5 id="1、服务器固定IP"><a href="#1、服务器固定IP" class="headerlink" title="1、服务器固定IP"></a>1、服务器固定IP</h5><p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112031404033.png" alt="image-20210802161705328"></p>
<h5 id="2、添加服务器角色"><a href="#2、添加服务器角色" class="headerlink" title="2、添加服务器角色"></a>2、添加服务器角色</h5><p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112031404365.png" alt="image-20210802161758306"></p>
<ul>
<li><p>角色添加完成后，打开IIS管理器，可以看到上面自动运行了一个默认站点</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112031404507.png" alt="image-20210802162244431"></p>
</li>
</ul>
<h5 id="3、配置站点"><a href="#3、配置站点" class="headerlink" title="3、配置站点"></a>3、配置站点</h5><ul>
<li><p>新增站点</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112031404036.png" alt="image-20210802163737524"></p>
</li>
<li><p>配置默认文档</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112031404792.png" alt="image-20210802164728511"></p>
</li>
</ul>
<h5 id="4、配置虚拟目录"><a href="#4、配置虚拟目录" class="headerlink" title="4、配置虚拟目录"></a>4、配置虚拟目录</h5><ul>
<li><p>添加虚拟目录（目录位置可以和网站根目录分离开）</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112031404804.png" alt="image-20210802165108172"></p>
</li>
<li><p>访问时需要加上路径（path）</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112031404924.png" alt="image-20210802165224601"></p>
</li>
</ul>
<h5 id="5、配置虚拟主机"><a href="#5、配置虚拟主机" class="headerlink" title="5、配置虚拟主机"></a>5、配置虚拟主机</h5><ul>
<li><p>在服务器上创建多个站点</p>
<ul>
<li><p>使用不同IP地址来进行区分</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112031404051.png" alt="image-20210802170419809"></p>
</li>
<li><p>相同IP地址情况，使用不同端口号进行区分</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112031404068.png" alt="image-20210802170657198"></p>
</li>
<li><p>相同IP地址相同端口号情况，使用不同主机名进行区分（需要DNS支持，在DNS上有对应的主机（A）记录）</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112031404143.png" alt="image-20210802170951289"></p>
</li>
</ul>
</li>
</ul>
<h4 id="三、分析HTTP流量"><a href="#三、分析HTTP流量" class="headerlink" title="三、分析HTTP流量"></a>三、分析HTTP流量</h4><h5 id="1、抓取HTTP流量"><a href="#1、抓取HTTP流量" class="headerlink" title="1、抓取HTTP流量"></a>1、抓取HTTP流量</h5><p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112130045669.png" alt="image-20211213004531563"></p>
<h5 id="2、HTTP请求报文"><a href="#2、HTTP请求报文" class="headerlink" title="2、HTTP请求报文"></a>2、HTTP请求报文</h5><p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112130106707.png" alt="image-20211213010647631"></p>
<ul>
<li>请求方法</li>
</ul>
<table>
<thead>
<tr>
<th align="left">方法</th>
<th align="left">说明</th>
<th align="left">支持的HTTP协议版本</th>
</tr>
</thead>
<tbody><tr>
<td align="left">GET</td>
<td align="left">获取资源</td>
<td align="left">1.0、1.1</td>
</tr>
<tr>
<td align="left">POST</td>
<td align="left">传输实体主体</td>
<td align="left">1.0、1.1</td>
</tr>
<tr>
<td align="left">PUT</td>
<td align="left">传输文件</td>
<td align="left">1.0、1.1</td>
</tr>
<tr>
<td align="left">HEAD</td>
<td align="left">获得报文首部</td>
<td align="left">1.0、1.1</td>
</tr>
<tr>
<td align="left">DELETE</td>
<td align="left">删除文件</td>
<td align="left">1.0、1.1</td>
</tr>
<tr>
<td align="left">OPTIONS</td>
<td align="left">询问支持得方法</td>
<td align="left">1.1</td>
</tr>
<tr>
<td align="left">TRACE</td>
<td align="left">追踪路径</td>
<td align="left">1.1</td>
</tr>
<tr>
<td align="left">CONNECT</td>
<td align="left">要求用隧道协议连接代理</td>
<td align="left">1.1</td>
</tr>
<tr>
<td align="left">LINK</td>
<td align="left">建立和资源之间的联系</td>
<td align="left">1.1</td>
</tr>
<tr>
<td align="left">UNLINE</td>
<td align="left">断开连接关系</td>
<td align="left">1.0</td>
</tr>
</tbody></table>
<ul>
<li>请求头内容</li>
</ul>
<table>
<thead>
<tr>
<th align="left">首部字段名</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Accept</td>
<td align="left">用户代理可处理的媒体类型</td>
</tr>
<tr>
<td align="left">Accept-Charset</td>
<td align="left">优先的字符集</td>
</tr>
<tr>
<td align="left">Accept-Encoding</td>
<td align="left">邮件的内容编码</td>
</tr>
<tr>
<td align="left">Accept-Language</td>
<td align="left">优先的语言（自然语言）</td>
</tr>
<tr>
<td align="left">Authorization</td>
<td align="left">Web认证信息</td>
</tr>
<tr>
<td align="left">Expect</td>
<td align="left">期待服务器的特点行为</td>
</tr>
<tr>
<td align="left">From</td>
<td align="left">用户的电子邮箱地址</td>
</tr>
<tr>
<td align="left">Host</td>
<td align="left">请求资源所在服务器</td>
</tr>
<tr>
<td align="left">If-Match</td>
<td align="left">比较实体标记（ETag）</td>
</tr>
<tr>
<td align="left">If-Modified-Since</td>
<td align="left">比较资源的更新时间</td>
</tr>
<tr>
<td align="left">If-None-Match</td>
<td align="left">比较实体标记（与 If-Match 相反）</td>
</tr>
<tr>
<td align="left">If-Range</td>
<td align="left">资源未更新时发送实体 Byte 的范围请求</td>
</tr>
<tr>
<td align="left">If-Unmodified-Since</td>
<td align="left">比较资源的更新时间（与 If-Modified-Since 相反）</td>
</tr>
<tr>
<td align="left">Max-Forwards</td>
<td align="left">最大传输逐跳数</td>
</tr>
<tr>
<td align="left">Proxy-Authorization</td>
<td align="left">代理服务器要求客户端的认证信息</td>
</tr>
<tr>
<td align="left">Range</td>
<td align="left">实体的字节范围请求</td>
</tr>
<tr>
<td align="left">Referer</td>
<td align="left">对请求中 URI 的原始获取方</td>
</tr>
<tr>
<td align="left">Te</td>
<td align="left">传输编码的优先级</td>
</tr>
<tr>
<td align="left">User-Agent</td>
<td align="left">HTTP 客户端程序的信息</td>
</tr>
</tbody></table>
<h5 id="3、HTTP响应报文"><a href="#3、HTTP响应报文" class="headerlink" title="3、HTTP响应报文"></a>3、HTTP响应报文</h5><p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/202112130138906.png" alt="image-20211213013849828"></p>
<ul>
<li>HTTP响应状态码<ul>
<li>当浏览者访问一个网页时，浏览者的浏览器会向网页所在的服务器发出请求。当浏览器接收并显示网页前，此网页所在的服务器会返回一个包含HTTP状态码的信息头（Server Header）用以响应浏览器的请求</li>
<li>HTTP状态码类型<ul>
<li>HTTP状态码由三个十进制数字组成，第一个十进制数字定义了状态码的类型，后两个数字没有分类的作用。HTTP状态码共分为5种类型</li>
</ul>
</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th align="left">类型</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">1**</td>
<td align="left">信息，服务器收到请求，需要请求者继续执行操作</td>
</tr>
<tr>
<td align="left">2**</td>
<td align="left">成功，操作被成功接收并处理</td>
</tr>
<tr>
<td align="left">3**</td>
<td align="left">重定向，需要进一步操作以完成请求</td>
</tr>
<tr>
<td align="left">4**</td>
<td align="left">客户端错误，请求包含语法错误或无法完成请求</td>
</tr>
<tr>
<td align="left">5**</td>
<td align="left">服务器错误，服务器再处理请求的过程中发生了错误</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">状态码</th>
<th align="left">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="left">200</td>
<td align="left">成功响应</td>
</tr>
<tr>
<td align="left">204</td>
<td align="left">请求处理成功，但是没有资源可以返回</td>
</tr>
<tr>
<td align="left">206</td>
<td align="left">对资源某一部分进行响应，由Content-Range 指定范围的实体内容。</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">状态码</th>
<th align="left">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="left">301</td>
<td align="left">永久性重定向，该状态码表示请求的资源已经重新分配 URI，以后应该使用资源现有的 URI</td>
</tr>
<tr>
<td align="left">302</td>
<td align="left">临时性重定向。该状态码表示请求的资源已被分配了新的 URI，希望用户（本次）能使用新的 URI 访问。</td>
</tr>
<tr>
<td align="left">303</td>
<td align="left">该状态码表示由于请求对应的资源存在着另一个 URI，应使用 GET 方法定向获取请求的资源。</td>
</tr>
<tr>
<td align="left">304</td>
<td align="left">该状态码表示客户端发送附带条件的请求时，服务器端允许请求访问资源，但未满足条件的情况。</td>
</tr>
<tr>
<td align="left">307</td>
<td align="left">临时重定向。该状态码与 302 Found 有着相同的含义。</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">状态码</th>
<th align="left">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="left">400</td>
<td align="left">该状态码表示请求报文中存在语法错误。当错误发生时，需修改请求的内容后再次发送请求。</td>
</tr>
<tr>
<td align="left">401</td>
<td align="left">该状态码表示发送的请求需要有通过 HTTP 认证（BASIC 认证、DIGEST 认证）的认证信息。</td>
</tr>
<tr>
<td align="left">403</td>
<td align="left">该状态码表明对请求资源的访问被服务器拒绝了。</td>
</tr>
<tr>
<td align="left">404</td>
<td align="left">该状态码表明服务器上无法找到请求的资源。</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th align="left">状态码</th>
<th align="left">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="left">500</td>
<td align="left">该状态码表明服务器端在执行请求时发生了错误。</td>
</tr>
<tr>
<td align="left">503</td>
<td align="left">该状态码表明服务器暂时处于超负载或正在进行停机维护，现在无法处理请求。</td>
</tr>
</tbody></table>
<ul>
<li>响应头</li>
</ul>
<table>
<thead>
<tr>
<th align="left">首部字段名</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Accept-Ranges</td>
<td align="left">服务器指定它对某个资源请求的可接受范围</td>
</tr>
<tr>
<td align="left">Age</td>
<td align="left">服务器规定自服务器生成该响应以来所经过的时间，以秒为单位，主要用于缓存响应</td>
</tr>
<tr>
<td align="left">Etag</td>
<td align="left">提供实体标签的当前值</td>
</tr>
<tr>
<td align="left">Location</td>
<td align="left">因资源已经移动，把请求重定向至另一个位置，与状态编码302或者301配合使用</td>
</tr>
<tr>
<td align="left">Proxy-Authenticate</td>
<td align="left">类似于WWW-Authenticate,但回应的是来自请求链(代理)的下一个服务器的认证</td>
</tr>
<tr>
<td align="left">Retry-After</td>
<td align="left">由服务器与状态编码503 ( 无法提供服务)配合发送，以标明再次请求之前应该等待多长时间</td>
</tr>
<tr>
<td align="left">Server</td>
<td align="left">标明Web服务器软件及其版本号</td>
</tr>
<tr>
<td align="left">Vary</td>
<td align="left">用于代理是否可以使用缓存中的数据响应客户端的请求</td>
</tr>
<tr>
<td align="left">WWW-Authenticate</td>
<td align="left">提示客户端提供用户名和密码进行认证，与状态编码401 (未提权)配合使用530</td>
</tr>
</tbody></table>
<h5 id="4、通用标头"><a href="#4、通用标头" class="headerlink" title="4、通用标头"></a>4、通用标头</h5><table>
<thead>
<tr>
<th align="left">首部字段名</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Cache-Control</td>
<td align="left">控制缓存的行为</td>
</tr>
<tr>
<td align="left">Connection</td>
<td align="left">逐跳首部、连接的管理</td>
</tr>
<tr>
<td align="left">Date</td>
<td align="left">创建报文的日期时间</td>
</tr>
<tr>
<td align="left">Pragma</td>
<td align="left">报文指令</td>
</tr>
<tr>
<td align="left">Trailer</td>
<td align="left">报文末端的首部一览</td>
</tr>
<tr>
<td align="left">Transfer-Encoding</td>
<td align="left">指定报文主体的传输编码方式</td>
</tr>
<tr>
<td align="left">Upgrade</td>
<td align="left">升级为其他协议</td>
</tr>
<tr>
<td align="left">Via</td>
<td align="left">代理服务器的相关信息</td>
</tr>
<tr>
<td align="left">Warning</td>
<td align="left">错误通知</td>
</tr>
</tbody></table>
<h5 id="5、实体标头"><a href="#5、实体标头" class="headerlink" title="5、实体标头"></a>5、实体标头</h5><table>
<thead>
<tr>
<th align="left">首部字段名</th>
<th align="left">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Allow</td>
<td align="left">资源可支持的HTTP方法</td>
</tr>
<tr>
<td align="left">Content-Encoding</td>
<td align="left">实体主体适用的编码方式</td>
</tr>
<tr>
<td align="left">Content-Language</td>
<td align="left">实体主体的自然语言</td>
</tr>
<tr>
<td align="left">Content-Length</td>
<td align="left">实体主体的大小（单位：字节）</td>
</tr>
<tr>
<td align="left">Content-Location</td>
<td align="left">替代对应资源的URL</td>
</tr>
<tr>
<td align="left">Content-MD5</td>
<td align="left">实体主体的报文摘要</td>
</tr>
<tr>
<td align="left">Content-Range</td>
<td align="left">实体主体的位置范围</td>
</tr>
<tr>
<td align="left">Content-Type</td>
<td align="left">实体主体的媒体类型</td>
</tr>
<tr>
<td align="left">Expires</td>
<td align="left">实体主体过期的日期时间</td>
</tr>
<tr>
<td align="left">Last-Modified</td>
<td align="left">资源的最后修改日期时间</td>
</tr>
</tbody></table>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2023/10/22/%E6%B5%81%E9%87%8F%E6%94%BB%E5%87%BB-%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE%EF%BC%88dns%E5%8D%8F%E8%AE%AE%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="鹿祁">
      <meta itemprop="description" content="心有希冀，目有繁星，追光而遇，沐光而行">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="鹿鹿祁">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/10/22/%E6%B5%81%E9%87%8F%E6%94%BB%E5%87%BB-%E5%BA%94%E7%94%A8%E5%B1%82%E5%8D%8F%E8%AE%AE%EF%BC%88dns%E5%8D%8F%E8%AE%AE%EF%BC%89/" class="post-title-link" itemprop="url">流量攻击-应用层协议（dns协议）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2023-10-22 22:04:20 / 修改时间：22:30:38" itemprop="dateCreated datePublished" datetime="2023-10-22T22:04:20+08:00">2023-10-22</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="一、DNS服务"><a href="#一、DNS服务" class="headerlink" title="一、DNS服务"></a>一、DNS服务</h4><h5 id="1、DNS概述"><a href="#1、DNS概述" class="headerlink" title="1、DNS概述"></a>1、DNS概述</h5><ul>
<li>域名系统（Domain Name System，DNS）是互联网的一项服务。它作为将域名和IP地址相互映射的一个分布式数据库，能够使人更方便地访问互联网。DNS使用UDP端口53。当前，对于每一级域名长度的限制是63个字符，域名总长度则不能超过253个字符</li>
<li>域名（域名由因特网域名与地址管理机构(ICANN，Internet Corporation for Assigned Names and Numbers)管理）<ul>
<li>举例：<a target="_blank" rel="noopener" href="http://www.baidu.com/">www.baidu.com</a> <a target="_blank" rel="noopener" href="http://www.sina.com.cn/">www.sina.com.cn</a> <a target="_blank" rel="noopener" href="http://www.woniuxy.com/">www.woniuxy.com</a></li>
</ul>
</li>
</ul>
<h5 id="2、名称空间"><a href="#2、名称空间" class="headerlink" title="2、名称空间"></a>2、名称空间</h5><ul>
<li><p>域名空间结构（树状结构）</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/20210729101754.png" alt="image-20210729101754114"></p>
<ul>
<li>根域（全世界只有13台根域服务器）</li>
<li>顶级域（主要用于区分域名的用途）<ul>
<li>组织域<ul>
<li>com 商业</li>
<li>edu 教育、学校</li>
<li>org 社会非盈利性组织</li>
</ul>
</li>
<li>国家&#x2F;地区域名<ul>
<li>cn 中国</li>
<li>hk 香港</li>
<li>us 美国</li>
<li>uk 英国</li>
</ul>
</li>
</ul>
</li>
<li>二级域名（一般情况下去申请域名，都是申请的二级域名）</li>
<li>FQDN&#x3D;主机名.DNS后缀</li>
</ul>
</li>
</ul>
<h4 id="二、DNS查询"><a href="#二、DNS查询" class="headerlink" title="二、DNS查询"></a>二、DNS查询</h4><h5 id="1、查询过程"><a href="#1、查询过程" class="headerlink" title="1、查询过程"></a>1、查询过程</h5><ul>
<li><p>查询<a target="_blank" rel="noopener" href="http://www.woniuxy.com过程/">www.woniuxy.com过程</a></p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/20210729091043.png" alt="image-20210729091036677"></p>
<ul>
<li>客户机将查询 <a target="_blank" rel="noopener" href="http://www.woniuxy.com/">www.woniuxy.com</a> 的信息传递到自己的首选DNS服务器。</li>
<li>DNS客户机的首选DNS服务器检查区域数据库，由于此服务器没有woniuxy.com域的授权记录，因此，它将查询信息传递到根域DNS服务器，请求解析主机名称。</li>
<li>根域DNS服务器把负责解析“com”顶级域的DNS服务器的IP地址返回给DNS客户机的首选DNS服务器。</li>
<li>首选DNS服务器将请求发送给负责“com”域的DNS服务器。</li>
<li>负责“com”域的服务器根据请求将负责“woniuxy.com”域的DNS服务器的IP地址返回给首选DNS服务器。</li>
<li>首选DNS服务器向负责“woniuxy.com”区域的DNS服务器发送请求。</li>
<li>由于此服务器具有 <a target="_blank" rel="noopener" href="http://www.woniuxy.com/">www.woniuxy.com</a> 的记录，因此它将 <a target="_blank" rel="noopener" href="http://www.woniuxy.com/">www.woniuxy.com</a> 的IP地址返回给首选DNS 服务器。</li>
<li>客户机的首选DNS服务器将 <a target="_blank" rel="noopener" href="http://www.woniuxy.com/">www.woniuxy.com</a> 的IP 地址发送给客户机。</li>
<li>域名解析成功后，客户机将http请求发送给Web服务器。</li>
<li>Web服务器响应客户机的访问请求，客户机便可以访问目标主机。</li>
</ul>
</li>
</ul>
<h5 id="2、查询方式"><a href="#2、查询方式" class="headerlink" title="2、查询方式"></a>2、查询方式</h5><ul>
<li>从查询方式分类<ul>
<li>递归查询：客户机请求自己的首选DNS服务器，首选DNS服务器上有对应的域名记录信息，直接回应给客户机</li>
<li>迭代查询：首选DNS服务器上没有对应的域名记录信息，通过一步一步请根域服务器，请求定义域服务器，请求二级域服务器，最终找到对应的域名记录信息</li>
</ul>
</li>
<li>从查询内容分类<ul>
<li>正向查询：由域名查找IP地址</li>
<li>反向查询：由IP地址查找域名</li>
</ul>
</li>
</ul>
<h4 id="三、部署DNS服务器"><a href="#三、部署DNS服务器" class="headerlink" title="三、部署DNS服务器"></a>三、部署DNS服务器</h4><h5 id="1、DNS服务器的分类"><a href="#1、DNS服务器的分类" class="headerlink" title="1、DNS服务器的分类"></a>1、DNS服务器的分类</h5><ul>
<li>主要名称服务器：存放该区域（二级域名区域）中相关设置的DNS服务器，存放的是区域文件的正本数据（原件）</li>
<li>辅助名称服务器：主要是从其他服务器中复制数据，数据为副本并且无法修改</li>
<li>主控名称服务器：提供数据复制的DNS服务器</li>
<li>缓存域名（Cache-Only）服务器：没有区域文件，主要为客户端提供高速缓存，将查询到的数据保存在高速缓存中</li>
</ul>
<h5 id="2、部署"><a href="#2、部署" class="headerlink" title="2、部署"></a>2、部署</h5><ul>
<li><p>为服务器设置固定IP（一般情况下，服务器都是会对外或对内提供服务，使用固定IP，防止服务器IP发生变化造成无法访问情况）</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/20210729110832.png" alt="image-20210729110832686"></p>
</li>
<li><p>添加服务器角色，DNS角色</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/20210729110948.png" alt="image-20210729110948497"></p>
</li>
</ul>
<h5 id="3、配置DNS服务器"><a href="#3、配置DNS服务器" class="headerlink" title="3、配置DNS服务器"></a>3、配置DNS服务器</h5><ul>
<li><p>打开DNS管理器（管理工具→DNS）</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/20210729111221.png" alt="image-20210729111221369"></p>
</li>
<li><p>新建正向区域（主要区域）</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/20210729111414.png" alt="image-20210729111414867"></p>
</li>
<li><p>定义区域名称，直接下一步完成</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/20210729114323.png" alt="image-20210729114323569"></p>
</li>
<li><p>创建主机记录</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/20210729114510.png" alt="image-20210729114510321"></p>
</li>
</ul>
<h5 id="4、DNS记录"><a href="#4、DNS记录" class="headerlink" title="4、DNS记录"></a>4、DNS记录</h5><ul>
<li>SOA（起始授权机构）：定义了该域中的权威名称服务器</li>
<li>NS（名称服务器）：表示某区域的权威服务器和SQA中指定的该区域的主要服务器和辅助服务器</li>
<li>A（主机）：列出了区域中FQDN（完全合格的域名）到IP地址的映射</li>
<li>PTR（指针）：相对于A资源记录，PTR记录是把IP地址映射到FQDN</li>
<li>MX：邮件交换器记录，向指定的邮件交换主机提供消息路由</li>
<li>SRV（服务）：列出了正在提供特定服务的服务器</li>
<li>CNAME（别名）：将多个名字映射到同一台计算机上，便于用户访问</li>
</ul>
<h4 id="四、分析DNS流量"><a href="#四、分析DNS流量" class="headerlink" title="四、分析DNS流量"></a>四、分析DNS流量</h4><h5 id="1、通过wireshark抓取DNS报文"><a href="#1、通过wireshark抓取DNS报文" class="headerlink" title="1、通过wireshark抓取DNS报文"></a>1、通过wireshark抓取DNS报文</h5><ul>
<li><p>请求报文</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/20210729162939.png" alt="image-20210729162938616"></p>
</li>
<li><p>应答报文</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/20210729163052.png" alt="image-20210729163052430"></p>
</li>
</ul>
<h5 id="2、DNS报文字段"><a href="#2、DNS报文字段" class="headerlink" title="2、DNS报文字段"></a>2、DNS报文字段</h5><p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/20210729154011.png" alt="image-20210729154004427"></p>
<ul>
<li>ID：2字节，标识符，通过随机数标识该请求</li>
<li>Flage：2字节，标志位设置<ul>
<li>第1位：msg类型，0为请求（Query）1为响应（Response）</li>
<li>第2~5位：opcode，查询种类，0000标识标准Query</li>
<li>第6位：是否权威应答（应答时才有意义）</li>
<li>第7位：因为一个UDP报文为512字节，所以该位指示是否截断超过的部分</li>
<li>第8位：是否请求递归（这个位被请求设置，应答的时候使用相同的值返回）</li>
<li>第9位：允许递归标识。此字段在应答字段中使用，0表示应答服务器不支持递归查询，1表示应答服务器支持递归查询</li>
<li>第10~12位：保留位（设置为0）</li>
<li>第13<del>16位：应答码（0：没有错误，1：格式错误，2：服务器错误，3：名字错误，4：服务器不支持，5：拒绝，6</del>15：保留值）</li>
</ul>
</li>
<li>Questions：2字节，报文请求段中的问题记录数</li>
<li>Answer RRs：2字节，报文回答段中的回答记录数</li>
<li>Authority RRs：2字节，报文授权段中的授权记录数</li>
<li>Additional RRs：2字节，报文附加段中的附加记录数</li>
<li>Queries：查询请求内容（响应时不变即可）<ul>
<li>Name：不定长，域名（例如，<a target="_blank" rel="noopener" href="http://www.baidu.com需写作3www5baidu3com0)/">www.baidu.com需写作3www5baidu3com0）</a></li>
<li>Type：2字节查询的资源记录类型</li>
<li>Class：2字节指定信息的协议组</li>
</ul>
</li>
<li>Answers：查询响应内容，可以有0~n条（请求时为空即可）<ul>
<li>Name：2字节（压缩编码）指向name第一次出现的地址且前两位为11</li>
<li>Type：2字节响应类型</li>
<li>Class：2字节</li>
<li>TTL：4字节</li>
<li>Datalength：2字节，指接下来data长度，单位为字节</li>
<li>Address&#x2F;CNAME：4字节地址&#x2F;不定长域名</li>
</ul>
</li>
<li>Authoritative Nameservers（权威域名服务器）<ul>
<li>Name：2字节（压缩编码）指向Name第一次出现的地址且前两位为11</li>
<li>Type：2字节响应类型。此处为2（NS）</li>
<li>Class：2字节</li>
<li>TTL：4字节</li>
<li>Datalength：2字节，指接下来data长度，单位为字节</li>
<li>Nameserver：此处为6字节，表示方法待研究</li>
</ul>
</li>
<li>Additional Records（额外的记录）<ul>
<li>Name：2字节（压缩编码）指向Name第一次出现的地址且前两位为11</li>
<li>Type：2字节响应类型</li>
<li>Class：2字节，表示类型</li>
<li>TTL：4字节</li>
<li>Datalength：2字节，指接下来data长度，单位为字节</li>
<li>Address：此处为4字节地址</li>
</ul>
</li>
</ul>
<h4 id="五、实施DNS-欺骗攻击"><a href="#五、实施DNS-欺骗攻击" class="headerlink" title="五、实施DNS 欺骗攻击"></a>五、实施DNS 欺骗攻击</h4><h5 id="1、实验环境"><a href="#1、实验环境" class="headerlink" title="1、实验环境"></a>1、实验环境</h5><ul>
<li>一台 Windows 10 客户机，正常桥接，可以访问公网</li>
<li>一台 kali Linux 攻击主机，正常桥接（使用 Ettercap 工具）</li>
</ul>
<h5 id="2、实验步骤"><a href="#2、实验步骤" class="headerlink" title="2、实验步骤"></a>2、实验步骤</h5><ul>
<li><p>使用 Windows 10 访问公网域名 <a target="_blank" rel="noopener" href="http://www.woniuxy.com/">www.woniuxy.com</a> 显示正常访问</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/20211129012035.png" alt="image-20211129012035261"></p>
</li>
<li><p>使用 kali Linux 上的 Ettercap 工具</p>
<ul>
<li><p>修改 Ettercap 中 dns 的配置文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">┌──(root@kali)-[~]└─# vim /etc/ettercap/etter.dns</span><br></pre></td></tr></table></figure>

<ul>
<li>增加内容，讲 <a target="_blank" rel="noopener" href="http://www.woniuxy.com/">www.woniuxy.com</a> 域名的 IP 地址指向本机</li>
</ul>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/20211129012546.png" alt="image-20211129012545882"></p>
</li>
<li><p>开启本机 apache2 服务（如果有其他网站服务器也可以将上述域名和 IP 的对应关系指向其他网站服务器，这里使用本机作为网站服务器）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">┌──(root@kali)-[~]└─# service apache2 start</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用 Ettercap 开始进行 dns_spoof（也可以直接开启图形化界面操作）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">┌──(root@kali)-[~]└─# ettercap -i eth0 -Tq -M arp:remote -P dns_spoof /192.168.31.250// /192.168.31.1//# -i 指定网络接口# -Tq 使用文本但不显示数据包内容# -M 进行mitm攻击（arp是属于Ettercap中的mitm攻击）# -P 启动这个&lt;plugin&gt;（使用此工具集中的 dns_spoof,可以有多个）# /192.168.31.250//    客户机IP# /192.168.31.1/    网关IP</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>此时再使用 Windows 10 访问 <a target="_blank" rel="noopener" href="http://www.woniuxy.com/">www.woniuxy.com</a> 就可以看到访问的是 kali Linux系统上的网站</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/20211129014919.png" alt="image-20211129014918997"></p>
</li>
</ul>
<h5 id="3、分析流量"><a href="#3、分析流量" class="headerlink" title="3、分析流量"></a>3、分析流量</h5><ul>
<li><p>在进行网站访问时通过 wireshark 抓包工具进行流量抓取，从流量上未看出异常</p>
<ul>
<li><p>请求报文</p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/20211129015228.png" alt="image-20211129015228352"></p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/20211129015431.png" alt="image-20211129015431031"></p>
</li>
</ul>
</li>
<li><p>在 Windows 10 客户机上进行 ARP 绑定，将网关的 IP 和 MAC 地址进行静态绑定（因为DNS欺骗是利用ARP欺骗攻击实现）</p>
<ul>
<li><p>查看网卡接口编号</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Administrator&gt;netsh interface ipv4 show interfaceIdx     Met         MTU          状态                名称---  ----------  ----------  ------------  ---------------------------  1          75  4294967295  connected     Loopback Pseudo-Interface 1  6          25        1500  connected     Ethernet0  7          65        1500  disconnected  蓝牙网络连接</span><br></pre></td></tr></table></figure>
</li>
<li><p>将网关 IP 及 MAC 进行静态绑定</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Administrator&gt;netsh -c &quot;i i&quot; add neighbors 6 192.168.31.1 3c-cd-57-52-e0-65C:\Users\Administrator&gt;arp -a接口: 192.168.31.250 --- 0x6  Internet 地址         物理地址              类型  192.168.31.1          3c-cd-57-52-e0-65     静态</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>再次进行抓包并访问 <a target="_blank" rel="noopener" href="http://www.woniuxy.com/">www.woniuxy.com</a> （这里也可以使用直接 ping <a target="_blank" rel="noopener" href="http://www.woniuxy.com)/">www.woniuxy.com）</a></p>
<p><img src="https://woniumd.oss-cn-hangzhou.aliyuncs.com/security/yangwencai/20211129022612.png" alt="image-20211129022612364"></p>
</li>
<li><p>可以看出，默认 DNS 服务器进行了两次响应，从分析可以得出，DNS报文是被劫持，并且触发了 ICMP 的不可达报文</p>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/14/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/14/">14</a><span class="page-number current">15</span><a class="page-number" href="/page/16/">16</a><span class="space">&hellip;</span><a class="page-number" href="/page/22/">22</a><a class="extend next" rel="next" href="/page/16/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">鹿祁</p>
  <div class="site-description" itemprop="description">心有希冀，目有繁星，追光而遇，沐光而行</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">219</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">鹿祁</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  
  <script color='0,0,255' opacity='0.5' zIndex='-1' count='99' src="/lib/canvas-nest/canvas-nest.min.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>


  <script defer src="/lib/three/three.min.js"></script>


  















  

  

</body>
</html>
